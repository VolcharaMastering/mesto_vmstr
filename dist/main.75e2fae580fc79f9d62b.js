!function(){"use strict";var e={activeForm:".popup__inputs",formInput:".popup__input",popupSaveButton:".popup__save",popupDisableButton:"popup__save_disable",inputError:"popup__input_type_error",activeError:"popup__input_error_active"},t=document.querySelector(".gallery"),n=document.forms.profile,r=document.forms.addImage;function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){function e(t,n,r,o,c,a,u){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_getTemplate",(function(){return document.querySelector(s._selector).content.cloneNode(!0)})),i(this,"_deleteImage",(function(e){s._handleCardDelete(s._cardId),s._cardTemplate=null,e.target.closest(".card").remove()})),i(this,"_addEvents",(function(){s._ownerId==myId?s._cardRemove.addEventListener("click",s._deleteImage):s._cardRemove.classList.remove("card__remove"),s._cardLike.addEventListener("click",(function(){s._like?(s._getLikes={},Object.assign(s._getLikes,s._delLike(s._cardId)),console.log("get likes= "+s._getLikes),s._addLikeCounter()):(s._addLike(s._cardId).then((function(e){return console.log("count="+e.length),newLikes})).catch((function(e){console.log(e)})),s._addLikeCounter()),s._cardLike.classList.toggle("card__like_active")})),s._cardImage.addEventListener("click",(function(){s._handleCardClick(s._newCardName,s._imageLink)}))})),i(this,"_checkLikes",(function(){s._getLikes.length>0&&null!=s._getLikes.find((function(e){return e._id==s._myId}))&&(s._cardLike.classList.add("card__like_active"),s._like=!0)})),i(this,"_addLikeCounter",(function(){s._likeNumber.textContent=s._getLikes.length})),this._newCardName=t.name,this._imageLink=t.link,this._getLikes=t.likes,this._cardId=t._id,this._ownerId=t.owner._id,this._selector=n,this._handleCardClick=r,this._handleCardDelete=o,this._delLike=c,this._addLike=a,this._myId=u,this._like=!1}var t,n;return t=e,(n=[{key:"makeCard",value:function(){return this._cardTemplate=this._getTemplate(),this._cardImage=this._cardTemplate.querySelector(".card__image"),this._cardName=this._cardTemplate.querySelector(".card__name"),this._cardRemove=this._cardTemplate.querySelector(".card__remove"),this._cardLike=this._cardTemplate.querySelector(".card__like"),this._likeNumber=this._cardTemplate.querySelector(".card__like-count"),this._checkLikes(),this._addLikeCounter(),this._cardImage.setAttribute("src",this._imageLink),this._cardImage.setAttribute("alt","Фото из галереи: "+this._newCardName),this._cardName.textContent=this._newCardName,this._addEvents(),this._cardTemplate}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var e=this;this.clear(),this._items.forEach((function(t){return e._renderer(t)}))}},{key:"prepends",value:function(e){this._container.prepend(e)}},{key:"appends",value:function(e){this._container.append(e)}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=l((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"_setEventListeners",(function(){r._toggleButtonState(),r._inputArray.forEach((function(e){e.addEventListener("input",(function(){r._checkInputValidity(e),r._toggleButtonState()}))}))})),f(this,"enableValidation",(function(){r._setEventListeners()})),f(this,"_showInputError",(function(e,t){var n=r._form.querySelector(".".concat(e.id,"-error"));e.classList.add(r._inputError),n.classList.add(r._activeError),n.textContent=t})),f(this,"_hideInputError",(function(e){var t=r._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._inputError),t.classList.remove(r._activeError),t.textContent=""})),f(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),f(this,"_hasInvalidInput",(function(){return r._inputArray.some((function(e){return!e.validity.valid}))})),f(this,"_toggleButtonState",(function(){r._hasInvalidInput()?(r._saveButton.classList.add(r._popupDisableButton),r._saveButton.setAttribute("disabled","disabled")):(r._saveButton.classList.remove(r._popupDisableButton),r._saveButton.removeAttribute("disabled"))})),f(this,"resetValidation",(function(){r._toggleButtonState(),r._inputArray.forEach((function(e){r._hideInputError(e)}))})),this._activeForm=t.activeForm,this._formInput=t.formInput,this._popupSaveButton=t.popupSaveButton,this._popupDisableButton=t.popupDisableButton,this._inputError=t.inputError,this._activeError=t.activeError,this._form=n,this._inputArray=Array.from(this._form.querySelectorAll(this._formInput)),this._saveButton=this._form.querySelector(this._popupSaveButton)}));function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(){document.addEventListener("keydown",o._escCloseListen=function(e){"Escape"===e.key&&o.close()})},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_active"),this._handleEscClose()}},{key:"close",value:function(){this._popup.classList.remove("popup_active"),document.removeEventListener("keydown",this._escCloseListen)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",this._closeListener=function(t){(t.target===t.currentTarget||t.target.classList.contains("popup__close"))&&e.close()})}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function v(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=g(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},m.apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(i,e);var t,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(n);if(r){var o=k(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return v(this,e)});function i(e){var t,n,r,c,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),a=function(e,r){n._bigImage.setAttribute("src",r),n._bigImage.setAttribute("alt","Увеличенное фото из галереи: "+e),n._bigImageCaption.textContent=e,m((t=b(n),k(i.prototype)),"open",t).call(t)},(c="open")in(r=b(n=o.call(this,e)))?Object.defineProperty(r,c,{value:a,enumerable:!0,configurable:!0,writable:!0}):r.open=a,n._bigImage=n._popup.querySelector(".popup__image"),n._bigImageCaption=n._popup.querySelector(".popup__image-caption"),n}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(_);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=j(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},E.apply(this,arguments)}function j(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}function P(e,t){return P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},P(e,t)}function S(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(r);if(o){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,e))._form=n._popup.querySelector(".popup__inputs"),n._inputArray=n._popup.querySelectorAll(".popup__input"),n._getCardsFromApi=t,n}return t=c,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputArray.forEach((function(t){e[t.name]=t.value})),console.log(e),e}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._getCardsFromApi(e._getInputValues())})),E(C(c.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){E(C(c.prototype),"close",this).call(this),this._form.reset()}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(_);function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t){var n=t.userName,r=t.description;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._description=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{userName:this._name.textContent,descript:this._description.textContent}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._description.textContent=e.description}}])&&T(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url="https://mesto.nomoreparties.co/v1/cohort-43/",this._token=t,this._headers={"Content-type":"application/json",authorization:"9ccf29bd-3d67-4cc8-8c99-82c18d019a44"}}var t,n;return t=e,(n=[{key:"getData",value:function(e){return fetch(this._url+e,{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Bug detected!")}))}},{key:"delLike",value:function(e){return fetch(this._url+e,{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?(console.log("resULT"+e),e):Promise.reject("Bug detected!")}))}},{key:"addLike",value:function(e){return fetch(this._url+e,{headers:this._headers,method:"PUT"}).then((function(e){return e.ok?(console.log("resULT"+e),e):Promise.reject("Bug detected!")}))}},{key:"setCard",value:function(e,t){return fetch(this._url+e,{headers:this._headers,method:"POST",body:JSON.stringify(t)}).then((function(e){return e.ok?e.json():Promise.reject("Bug detected!")}))}},{key:"delCard",value:function(e,t){return fetch(this._url+e+t,{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Bug detected!")}))}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=N(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},x.apply(this,arguments)}function N(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}function V(e,t){return V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},V(e,t)}function U(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=F(r);if(o){var n=F(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return U(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,e))._pressOk=t,n}return t=c,(n=[{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__ok").addEventListener("click",(function(){e._pressOk(),e.close()})),x(F(c.prototype),"setEventListeners",this).call(this)}}])&&D(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(_),M=n.elements.name,z=n.elements.description,H=t.querySelector(".profile__edit-button"),J=t.querySelector(".profile__add-button"),K=function(e,t){Z.open(e,t)},Q=function(e){return X.delLike("cards/".concat(e,"/likes")).then((function(e){return console.log("likes="+e.length),console.log("clikeArray="+e),e})).catch((function(e){console.log(e)}))},W=function(e){return X.addLike("cards/".concat(e,"/likes")).then((function(e){return console.log("likes="+e.length),console.log("clikeArray="+e),e})).catch((function(e){console.log(e)}))},X=new q("9ccf29bd-3d67-4cc8-8c99-82c18d019a44");X.getData("users/me").then((function(e){window.myId=e._id,X.getData("cards").then((function(e){window.addGalary=new u({items:e,renderer:function(e){var t=Y(e,myId);addGalary.appends(t)}},".photos"),addGalary.renderItems()}))})).catch((function(e){console.log(e)}));var Y=function(e,t){return new c(e,".template-card",K,$,Q,W,t).makeCard()},Z=new w(".popup_big-image");Z.setEventListeners();var $=function(e){var t=new G(".popup_question",(function(t){X.delCard("cards/",e).then((function(e){return e})).catch((function(e){console.log(e)}))}));t.open(),t.setEventListeners()},ee=new I(".popup_adder",(function(e){X.setCard("cards",e).then((function(e){var t=Y(e,e.owner._id);addGalary.prepends(t),ee.close()})).catch((function(e){console.log(e)}))}));ee.setEventListeners();var te=new R({userName:".profile__name",description:".profile__description"}),ne=new I(".popup_editor",(function(e){te.setUserInfo(e),ne.close()}));ne.setEventListeners();var re=new p(e,n);re.enableValidation();var oe=new p(e,r);oe.enableValidation(),J.addEventListener("click",(function(){ee.open(),oe.resetValidation()})),H.addEventListener("click",(function(){ne.open();var e=te.getUserInfo();M.value=e.userName,z.value=e.descript,re.resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi43NWUyZmFlNTgwZmM3OWY5ZDYyYi5qcyIsIm1hcHBpbmdzIjoieUJBQUEsSUFTTUEsRUFBaUIsQ0FDckJDLFdBQVksaUJBQ1pDLFVBQVcsZ0JBQ1hDLGdCQUFpQixlQUNqQkMsbUJBQW9CLHNCQUNwQkMsV0FBWSwwQkFDWkMsWUFBYSw2QkFHVEMsRUFBT0MsU0FBU0MsY0FBYyxZQUM5QkMsRUFBY0YsU0FBU0csTUFBTUMsUUFDN0JDLEVBQVdMLFNBQVNHLE1BQU1HLFMsOFJDcEJ6QixJQUFNQyxFQUFiLFdBQ0ksV0FBWUMsRUFBTUMsRUFBa0JDLEVBQWlCQyxFQUFrQkMsRUFBU0MsRUFBU0MsR0FBTSxZLDRGQUFBLGdDQWVoRixXQUlYLE9BSHFCZCxTQUNoQkMsY0FBYyxFQUFLYyxXQUNuQkMsUUFBUUMsV0FBVSxNQWxCb0UsdUJBc0JoRixTQUFDQyxHQUNaLEVBQUtDLGtCQUFrQixFQUFLQyxTQUM1QixFQUFLQyxjQUFnQixLQUNyQkgsRUFBSUksT0FBT0MsUUFBUSxTQUFTQyxZQXpCK0QscUJBNEJsRixXQUNMLEVBQUtDLFVBQVlYLEtBQ2pCLEVBQUtZLFlBQVlDLGlCQUFpQixRQUFTLEVBQUtDLGNBR2hELEVBQUtGLFlBQVlHLFVBQVVMLE9BQU8sZ0JBR3RDLEVBQUtNLFVBQVVILGlCQUFpQixTQUFTLFdBQ2pDLEVBQUtJLE9BQ0wsRUFBS0MsVUFBWSxHQUNqQkMsT0FBT0MsT0FBTyxFQUFLRixVQUFXLEVBQUtHLFNBQVMsRUFBS2YsVUFDakRnQixRQUFRQyxJQUFJLGNBQWdCLEVBQUtMLFdBRWpDLEVBQUtNLG9CQUdMLEVBQUtDLFNBQVMsRUFBS25CLFNBQ2RvQixNQUFLLFNBQUNDLEdBRUgsT0FEQUwsUUFBUUMsSUFBSSxTQUFXSSxFQUFNQyxRQUN0QkMsWUFFVkMsT0FBTSxTQUFDQyxHQUNKVCxRQUFRQyxJQUFJUSxNQUlwQixFQUFLUCxtQkFFVCxFQUFLUixVQUFVRCxVQUFVaUIsT0FBTyx3QkFFcEMsRUFBS0MsV0FBV3BCLGlCQUFpQixTQUFTLFdBQ3RDLEVBQUtxQixpQkFBaUIsRUFBS0MsYUFBYyxFQUFLQyxrQkE1RHlDLHNCQStEakYsV0FDTixFQUFLbEIsVUFBVVUsT0FBUyxHQUVWUyxNQURDLEVBQUtuQixVQUFVb0IsTUFBSyxTQUFBNUMsR0FBSSxPQUFJQSxFQUFLNkMsS0FBTyxFQUFLQyxXQUV4RCxFQUFLeEIsVUFBVUQsVUFBVTBCLElBQUkscUJBQzdCLEVBQUt4QixPQUFRLE1BcEVzRSwwQkF3RTdFLFdBQ2QsRUFBS3lCLFlBQVlDLFlBQWMsRUFBS3pCLFVBQVVVLFVBeEU5Q2dCLEtBQUtULGFBQWV6QyxFQUFLbUQsS0FDekJELEtBQUtSLFdBQWExQyxFQUFLb0QsS0FDdkJGLEtBQUsxQixVQUFZeEIsRUFBS2lDLE1BQ3RCaUIsS0FBS3RDLFFBQVVaLEVBQUs2QyxJQUNwQkssS0FBS2pDLFNBQVdqQixFQUFLcUQsTUFBTVIsSUFDM0JLLEtBQUszQyxVQUFZTixFQUNqQmlELEtBQUtWLGlCQUFtQnRDLEVBQ3hCZ0QsS0FBS3ZDLGtCQUFvQlIsRUFDekIrQyxLQUFLdkIsU0FBV3ZCLEVBQ2hCOEMsS0FBS25CLFNBQVcxQixFQUNoQjZDLEtBQUtKLE1BQVF4QyxFQUNiNEMsS0FBSzNCLE9BQVEsRSxRQWJyQixPLEVBQUEsRyxFQUFBLHVCQTZFSSxXQWFJLE9BWkEyQixLQUFLckMsY0FBZ0JxQyxLQUFLSSxlQUMxQkosS0FBS1gsV0FBYVcsS0FBS3JDLGNBQWNwQixjQUFjLGdCQUNuRHlELEtBQUtLLFVBQVlMLEtBQUtyQyxjQUFjcEIsY0FBYyxlQUNsRHlELEtBQUtoQyxZQUFjZ0MsS0FBS3JDLGNBQWNwQixjQUFjLGlCQUNwRHlELEtBQUs1QixVQUFZNEIsS0FBS3JDLGNBQWNwQixjQUFjLGVBQ2xEeUQsS0FBS0YsWUFBY0UsS0FBS3JDLGNBQWNwQixjQUFjLHFCQUNwRHlELEtBQUtNLGNBQ0xOLEtBQUtwQixrQkFDTG9CLEtBQUtYLFdBQVdrQixhQUFhLE1BQU9QLEtBQUtSLFlBQ3pDUSxLQUFLWCxXQUFXa0IsYUFBYSxNQUFPLG9CQUFzQlAsS0FBS1QsY0FDL0RTLEtBQUtLLFVBQVVOLFlBQWNDLEtBQUtULGFBQ2xDUyxLQUFLUSxhQUNFUixLQUFLckMsbUIsb0VBMUZwQixLLHNLQ0FPLElBQU04QyxFQUFiLFdBQ0UsYUFBaUNDLEdBQVUsSUFBN0JDLEVBQTZCLEVBQTdCQSxNQUFPQyxFQUFzQixFQUF0QkEsVSw0RkFBc0IsU0FDekNaLEtBQUthLE9BQVNGLEVBQ2RYLEtBQUtjLFVBQVlGLEVBQ2pCWixLQUFLZSxXQUFhekUsU0FBU0MsY0FBY21FLEcsUUFKN0MsTyxFQUFBLEcsRUFBQSxvQkFPRSxXQUNFVixLQUFLZSxXQUFXQyxVQUFZLEtBUmhDLHlCQVlFLFdBQWMsV0FDWmhCLEtBQUtpQixRQUNMakIsS0FBS2EsT0FBT0ssU0FBUSxTQUFDcEUsR0FBRCxPQUFVLEVBQUtnRSxVQUFVaEUsUUFkakQsc0JBa0JFLFNBQVNxRSxHQUNQbkIsS0FBS2UsV0FBV0ssUUFBUUQsS0FuQjVCLHFCQXFCRSxTQUFRQSxHQUNObkIsS0FBS2UsV0FBV00sT0FBT0YsUSxvRUF0QjNCLEssMFlDQU8sSUFBTUcsRUFBYixHQUNJLFdBQVlDLEVBQU1DLEdBQVksWSw0RkFBQSxzQ0FZVCxXQUNqQixFQUFLQyxxQkFDTCxFQUFLQyxZQUFZUixTQUFRLFNBQUNTLEdBQ3RCQSxFQUFPMUQsaUJBQWlCLFNBQVMsV0FDN0IsRUFBSzJELG9CQUFvQkQsR0FDekIsRUFBS0YsOEJBakJhLDJCQXNCWCxXQUNmLEVBQUtJLHdCQXZCcUIsMEJBMEJaLFNBQUNDLEVBQWNDLEdBQzdCLElBQU1DLEVBQWlCLEVBQUtDLE1BQU0xRixjQUFYLFdBQTZCdUYsRUFBYUksR0FBMUMsV0FDdkJKLEVBQWEzRCxVQUFVMEIsSUFBSSxFQUFLc0MsYUFDaENILEVBQWU3RCxVQUFVMEIsSUFBSSxFQUFLdUMsY0FDbENKLEVBQWVqQyxZQUFjZ0MsS0E5QkgsMEJBaUNaLFNBQUNELEdBQ2YsSUFBTUUsRUFBaUIsRUFBS0MsTUFBTTFGLGNBQVgsV0FBNkJ1RixFQUFhSSxHQUExQyxXQUN2QkosRUFBYTNELFVBQVVMLE9BQU8sRUFBS3FFLGFBQ25DSCxFQUFlN0QsVUFBVUwsT0FBTyxFQUFLc0UsY0FDckNKLEVBQWVqQyxZQUFjLE1BckNILDhCQXdDUixTQUFDK0IsR0FDZEEsRUFBYU8sU0FBU0MsTUFHdEIsRUFBS0MsZ0JBQWdCVCxHQUZ0QixFQUFLVSxnQkFBZ0JWLEVBQWNBLEVBQWFXLHNCQTFDMUIsMkJBK0NYLFdBQ2YsT0FBTyxFQUFLZixZQUFZZ0IsTUFBSyxTQUFDQyxHQUMxQixPQUFRQSxFQUFhTixTQUFTQyxZQWpEUiw2QkFxRFQsV0FDYixFQUFLTSxvQkFDTCxFQUFLQyxZQUFZMUUsVUFBVTBCLElBQUksRUFBS2lELHFCQUNwQyxFQUFLRCxZQUFZdEMsYUFBYSxXQUFZLGNBRzFDLEVBQUtzQyxZQUFZMUUsVUFBVUwsT0FBTyxFQUFLZ0YscUJBQ3ZDLEVBQUtELFlBQVlFLGdCQUFnQixnQkE1RFgsMEJBZ0VaLFdBQ2QsRUFBS3RCLHFCQUNMLEVBQUtDLFlBQVlSLFNBQVEsU0FBQzhCLEdBQ3RCLEVBQUtULGdCQUFnQlMsU0FsRXpCaEQsS0FBS2lELFlBQWMxQixFQUFLeEYsV0FDeEJpRSxLQUFLa0QsV0FBYTNCLEVBQUt2RixVQUN2QmdFLEtBQUttRCxpQkFBbUI1QixFQUFLdEYsZ0JBQzdCK0QsS0FBSzhDLG9CQUFzQnZCLEVBQUtyRixtQkFDaEM4RCxLQUFLbUMsWUFBY1osRUFBS3BGLFdBQ3hCNkQsS0FBS29DLGFBQWViLEVBQUtuRixZQUN6QjRELEtBQUtpQyxNQUFRVCxFQUNieEIsS0FBSzBCLFlBQWMwQixNQUFNQyxLQUFLckQsS0FBS2lDLE1BQU1xQixpQkFBaUJ0RCxLQUFLa0QsYUFDL0RsRCxLQUFLNkMsWUFBYzdDLEtBQUtpQyxNQUFNMUYsY0FBY3lELEtBQUttRCxxQixzS0NWbEQsSUFBTUksRUFBYixXQUNJLFdBQVk3QyxHQUFVLEksSUFBQSxRLDRGQUFBLFMsRUFhSixXQUNkcEUsU0FBUzJCLGlCQUFpQixVQUFXLEVBQUt1RixnQkFBa0IsU0FBQ2hHLEdBQ3pDLFdBQVpBLEVBQUlpRyxLQUNKLEVBQUtDLFksRUFoQkssMEIsc0JBQUEsSyx1REFBQSxLLEtBQ2xCMUQsS0FBSzJELE9BQVNySCxTQUFTQyxjQUFjbUUsRyxRQUY3QyxPLEVBQUEsRyxFQUFBLG1CQUlJLFdBQ0lWLEtBQUsyRCxPQUFPeEYsVUFBVTBCLElBQUksZ0JBQzFCRyxLQUFLNEQsb0JBTmIsbUJBU0ksV0FDSTVELEtBQUsyRCxPQUFPeEYsVUFBVUwsT0FBTyxnQkFDN0J4QixTQUFTdUgsb0JBQW9CLFVBQVc3RCxLQUFLd0QsbUJBWHJELCtCQXNCSSxXQUFvQixXQUNoQnhELEtBQUsyRCxPQUFPMUYsaUJBQWlCLFFBQVMrQixLQUFLOEQsZUFBaUIsU0FBQ3RHLElBQ3JEQSxFQUFJSSxTQUFXSixFQUFJdUcsZUFBaUJ2RyxFQUFJSSxPQUFPTyxVQUFVNkYsU0FBUyxrQkFDbEUsRUFBS04sZSxvRUF6QnJCLEssd2pDQ0VPLElBQU1PLEVBQWIsYSxxUkFBQSxVLE1BQUEsRyxFQUFBLEUsK1lBQ0ksV0FBWXZELEdBQVUsUSxNQUFBLE8sNEZBQUEsUyxFQU1mLFNBQUNULEVBQU1DLEdBQ1YsRUFBS2dFLFVBQVUzRCxhQUFhLE1BQU9MLEdBQ25DLEVBQUtnRSxVQUFVM0QsYUFBYSxNQUFPLGdDQUFrQ04sR0FDckUsRUFBS2tFLGlCQUFpQnBFLFlBQWNFLEVBQ3BDLDhDLEVBVmtCLFUsRUFBQSxFQUNsQixjQUFNUyxLLHdGQUNOLEVBQUt3RCxVQUFZLEVBQUtQLE9BQU9wSCxjQUFjLGlCQUMzQyxFQUFLNEgsaUJBQWlCLEVBQUtSLE9BQU9wSCxjQUFjLHlCQUg5QixFQUQxQixPLEVBQUEsRSxxREFBQSxDQUFvQ2dILEcsMnRDQ0E3QixJQUFNYSxFQUFiLGEscVJBQUEsVSxRQUFBLEcsRUFBQSxFLCtZQUNJLFdBQVkxRCxFQUFVMkQsR0FBZ0IsYSw0RkFBQSxVQUNsQyxjQUFNM0QsSUFDRHVCLE1BQVEsRUFBSzBCLE9BQU9wSCxjQUFjLGtCQUN2QyxFQUFLbUYsWUFBYyxFQUFLaUMsT0FBT0wsaUJBQWlCLGlCQUNoRCxFQUFLZ0IsaUJBQW1CRCxFQUpVLEVBRDFDLE8sRUFBQSxHLEVBQUEsOEJBUUksV0FDSSxJQUFNRSxFQUFZLEdBS2xCLE9BSkF2RSxLQUFLMEIsWUFBWVIsU0FBUSxTQUFDOEIsR0FDdEJ1QixFQUFVdkIsRUFBTS9DLE1BQVErQyxFQUFNd0IsU0FFbEM5RixRQUFRQyxJQUFJNEYsR0FDTEEsSUFkZiwrQkFpQkksV0FBb0IsV0FDaEJ2RSxLQUFLaUMsTUFBTWhFLGlCQUFpQixVQUFVLFNBQUNULEdBQ25DQSxFQUFJaUgsaUJBQ0osRUFBS0gsaUJBQWlCLEVBQUtJLHNCQUUvQix3REF0QlIsbUJBeUJJLFdBQ0ksMENBQ0ExRSxLQUFLaUMsTUFBTTBDLGEsb0VBM0JuQixHQUFtQ3BCLEcsc0tDRjVCLElBQU1xQixFQUFiLFdBQ0ksY0FBdUMsSUFBekJDLEVBQXlCLEVBQXpCQSxTQUFVQyxFQUFlLEVBQWZBLGEsNEZBQWUsU0FDbkM5RSxLQUFLK0UsTUFBUXpJLFNBQVNDLGNBQWNzSSxHQUNwQzdFLEtBQUtnRixhQUFlMUksU0FBU0MsY0FBY3VJLEcsUUFIbkQsTyxFQUFBLEcsRUFBQSwwQkFLSSxXQUtJLE1BSmdCLENBQ1pELFNBQVU3RSxLQUFLK0UsTUFBTWhGLFlBQ3JCa0YsU0FBVWpGLEtBQUtnRixhQUFhakYsZUFSeEMseUJBYUksU0FBWW1GLEdBQ1JsRixLQUFLK0UsTUFBTWhGLFlBQWNtRixFQUFVakYsS0FDbkNELEtBQUtnRixhQUFhakYsWUFBY21GLEVBQVVKLGlCLG9FQWZsRCxLLHNLQ0FPLElBQU1LLEVBQWIsV0FDSSxXQUFZQyxJLDRGQUFPLFNBQ2ZwRixLQUFLcUYsS0FBTywrQ0FDWnJGLEtBQUtzRixPQUFTRixFQUVkcEYsS0FBS3VGLFNBQVcsQ0FDWixlQUFnQixtQkFDaEIsY0FBaUIsd0MsUUFQN0IsTyxFQUFBLEcsRUFBQSxzQkFXSSxTQUFRQyxHQUNKLE9BQU9DLE1BQU16RixLQUFLcUYsS0FBS0csRUFBUSxDQUFFRSxRQUFTMUYsS0FBS3VGLFdBQzFDekcsTUFBSyxTQUFDNkcsR0FDSCxPQUFJQSxFQUFJQyxHQUNHRCxFQUFJRSxPQUVSQyxRQUFRQyxPQUFPLHNCQWpCdEMscUJBc0JJLFNBQVFQLEdBQ0osT0FBT0MsTUFBTXpGLEtBQUtxRixLQUFLRyxFQUFRLENBQzNCRSxRQUFTMUYsS0FBS3VGLFNBQ2RTLE9BQVEsV0FFWGxILE1BQUssU0FBQzZHLEdBQ0gsT0FBSUEsRUFBSUMsSUFDSmxILFFBQVFDLElBQUksU0FBVWdILEdBQ2ZBLEdBRUpHLFFBQVFDLE9BQU8sc0JBaENsQyxxQkFvQ0ksU0FBUVAsR0FDSixPQUFPQyxNQUFNekYsS0FBS3FGLEtBQUtHLEVBQVEsQ0FDM0JFLFFBQVMxRixLQUFLdUYsU0FDZFMsT0FBUSxRQUVYbEgsTUFBSyxTQUFDNkcsR0FDSCxPQUFJQSxFQUFJQyxJQUNKbEgsUUFBUUMsSUFBSSxTQUFVZ0gsR0FDZkEsR0FFSkcsUUFBUUMsT0FBTyxzQkE5Q2xDLHFCQWtESSxTQUFRUCxFQUFPUyxHQUNYLE9BQU9SLE1BQU16RixLQUFLcUYsS0FBS0csRUFBUSxDQUMzQkUsUUFBUzFGLEtBQUt1RixTQUNkUyxPQUFRLE9BQ1JFLEtBQU1DLEtBQUtDLFVBQVVILEtBRXhCbkgsTUFBSyxTQUFDNkcsR0FDSCxPQUFJQSxFQUFJQyxHQUNHRCxFQUFJRSxPQUVSQyxRQUFRQyxPQUFPLHNCQTVEbEMscUJBZ0VJLFNBQVFQLEVBQU9hLEdBQ1gsT0FBT1osTUFBTXpGLEtBQUtxRixLQUFLRyxFQUFPYSxFQUFRLENBQ2xDWCxRQUFTMUYsS0FBS3VGLFNBQ2RTLE9BQVEsV0FFWGxILE1BQUssU0FBQzZHLEdBQ0gsT0FBSUEsRUFBSUMsR0FDR0QsRUFBSUUsT0FFUkMsUUFBUUMsT0FBTyx5QixvRUF6RWxDLEssMnRDQ0VPLElBQU1PLEVBQWIsYSxxUkFBQSxVLFFBQUEsRyxFQUFBLEUsK1lBQ0ksV0FBWTVGLEVBQVU2RixHQUFTLGEsNEZBQUEsVUFDM0IsY0FBTTdGLElBQ0Q4RixTQUFXRCxFQUZXLEVBRG5DLE8sRUFBQSxHLEVBQUEsZ0NBTUksV0FBb0IsV0FDTXZHLEtBQUsyRCxPQUFPcEgsY0FBYyxjQUNsQzBCLGlCQUFpQixTQUFTLFdBQ3BDLEVBQUt1SSxXQUNMLEVBQUs5QyxXQUVULDJELG9FQVpSLEdBQWtDSCxHQ2M1QmtELEVBQVlqSyxFQUFZa0ssU0FBU3pHLEtBQ2pDMEcsRUFBaUJuSyxFQUFZa0ssU0FBUzVCLFlBSXRDOEIsRUFBb0J2SyxFQUFLRSxjQUFjLHlCQUN2Q3NLLEVBQWdCeEssRUFBS0UsY0FBYyx3QkFJbkNTLEVBQWtCLFNBQUM4SixFQUFVQyxHQUNqQ0MsRUFBU0MsS0FBS0gsRUFBVUMsSUFHcEI3SixFQUFVLFNBQUNtSixHQUNmLE9BQU9hLEVBQUloSyxRQUFKLGdCQUFxQm1KLEVBQXJCLFdBQ0p2SCxNQUFLLFNBQUNDLEdBR0wsT0FGQUwsUUFBUUMsSUFBSSxTQUFXSSxFQUFNQyxRQUM3Qk4sUUFBUUMsSUFBSSxjQUFnQkksR0FDckJBLEtBRVJHLE9BQU0sU0FBQ0MsR0FDTlQsUUFBUUMsSUFBSVEsT0FJWmhDLEVBQVUsU0FBQ2tKLEdBQ2YsT0FBT2EsRUFBSS9KLFFBQUosZ0JBQXFCa0osRUFBckIsV0FDSnZILE1BQUssU0FBQ0MsR0FHTCxPQUZBTCxRQUFRQyxJQUFJLFNBQVdJLEVBQU1DLFFBQzdCTixRQUFRQyxJQUFJLGNBQWdCSSxHQUNyQkEsS0FFUkcsT0FBTSxTQUFDQyxHQUNOVCxRQUFRQyxJQUFJUSxPQVdaK0gsRUFBTSxJQUFJL0IsRVY3REosd0NVOERaK0IsRUFBSUMsUUFBUSxZQUNUckksTUFBSyxTQUFDc0ksR0FDTEMsT0FBT2pLLEtBQU9nSyxFQUFVekgsSUFDeEJ1SCxFQUFJQyxRQUFRLFNBQ1RySSxNQUFLLFNBQUN3SSxHQUNMRCxPQUFPRSxVQUFZLElBQUk5RyxFQUFRLENBQzdCRSxNQUFPMkcsRUFDUDFHLFNBQVUsU0FBQzlELEdBQ1QsSUFBTTBLLEVBQWFDLEVBQVczSyxFQUFNTSxNQUNwQ21LLFVBQVVHLFFBQVFGLEtBRW5CLFdBQ0hELFVBQVVJLG9CQUlmekksT0FBTSxTQUFDQyxHQUNOVCxRQUFRQyxJQUFJUSxNQUdoQixJQUFNc0ksRUFBYSxTQUFDRyxFQUFVeEssR0FHNUIsT0FGZ0IsSUFBSVAsRUFBSytLLEVBQVUsaUJBQWtCNUssRUFBaUJDLEVBQWtCQyxFQUFTQyxFQUFTQyxHQUM1RXlLLFlBSTFCYixFQUFXLElBQUkvQyxFQUFlLG9CQUNwQytDLEVBQVNjLG9CQUVULElBQU03SyxFQUFtQixTQUFDb0osR0FDeEIsSUFBTTBCLEVBQWUsSUFBSXpCLEVBQ3ZCLG1CQUNBLFNBQUNDLEdBQ0NXLEVBQUljLFFBQVEsU0FBVTNCLEdBQ25CdkgsTUFBSyxTQUFDNkcsR0FDTCxPQUFPQSxLQUVSekcsT0FBTSxTQUFDQyxHQUNOVCxRQUFRQyxJQUFJUSxTQUlwQjRJLEVBQWFkLE9BQ2JjLEVBQWFELHFCQUdURyxHQUFnQixJQUFJN0QsRUFDeEIsZ0JBQ0EsU0FBQzhELEdBQ0NoQixFQUFJaUIsUUFBUSxRQUFTRCxHQUNsQnBKLE1BQUssU0FBQ3NKLEdBQ0wsSUFBTVosRUFBYUMsRUFBV1csRUFBTUEsRUFBS2pJLE1BQU1SLEtBQy9DNEgsVUFBVWMsU0FBU2IsR0FDbkJTLEdBQWN2RSxXQUVmeEUsT0FBTSxTQUFDQyxHQUNOVCxRQUFRQyxJQUFJUSxTQUlwQjhJLEdBQWNILG9CQUVkLElBQU1RLEdBQVcsSUFBSTFELEVBaEhHLENBQ3RCQyxTQUFVLGlCQUNWQyxZQUFhLDBCQWdIVHlELEdBQWUsSUFBSW5FLEVBQ3ZCLGlCQUNBLFNBQUNjLEdBQ0NvRCxHQUFTRSxZQUFZdEQsR0FDckJxRCxHQUFhN0UsV0FHakI2RSxHQUFhVCxvQkFHYixJQUFNVyxHQUFzQixJQUFJbkgsRUFBY3hGLEVBQWdCVSxHQUM5RGlNLEdBQW9CQyxtQkFFcEIsSUFBTUMsR0FBbUIsSUFBSXJILEVBQWN4RixFQUFnQmEsR0FDM0RnTSxHQUFpQkQsbUJBS2pCN0IsRUFBYzVJLGlCQUFpQixTQUFTLFdBQ3RDZ0ssR0FBY2hCLE9BQ2QwQixHQUFpQkMscUJBR25CaEMsRUFBa0IzSSxpQkFBaUIsU0FBUyxXQUMxQ3NLLEdBQWF0QixPQUNiLElBQU00QixFQUFhUCxHQUFTUSxjQUM1QnJDLEVBQVVqQyxNQUFRcUUsRUFBV2hFLFNBQzdCOEIsRUFBZW5DLE1BQVFxRSxFQUFXNUQsU0FDbEN3RCxHQUFvQkcscUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL3ZhcmlhYmxlcy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cENvbmZpcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgdG9rZW49JzljY2YyOWJkLTNkNjctNGNjOC04Yzk5LTgyYzE4ZDAxOWE0NCc7XHJcblxyXG5jb25zdCB1c2VyUHJvZmlsZSA9IFtcclxuICB7XHJcbiAgICBuYW1lOiAnLnByb2ZpbGVfX25hbWUnLFxyXG4gICAgZGVzY3JpcHQ6ICcucHJvZmlsZV9fZGVzY3JpcHRpb24nXHJcbiAgfVxyXG5dO1xyXG5cclxuY29uc3QgdmFsaWRhdGlvbkxpc3QgPSB7XHJcbiAgYWN0aXZlRm9ybTogJy5wb3B1cF9faW5wdXRzJyxcclxuICBmb3JtSW5wdXQ6ICcucG9wdXBfX2lucHV0JyxcclxuICBwb3B1cFNhdmVCdXR0b246ICcucG9wdXBfX3NhdmUnLFxyXG4gIHBvcHVwRGlzYWJsZUJ1dHRvbjogJ3BvcHVwX19zYXZlX2Rpc2FibGUnLFxyXG4gIGlucHV0RXJyb3I6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgYWN0aXZlRXJyb3I6ICdwb3B1cF9faW5wdXRfZXJyb3JfYWN0aXZlJ1xyXG59O1xyXG5cclxuY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5Jyk7XHJcbmNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQuZm9ybXMucHJvZmlsZTtcclxuY29uc3QgY2FyZEZvcm0gPSBkb2N1bWVudC5mb3Jtcy5hZGRJbWFnZTtcclxuXHJcbmV4cG9ydCB7dG9rZW4sIG1haW4sIHByb2ZpbGVGb3JtLCBjYXJkRm9ybSwgdmFsaWRhdGlvbkxpc3R9OyIsImV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKGl0ZW0sIHNlbGVjdG9yVGVtcGxhdGUsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlQ2FyZERlbGV0ZSwgZGVsTGlrZSwgYWRkTGlrZSwgbXlJZCkge1xyXG4gICAgICAgIHRoaXMuX25ld0NhcmROYW1lID0gaXRlbS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlTGluayA9IGl0ZW0ubGluaztcclxuICAgICAgICB0aGlzLl9nZXRMaWtlcyA9IGl0ZW0ubGlrZXM7XHJcbiAgICAgICAgdGhpcy5fY2FyZElkID0gaXRlbS5faWQ7XHJcbiAgICAgICAgdGhpcy5fb3duZXJJZCA9IGl0ZW0ub3duZXIuX2lkO1xyXG4gICAgICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3JUZW1wbGF0ZTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSA9IGhhbmRsZUNhcmREZWxldGU7XHJcbiAgICAgICAgdGhpcy5fZGVsTGlrZSA9IGRlbExpa2U7XHJcbiAgICAgICAgdGhpcy5fYWRkTGlrZSA9IGFkZExpa2U7XHJcbiAgICAgICAgdGhpcy5fbXlJZCA9IG15SWQ7XHJcbiAgICAgICAgdGhpcy5fbGlrZSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRUZW1wbGF0ZSA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudFxyXG4gICAgICAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcilcclxuICAgICAgICAgICAgLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgIHJldHVybiBjYXJkVGVtcGxhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgX2RlbGV0ZUltYWdlID0gKGV2dCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmREZWxldGUodGhpcy5fY2FyZElkKTtcclxuICAgICAgICB0aGlzLl9jYXJkVGVtcGxhdGUgPSBudWxsO1xyXG4gICAgICAgIGV2dC50YXJnZXQuY2xvc2VzdCgnLmNhcmQnKS5yZW1vdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBfYWRkRXZlbnRzID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLl9vd25lcklkID09IG15SWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fY2FyZFJlbW92ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2RlbGV0ZUltYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhcmRSZW1vdmUuY2xhc3NMaXN0LnJlbW92ZSgnY2FyZF9fcmVtb3ZlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9jYXJkTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2xpa2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2dldExpa2VzID0ge307XHJcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuX2dldExpa2VzLCB0aGlzLl9kZWxMaWtlKHRoaXMuX2NhcmRJZCkpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldCBsaWtlcz0gJyArIHRoaXMuX2dldExpa2VzKTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuX2dldExpa2VzID0gbmV3TGlrZXM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hZGRMaWtlQ291bnRlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkTGlrZSh0aGlzLl9jYXJkSWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGxpa2VzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjb3VudD0nICsgbGlrZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld0xpa2VzO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdjb3VudD0nICtjb3VudCk7XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLl9nZXRMaWtlcyA9IG5ld0xpa2VzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkTGlrZUNvdW50ZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9jYXJkTGlrZS5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlX2FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25ld0NhcmROYW1lLCB0aGlzLl9pbWFnZUxpbmspO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgX2NoZWNrTGlrZXMgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2dldExpa2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgaXNMaWtlID0gdGhpcy5fZ2V0TGlrZXMuZmluZChpdGVtID0+IGl0ZW0uX2lkID09IHRoaXMuX215SWQpO1xyXG4gICAgICAgICAgICBpZiAoaXNMaWtlICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FyZExpa2UuY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZV9hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpa2UgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX2FkZExpa2VDb3VudGVyID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2xpa2VOdW1iZXIudGV4dENvbnRlbnQgPSB0aGlzLl9nZXRMaWtlcy5sZW5ndGg7XHJcbiAgICB9O1xyXG5cclxuICAgIG1ha2VDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2NhcmRUZW1wbGF0ZSA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpO1xyXG4gICAgICAgIHRoaXMuX2NhcmROYW1lID0gdGhpcy5fY2FyZFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19uYW1lJyk7XHJcbiAgICAgICAgdGhpcy5fY2FyZFJlbW92ZSA9IHRoaXMuX2NhcmRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fcmVtb3ZlJyk7XHJcbiAgICAgICAgdGhpcy5fY2FyZExpa2UgPSB0aGlzLl9jYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UnKTtcclxuICAgICAgICB0aGlzLl9saWtlTnVtYmVyID0gdGhpcy5fY2FyZFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWNvdW50Jyk7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tMaWtlcygpO1xyXG4gICAgICAgIHRoaXMuX2FkZExpa2VDb3VudGVyKCk7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgdGhpcy5faW1hZ2VMaW5rKTtcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCAn0KTQvtGC0L4g0LjQtyDQs9Cw0LvQtdGA0LXQuDogJyArIHRoaXMuX25ld0NhcmROYW1lKTtcclxuICAgICAgICB0aGlzLl9jYXJkTmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX25ld0NhcmROYW1lO1xyXG4gICAgICAgIHRoaXMuX2FkZEV2ZW50cygpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXJkVGVtcGxhdGU7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgc2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBjbGVhcigpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuICB9XHJcblxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuY2xlYXIoKTtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKVxyXG4gIH1cclxuXHJcblxyXG4gIHByZXBlbmRzKGl0ZW1IdG1sKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtSHRtbClcclxuICB9XHJcbiAgYXBwZW5kcyhpdGVtSHRtbCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChpdGVtSHRtbClcclxuICB9XHJcbn1cclxuXHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGxpc3QsIGZvcm1BY3RpdmUpIHtcclxuICAgICAgICB0aGlzLl9hY3RpdmVGb3JtID0gbGlzdC5hY3RpdmVGb3JtO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1JbnB1dCA9IGxpc3QuZm9ybUlucHV0O1xyXG4gICAgICAgIHRoaXMuX3BvcHVwU2F2ZUJ1dHRvbiA9IGxpc3QucG9wdXBTYXZlQnV0dG9uO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRGlzYWJsZUJ1dHRvbiA9IGxpc3QucG9wdXBEaXNhYmxlQnV0dG9uO1xyXG4gICAgICAgIHRoaXMuX2lucHV0RXJyb3IgPSBsaXN0LmlucHV0RXJyb3I7XHJcbiAgICAgICAgdGhpcy5fYWN0aXZlRXJyb3IgPSBsaXN0LmFjdGl2ZUVycm9yO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSBmb3JtQWN0aXZlO1xyXG4gICAgICAgIHRoaXMuX2lucHV0QXJyYXkgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9mb3JtSW5wdXQpKTtcclxuICAgICAgICB0aGlzLl9zYXZlQnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3BvcHVwU2F2ZUJ1dHRvbik7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRBcnJheS5mb3JFYWNoKChpbnB1dHMpID0+IHtcclxuICAgICAgICAgICAgaW5wdXRzLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0cyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIF9zaG93SW5wdXRFcnJvciA9ICh2YWxpZEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVycm9ySW5FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHt2YWxpZEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgdmFsaWRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvcik7XHJcbiAgICAgICAgZXJyb3JJbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9hY3RpdmVFcnJvcik7XHJcbiAgICAgICAgZXJyb3JJbkVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgX2hpZGVJbnB1dEVycm9yID0gKHZhbGlkRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVycm9ySW5FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHt2YWxpZEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgdmFsaWRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvcik7XHJcbiAgICAgICAgZXJyb3JJbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9hY3RpdmVFcnJvcik7XHJcbiAgICAgICAgZXJyb3JJbkVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKHZhbGlkRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlmICghdmFsaWRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKHZhbGlkRWxlbWVudCwgdmFsaWRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB0aGlzLl9oaWRlSW5wdXRFcnJvcih2YWxpZEVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0QXJyYXkuc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2F2ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX3BvcHVwRGlzYWJsZUJ1dHRvbik7XHJcbiAgICAgICAgICAgIHRoaXMuX3NhdmVCdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc2F2ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3BvcHVwRGlzYWJsZUJ1dHRvbik7XHJcbiAgICAgICAgICAgIHRoaXMuX3NhdmVCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXNldFZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICB0aGlzLl9pbnB1dEFycmF5LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICB9XHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX2FjdGl2ZScpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfYWN0aXZlJyk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2VzY0Nsb3NlTGlzdGVuKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UgPSAoKSA9PiB7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2VzY0Nsb3NlTGlzdGVuID0gKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fY2xvc2VMaXN0ZW5lciA9IChldnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0IHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UnKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcclxuICAgICAgICBzdXBlcihzZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fYmlnSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbiAgICAgICAgdGhpcy5fYmlnSW1hZ2VDYXB0aW9uPXRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UtY2FwdGlvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4gPSAobmFtZSwgbGluaykgPT4ge1xyXG4gICAgICAgIHRoaXMuX2JpZ0ltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgbGluayk7XHJcbiAgICAgICAgdGhpcy5fYmlnSW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCAn0KPQstC10LvQuNGH0LXQvdC90L7QtSDRhNC+0YLQviDQuNC3INCz0LDQu9C10YDQtdC4OiAnICsgbmFtZSk7XHJcbiAgICAgICAgdGhpcy5fYmlnSW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIGdldENhcmRGcm9tQXBpKSB7XHJcbiAgICAgICAgc3VwZXIoc2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0cycpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0QXJyYXkgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0Jyk7XHJcbiAgICAgICAgdGhpcy5fZ2V0Q2FyZHNGcm9tQXBpID0gZ2V0Q2FyZEZyb21BcGk7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2lucHV0QXJyYXkuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgbmV3VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2cobmV3VmFsdWVzKVxyXG4gICAgICAgIHJldHVybiBuZXdWYWx1ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9nZXRDYXJkc0Zyb21BcGkodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lLCBkZXNjcmlwdGlvbiB9KSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWUpO1xyXG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjcmlwdGlvbik7XHJcbiAgICB9XHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICBjb25zdCBnZXRJbmZvID0ge1xyXG4gICAgICAgICAgICB1c2VyTmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgZGVzY3JpcHQ6IHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gZ2V0SW5mbztcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyhuZXdJbnB1dHMpIHtcclxuICAgICAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmV3SW5wdXRzLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBuZXdJbnB1dHMuZGVzY3JpcHRpb247XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKHRva2VuKSB7XHJcbiAgICAgICAgdGhpcy5fdXJsID0gJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDMvJztcclxuICAgICAgICB0aGlzLl90b2tlbiA9IHRva2VuO1xyXG4gICAgICAgIC8vIHRoaXMuX2ZvclVybD1mb3JVcmw7XHJcbiAgICAgICAgdGhpcy5faGVhZGVycyA9IHtcclxuICAgICAgICAgICAgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgJ2F1dGhvcml6YXRpb24nOiAnOWNjZjI5YmQtM2Q2Ny00Y2M4LThjOTktODJjMThkMDE5YTQ0J1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXREYXRhKGZvclVybCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwrZm9yVXJsLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSlcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCdCdWcgZGV0ZWN0ZWQhJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBkZWxMaWtlKGZvclVybCl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCtmb3JVcmwsIHtcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzVUxUJyArcmVzKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCdCdWcgZGV0ZWN0ZWQhJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IFxyXG5cclxuICAgIGFkZExpa2UoZm9yVXJsKXtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsK2ZvclVybCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXNVTFQnICtyZXMpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ0J1ZyBkZXRlY3RlZCEnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gXHJcblxyXG4gICAgc2V0Q2FyZChmb3JVcmwsc2V0dGluZ3Mpe1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwrZm9yVXJsLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShzZXR0aW5ncyksXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgnQnVnIGRldGVjdGVkIScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbENhcmQoZm9yVXJsLGNhcmRJZCl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCtmb3JVcmwrY2FyZElkLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURSdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCdCdWcgZGV0ZWN0ZWQhJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yLCBwcmVzc09rKSB7XHJcbiAgICAgICAgc3VwZXIoc2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3ByZXNzT2sgPSBwcmVzc09rO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX29rJyk7XHJcbiAgICAgICAgY29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcHJlc3NPaygpO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgeyB0b2tlbiwgbWFpbiwgcHJvZmlsZUZvcm0sIGNhcmRGb3JtLCB2YWxpZGF0aW9uTGlzdCB9IGZyb20gXCIuL2NvbXBvbmVudHMvdmFyaWFibGVzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi9jb21wb25lbnRzL0NhcmRcIjtcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgeyBBcGkgfSBmcm9tIFwiLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgXCIuL3N0eWxlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgUG9wdXBDb25maXJtIH0gZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cENvbmZpcm1cIjtcclxuXHJcblxyXG5jb25zdCBwcm9maWxlRGVzY3JpYmUgPSB7XHJcbiAgdXNlck5hbWU6ICcucHJvZmlsZV9fbmFtZScsXHJcbiAgZGVzY3JpcHRpb246ICcucHJvZmlsZV9fZGVzY3JpcHRpb24nXHJcbn07XHJcbmNvbnN0IGlucHV0TmFtZSA9IHByb2ZpbGVGb3JtLmVsZW1lbnRzLm5hbWU7XHJcbmNvbnN0IGlucHV0bkRlc2NyaXB0ID0gcHJvZmlsZUZvcm0uZWxlbWVudHMuZGVzY3JpcHRpb247XHJcblxyXG5cclxuLy8tLS0tLWJ1dHRvbnMtLS0tLS0tXHJcbmNvbnN0IHByb2ZpbGVPcGVuQnV0dG9uID0gbWFpbi5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcclxuY29uc3QgY2FyZEFkZEJ1dHRvbiA9IG1haW4ucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcclxuXHJcblxyXG4vLz09PT09PT1mdW5jdGlvbnM9PT09PT09PT1cclxuY29uc3QgaGFuZGxlQ2FyZENsaWNrID0gKGNhcmROYW1lLCBjYXJkTGluaykgPT4ge1xyXG4gIGJpZ0ltYWdlLm9wZW4oY2FyZE5hbWUsIGNhcmRMaW5rKTtcclxufVxyXG5cclxuY29uc3QgZGVsTGlrZSA9IChjYXJkSWQpID0+IHtcclxuICByZXR1cm4gYXBpLmRlbExpa2UoYGNhcmRzLyR7Y2FyZElkfS9saWtlc2ApXHJcbiAgICAudGhlbigobGlrZXMpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coJ2xpa2VzPScgKyBsaWtlcy5sZW5ndGgpO1xyXG4gICAgICBjb25zb2xlLmxvZygnY2xpa2VBcnJheT0nICsgbGlrZXMpO1xyXG4gICAgICByZXR1cm4gbGlrZXM7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5jb25zdCBhZGRMaWtlID0gKGNhcmRJZCkgPT4ge1xyXG4gIHJldHVybiBhcGkuYWRkTGlrZShgY2FyZHMvJHtjYXJkSWR9L2xpa2VzYClcclxuICAgIC50aGVuKChsaWtlcykgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygnbGlrZXM9JyArIGxpa2VzLmxlbmd0aCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdjbGlrZUFycmF5PScgKyBsaWtlcyk7XHJcbiAgICAgIHJldHVybiBsaWtlcztcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbi8vPT09PT09PWNsYXNzZXMgYW5kIGNhbGxiYWNrcz09PT09PT09PVxyXG5cclxuLy8vLy8vLy8vLS1nZXR0aW5nIHVzZXIgaW5mbyAmIGNhcmRzIGZyb20gc2VydmVyLS0vLy8vLy8vL1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh0b2tlbik7XHJcbmFwaS5nZXREYXRhKCd1c2Vycy9tZScpXHJcbiAgLnRoZW4oKHVzZXJzSW5mbykgPT4ge1xyXG4gICAgd2luZG93Lm15SWQgPSB1c2Vyc0luZm8uX2lkO1xyXG4gICAgYXBpLmdldERhdGEoJ2NhcmRzJylcclxuICAgICAgLnRoZW4oKGRiQ2FyZHMpID0+IHtcclxuICAgICAgICB3aW5kb3cuYWRkR2FsYXJ5ID0gbmV3IFNlY3Rpb24oe1xyXG4gICAgICAgICAgaXRlbXM6IGRiQ2FyZHMsXHJcbiAgICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcmV0dXJuQ2FyZCA9IGFkZE5ld0NhcmQoaXRlbSwgbXlJZCk7XHJcbiAgICAgICAgICAgIGFkZEdhbGFyeS5hcHBlbmRzKHJldHVybkNhcmQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIFwiLnBob3Rvc1wiKTtcclxuICAgICAgICBhZGRHYWxhcnkucmVuZGVySXRlbXMoKTtcclxuICAgICAgfSlcclxuICB9KVxyXG5cclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9KTtcclxuXHJcbmNvbnN0IGFkZE5ld0NhcmQgPSAoZGVzY3JpYmUsIG15SWQpID0+IHtcclxuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoZGVzY3JpYmUsICcudGVtcGxhdGUtY2FyZCcsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlQ2FyZERlbGV0ZSwgZGVsTGlrZSwgYWRkTGlrZSwgbXlJZCk7XHJcbiAgY29uc3QgbmV3UmV0dXJuQ2FyZCA9IG5ld0NhcmQubWFrZUNhcmQoKTtcclxuICByZXR1cm4gbmV3UmV0dXJuQ2FyZDtcclxufVxyXG5cclxuY29uc3QgYmlnSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF9iaWctaW1hZ2UnKTtcclxuYmlnSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGhhbmRsZUNhcmREZWxldGUgPSAoY2FyZElkKSA9PiB7XHJcbiAgY29uc3QgY29uZmlybVBvcHVwID0gbmV3IFBvcHVwQ29uZmlybShcclxuICAgICcucG9wdXBfcXVlc3Rpb24nLFxyXG4gICAgKHByZXNzT2spID0+IHtcclxuICAgICAgYXBpLmRlbENhcmQoJ2NhcmRzLycsIGNhcmRJZClcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgKTtcclxuICBjb25maXJtUG9wdXAub3BlbigpO1xyXG4gIGNvbmZpcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG59XHJcblxyXG5jb25zdCBwb3B1cENhcmRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgJy5wb3B1cF9hZGRlcicsXHJcbiAgKG5hbWVBbmRMaW5rKSA9PiB7XHJcbiAgICBhcGkuc2V0Q2FyZCgnY2FyZHMnLCBuYW1lQW5kTGluaylcclxuICAgICAgLnRoZW4oKGNhcmQpID0+IHtcclxuICAgICAgICBjb25zdCByZXR1cm5DYXJkID0gYWRkTmV3Q2FyZChjYXJkLCBjYXJkLm93bmVyLl9pZCk7XHJcbiAgICAgICAgYWRkR2FsYXJ5LnByZXBlbmRzKHJldHVybkNhcmQpO1xyXG4gICAgICAgIHBvcHVwQ2FyZEZvcm0uY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbik7XHJcbnBvcHVwQ2FyZEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVEZXNjcmliZSk7XHJcblxyXG5jb25zdCBwb3B1cFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICAnLnBvcHVwX2VkaXRvcicsXHJcbiAgKG5ld0lucHV0cykgPT4ge1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8obmV3SW5wdXRzKTtcclxuICAgIHBvcHVwUHJvZmlsZS5jbG9zZSgpO1xyXG4gIH1cclxuKTtcclxucG9wdXBQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLy0tLS0tLS0tZW5hYmxlIHZhbGlkYXRpb24tLS0tLS0tLS0tXHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdGUgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uTGlzdCwgcHJvZmlsZUZvcm0pO1xyXG5wcm9maWxlRm9ybVZhbGlkYXRlLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGNhcmRGb3JtVmFsaWRhdGUgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uTGlzdCwgY2FyZEZvcm0pO1xyXG5jYXJkRm9ybVZhbGlkYXRlLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcblxyXG4vLz09PT09PT09PT1idXR0b25zIGxpc3RlbmVycz09PT09PT09PT09XHJcblxyXG5jYXJkQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHBvcHVwQ2FyZEZvcm0ub3BlbigpO1xyXG4gIGNhcmRGb3JtVmFsaWRhdGUucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pXHJcblxyXG5wcm9maWxlT3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBwb3B1cFByb2ZpbGUub3BlbigpO1xyXG4gIGNvbnN0IG9sZFByb2ZpbGUgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIGlucHV0TmFtZS52YWx1ZSA9IG9sZFByb2ZpbGUudXNlck5hbWU7XHJcbiAgaW5wdXRuRGVzY3JpcHQudmFsdWUgPSBvbGRQcm9maWxlLmRlc2NyaXB0O1xyXG4gIHByb2ZpbGVGb3JtVmFsaWRhdGUucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pXHJcblxyXG4iXSwibmFtZXMiOlsidmFsaWRhdGlvbkxpc3QiLCJhY3RpdmVGb3JtIiwiZm9ybUlucHV0IiwicG9wdXBTYXZlQnV0dG9uIiwicG9wdXBEaXNhYmxlQnV0dG9uIiwiaW5wdXRFcnJvciIsImFjdGl2ZUVycm9yIiwibWFpbiIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInByb2ZpbGVGb3JtIiwiZm9ybXMiLCJwcm9maWxlIiwiY2FyZEZvcm0iLCJhZGRJbWFnZSIsIkNhcmQiLCJpdGVtIiwic2VsZWN0b3JUZW1wbGF0ZSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUNhcmREZWxldGUiLCJkZWxMaWtlIiwiYWRkTGlrZSIsIm15SWQiLCJfc2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZXZ0IiwiX2hhbmRsZUNhcmREZWxldGUiLCJfY2FyZElkIiwiX2NhcmRUZW1wbGF0ZSIsInRhcmdldCIsImNsb3Nlc3QiLCJyZW1vdmUiLCJfb3duZXJJZCIsIl9jYXJkUmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9kZWxldGVJbWFnZSIsImNsYXNzTGlzdCIsIl9jYXJkTGlrZSIsIl9saWtlIiwiX2dldExpa2VzIiwiT2JqZWN0IiwiYXNzaWduIiwiX2RlbExpa2UiLCJjb25zb2xlIiwibG9nIiwiX2FkZExpa2VDb3VudGVyIiwiX2FkZExpa2UiLCJ0aGVuIiwibGlrZXMiLCJsZW5ndGgiLCJuZXdMaWtlcyIsImNhdGNoIiwiZXJyIiwidG9nZ2xlIiwiX2NhcmRJbWFnZSIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfbmV3Q2FyZE5hbWUiLCJfaW1hZ2VMaW5rIiwidW5kZWZpbmVkIiwiZmluZCIsIl9pZCIsIl9teUlkIiwiYWRkIiwiX2xpa2VOdW1iZXIiLCJ0ZXh0Q29udGVudCIsInRoaXMiLCJuYW1lIiwibGluayIsIm93bmVyIiwiX2dldFRlbXBsYXRlIiwiX2NhcmROYW1lIiwiX2NoZWNrTGlrZXMiLCJzZXRBdHRyaWJ1dGUiLCJfYWRkRXZlbnRzIiwiU2VjdGlvbiIsInNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpbm5lckhUTUwiLCJjbGVhciIsImZvckVhY2giLCJpdGVtSHRtbCIsInByZXBlbmQiLCJhcHBlbmQiLCJGb3JtVmFsaWRhdG9yIiwibGlzdCIsImZvcm1BY3RpdmUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaW5wdXRBcnJheSIsImlucHV0cyIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJ2YWxpZEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckluRWxlbWVudCIsIl9mb3JtIiwiaWQiLCJfaW5wdXRFcnJvciIsIl9hY3RpdmVFcnJvciIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNvbWUiLCJpbnB1dEVsZW1lbnQiLCJfaGFzSW52YWxpZElucHV0IiwiX3NhdmVCdXR0b24iLCJfcG9wdXBEaXNhYmxlQnV0dG9uIiwicmVtb3ZlQXR0cmlidXRlIiwiaW5wdXQiLCJfYWN0aXZlRm9ybSIsIl9mb3JtSW5wdXQiLCJfcG9wdXBTYXZlQnV0dG9uIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIlBvcHVwIiwiX2VzY0Nsb3NlTGlzdGVuIiwia2V5IiwiY2xvc2UiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2Nsb3NlTGlzdGVuZXIiLCJjdXJyZW50VGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhJbWFnZSIsIl9iaWdJbWFnZSIsIl9iaWdJbWFnZUNhcHRpb24iLCJQb3B1cFdpdGhGb3JtIiwiZ2V0Q2FyZEZyb21BcGkiLCJfZ2V0Q2FyZHNGcm9tQXBpIiwibmV3VmFsdWVzIiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJ1c2VyTmFtZSIsImRlc2NyaXB0aW9uIiwiX25hbWUiLCJfZGVzY3JpcHRpb24iLCJkZXNjcmlwdCIsIm5ld0lucHV0cyIsIkFwaSIsInRva2VuIiwiX3VybCIsIl90b2tlbiIsIl9oZWFkZXJzIiwiZm9yVXJsIiwiZmV0Y2giLCJoZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsIm1ldGhvZCIsInNldHRpbmdzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJQb3B1cENvbmZpcm0iLCJwcmVzc09rIiwiX3ByZXNzT2siLCJpbnB1dE5hbWUiLCJlbGVtZW50cyIsImlucHV0bkRlc2NyaXB0IiwicHJvZmlsZU9wZW5CdXR0b24iLCJjYXJkQWRkQnV0dG9uIiwiY2FyZE5hbWUiLCJjYXJkTGluayIsImJpZ0ltYWdlIiwib3BlbiIsImFwaSIsImdldERhdGEiLCJ1c2Vyc0luZm8iLCJ3aW5kb3ciLCJkYkNhcmRzIiwiYWRkR2FsYXJ5IiwicmV0dXJuQ2FyZCIsImFkZE5ld0NhcmQiLCJhcHBlbmRzIiwicmVuZGVySXRlbXMiLCJkZXNjcmliZSIsIm1ha2VDYXJkIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjb25maXJtUG9wdXAiLCJkZWxDYXJkIiwicG9wdXBDYXJkRm9ybSIsIm5hbWVBbmRMaW5rIiwic2V0Q2FyZCIsImNhcmQiLCJwcmVwZW5kcyIsInVzZXJJbmZvIiwicG9wdXBQcm9maWxlIiwic2V0VXNlckluZm8iLCJwcm9maWxlRm9ybVZhbGlkYXRlIiwiZW5hYmxlVmFsaWRhdGlvbiIsImNhcmRGb3JtVmFsaWRhdGUiLCJyZXNldFZhbGlkYXRpb24iLCJvbGRQcm9maWxlIiwiZ2V0VXNlckluZm8iXSwic291cmNlUm9vdCI6IiJ9