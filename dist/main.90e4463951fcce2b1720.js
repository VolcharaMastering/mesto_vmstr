!function(){"use strict";var e={activeForm:".popup__inputs",formInput:".popup__input",popupSaveButton:".popup__save",popupDisableButton:"popup__save_disable",inputError:"popup__input_type_error",activeError:"popup__input_error_active"},t=document.querySelector(".gallery"),n=document.forms.profile,r=document.forms.addImage,o=document.forms.addAvatar,i=t.querySelector(".profile__avatar-image");function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(){function e(t,n,r,o,i){var a=this,u=o.handleCardDelete,s=o.delLike,l=o.addLike;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"_getTemplate",(function(){return document.querySelector(a._selector).content.cloneNode(!0)})),c(this,"_deleteImage",(function(){a._handleCardDelete(a._card)})),c(this,"_addEvents",(function(){a._card.owner._id==a._myId?a._cardRemove.addEventListener("click",a._deleteImage):(a._cardRemove.remove(),a._cardRemove=null),a._cardLike.addEventListener("click",(function(){a._like?a._delLike(a._card._id):a._addLike(a._card._id),a._cardLike.classList.toggle("card__like_active")})),a._cardImage.addEventListener("click",(function(){a._handleCardClick(a._card.name,a._card.link)}))})),c(this,"_checkLikes",(function(){a._card.likes.length>0&&a._card.likes.find((function(e){return e._id==a._myId}))?(a._cardLike.classList.add("card__like_active"),a._like=!0):a._like=!1})),c(this,"_addLikeCounter",(function(e){a._likeNumber.textContent=e})),c(this,"updateLikes",(function(e){a._card.likes=e,a._checkLikes(),a._addLikeCounter(a._card.likes.length)})),this._card=t,this._selector=n,this._handleCardClick=r,this._handleCardDelete=u,this._delLike=s,this._addLike=l,this._myId=i,this._like=!1}var t,n;return t=e,(n=[{key:"delCard",value:function(){this._cardElement.remove(),this._cardElement=null}},{key:"makeCard",value:function(){return this._cardTemplate=this._getTemplate(),this._cardElement=this._cardTemplate.querySelector(".card"),this._cardImage=this._cardTemplate.querySelector(".card__image"),this._cardName=this._cardTemplate.querySelector(".card__name"),this._cardRemove=this._cardTemplate.querySelector(".card__remove"),this._cardLike=this._cardTemplate.querySelector(".card__like"),this._likeNumber=this._cardTemplate.querySelector(".card__like-count"),this._checkLikes(),this._addLikeCounter(this._card.likes.length),this._cardImage.setAttribute("src",this._card.link),this._cardImage.setAttribute("alt","Фото из галереи: "+this._card.name),this._cardName.textContent=this._card.name,this._addEvents(),this._cardTemplate}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var e=this;this.clear(),this._items.forEach((function(t){return e._renderer(t)}))}},{key:"prepends",value:function(e){this._container.prepend(e)}},{key:"appends",value:function(e){this._container.append(e)}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=p((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"_setEventListeners",(function(){r._toggleButtonState(),r._inputArray.forEach((function(e){e.addEventListener("input",(function(){r._checkInputValidity(e),r._toggleButtonState()}))}))})),d(this,"enableValidation",(function(){r._setEventListeners()})),d(this,"_showInputError",(function(e,t){var n=r._form.querySelector(".".concat(e.id,"-error"));e.classList.add(r._inputError),n.classList.add(r._activeError),n.textContent=t})),d(this,"_hideInputError",(function(e){var t=r._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._inputError),t.classList.remove(r._activeError),t.textContent=""})),d(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),d(this,"_hasInvalidInput",(function(){return r._inputArray.some((function(e){return!e.validity.valid}))})),d(this,"_toggleButtonState",(function(){r._hasInvalidInput()?(r._saveButton.classList.add(r._popupDisableButton),r._saveButton.setAttribute("disabled","disabled")):(r._saveButton.classList.remove(r._popupDisableButton),r._saveButton.removeAttribute("disabled"))})),d(this,"resetValidation",(function(){r._toggleButtonState(),r._inputArray.forEach((function(e){r._hideInputError(e)}))})),this._activeForm=t.activeForm,this._formInput=t.formInput,this._popupSaveButton=t.popupSaveButton,this._popupDisableButton=t.popupDisableButton,this._inputError=t.inputError,this._activeError=t.activeError,this._form=n,this._inputArray=Array.from(this._form.querySelectorAll(this._formInput)),this._saveButton=this._form.querySelector(this._popupSaveButton)}));function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(){document.addEventListener("keydown",o._escCloseListen=function(e){"Escape"===e.key&&o.close()})},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_active"),this._handleEscClose()}},{key:"close",value:function(){this._popup.classList.remove("popup_active"),document.removeEventListener("keydown",this._escCloseListen)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",this._closeListener=function(t){(t.target===t.currentTarget||t.target.classList.contains("popup__close"))&&e.close()})}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function m(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=w(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},k.apply(this,arguments)}function w(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(i,e);var t,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(n);if(r){var o=E(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return m(this,e)});function i(e){var t,n,r,a,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),c=function(e,r){n._bigImage.setAttribute("src",r),n._bigImage.setAttribute("alt","Увеличенное фото из галереи: "+e),n._bigImageCaption.textContent=e,k((t=g(n),E(i.prototype)),"open",t).call(t)},(a="open")in(r=g(n=o.call(this,e)))?Object.defineProperty(r,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):r.open=c,n._bigImage=n._popup.querySelector(".popup__image"),n._bigImageCaption=n._popup.querySelector(".popup__image-caption"),n}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(y);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=S(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},P.apply(this,arguments)}function S(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}function C(e,t){return C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},C(e,t)}function I(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(r);if(o){var n=T(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return I(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._form=n._popup.querySelector(".popup__inputs"),n._inputArray=n._popup.querySelectorAll(".popup__input"),n._getDataFromApi=t,n}return t=a,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputArray.forEach((function(t){e[t.name]=t.value})),console.log("NEWValues=",e),e}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._getDataFromApi(e._getInputValues())})),P(T(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){P(T(a.prototype),"close",this).call(this),this._form.reset()}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(y);function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=function(){function e(t){var n=t.name,r=t.about;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._about.textContent=e.about}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url="https://mesto.nomoreparties.co/v1/cohort-43/",this._token=t,this._headers={"Content-type":"application/json",authorization:"9ccf29bd-3d67-4cc8-8c99-82c18d019a44"}}var t,n;return t=e,(n=[{key:"getData",value:function(e){return fetch(this._url+e,{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Bug detected! ".concat(e.status))}))}},{key:"delLike",value:function(e){return fetch(this._url+e,{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Bug detected! ".concat(e.status))}))}},{key:"addLike",value:function(e){return fetch(this._url+e,{headers:this._headers,method:"PUT"}).then((function(e){return e.ok?e.json():Promise.reject("Bug detected! ".concat(e.status))}))}},{key:"setCard",value:function(e,t){return fetch(this._url+e,{headers:this._headers,method:"POST",body:JSON.stringify(t)}).then((function(e){return e.ok?e.json():Promise.reject("Bug detected! ".concat(e.status))}))}},{key:"delCard",value:function(e,t){return fetch(this._url+e+t,{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Bug detected! ".concat(e.status))}))}},{key:"setProfile",value:function(e,t){return fetch(this._url+e,{headers:this._headers,method:"PATCH",body:JSON.stringify(t)}).then((function(e){return e.ok?e.json():Promise.reject("Bug detected! ".concat(e.status))}))}}])&&D(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(){return U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=F(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},U.apply(this,arguments)}function F(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=M(e)););return e}function G(e,t){return G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},G(e,t)}function H(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return J(e)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=M(r);if(o){var n=M(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return H(this,e)});function a(){var e;V(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Y(J(e=i.call.apply(i,[this].concat(n))),"setSubmitAction",(function(t){e._pressYess=t})),e}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__ok").addEventListener("click",(function(t){t.preventDefault(),e._pressYess()})),U(M(a.prototype),"setEventListeners",this).call(this)}}])&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(y),W=n.elements.name,K=n.elements.about,Q=t.querySelector(".profile__edit-button"),X=t.querySelector(".profile__add-button"),Z=t.querySelector(".profile__avatar"),$=function(e,t){te.open(e,t)},ee=function(e){i.setAttribute("src",e)},te=new O(".popup_big-image");te.setEventListeners();var ne=new z(".popup_question");ne.setEventListeners();var re=new A("9ccf29bd-3d67-4cc8-8c99-82c18d019a44");re.getData("users/me").then((function(e){window.myId=e._id,ee(e.avatar),ae.setUserInfo(e),re.getData("cards").then((function(e){window.addGalary=new l({items:e,renderer:function(e){var t=oe(e,myId);addGalary.appends(t)}},".photos"),addGalary.renderItems()})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}));var oe=function(e,t){var n=new u(e,".template-card",$,{handleCardDelete:function(e){ne.open(),ne.setSubmitAction((function(){re.delCard("cards/",e._id).then((function(){n.delCard(),ne.close()})).catch((function(e){console.log(e)}))}))},delLike:function(e){re.delLike("cards/".concat(e,"/likes")).then((function(e){n.updateLikes(e.likes)})).catch((function(e){console.log(e)}))},addLike:function(e){re.addLike("cards/".concat(e,"/likes")).then((function(e){n.updateLikes(e.likes)})).catch((function(e){console.log(e)}))}},t);return n.makeCard()},ie=new R(".popup_adder",(function(e){re.setCard("cards",e).then((function(e){var t=oe(e,e.owner._id);addGalary.prepends(t),ie.close()})).catch((function(e){console.log(e)}))}));ie.setEventListeners();var ae=new q({name:".profile__name",about:".profile__description"}),ce=new R(".popup_editor",(function(e){re.setProfile("users/me",e).then((function(e){ae.setUserInfo(e),ce.close()})).catch((function(e){console.log(e)}))}));ce.setEventListeners();var ue=new R(".popup_avatar",(function(e){re.setProfile("users/me/avatar",e).then((function(e){ee(e.avatar),ue.close()})).catch((function(e){console.log(e)}))}));ue.setEventListeners();var se=new h(e,n);se.enableValidation();var le=new h(e,r);le.enableValidation();var fe=new h(e,o);fe.enableValidation(),X.addEventListener("click",(function(){ie.open(),le.resetValidation()})),Z.addEventListener("click",(function(){ue.open(),fe.resetValidation()})),Q.addEventListener("click",(function(){ce.open();var e=ae.getUserInfo();W.value=e.name,K.value=e.about,se.resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi45MGU0NDYzOTUxZmNjZTJiMTcyMC5qcyIsIm1hcHBpbmdzIjoieUJBQUEsSUFTTUEsRUFBaUIsQ0FDckJDLFdBQVksaUJBQ1pDLFVBQVcsZ0JBQ1hDLGdCQUFpQixlQUNqQkMsbUJBQW9CLHNCQUNwQkMsV0FBWSwwQkFDWkMsWUFBYSw2QkFHVEMsRUFBT0MsU0FBU0MsY0FBYyxZQUM5QkMsRUFBY0YsU0FBU0csTUFBTUMsUUFDN0JDLEVBQVdMLFNBQVNHLE1BQU1HLFNBQzFCQyxFQUFZUCxTQUFTRyxNQUFNSyxVQUMzQkMsRUFBY1YsRUFBS0UsY0FBYywwQiw4UkN0QmhDLElBQU1TLEVBQWIsV0FDSSxXQUFZQyxFQUFNQyxFQUFrQkMsRUFBcEMsRUFBMkZDLEdBQU0sV0FBM0NDLEVBQTJDLEVBQTNDQSxpQkFBa0JDLEVBQXlCLEVBQXpCQSxRQUFTQyxFQUFnQixFQUFoQkEsUyw0RkFBZ0IsZ0NBV2xGLFdBSVgsT0FIcUJqQixTQUNoQkMsY0FBYyxFQUFLaUIsV0FDbkJDLFFBQVFDLFdBQVUsTUFkc0UsdUJBa0JsRixXQUNYLEVBQUtDLGtCQUFrQixFQUFLQyxVQW5CaUUscUJBMkJwRixXQUNMLEVBQUtBLE1BQU1DLE1BQU1DLEtBQU8sRUFBS0MsTUFDN0IsRUFBS0MsWUFBWUMsaUJBQWlCLFFBQVMsRUFBS0MsZUFHaEQsRUFBS0YsWUFBWUcsU0FDakIsRUFBS0gsWUFBYyxNQUd2QixFQUFLSSxVQUFVSCxpQkFBaUIsU0FBUyxXQUNqQyxFQUFLSSxNQUNMLEVBQUtDLFNBQVMsRUFBS1YsTUFBTUUsS0FHekIsRUFBS1MsU0FBUyxFQUFLWCxNQUFNRSxLQUU3QixFQUFLTSxVQUFVSSxVQUFVQyxPQUFPLHdCQUVwQyxFQUFLQyxXQUFXVCxpQkFBaUIsU0FBUyxXQUN0QyxFQUFLVSxpQkFBaUIsRUFBS2YsTUFBTWdCLEtBQU0sRUFBS2hCLE1BQU1pQixZQTlDdUMsc0JBaURuRixXQUNOLEVBQUtqQixNQUFNa0IsTUFBTUMsT0FBUyxHQUNYLEVBQUtuQixNQUFNa0IsTUFBTUUsTUFBSyxTQUFBL0IsR0FBSSxPQUFJQSxFQUFLYSxLQUFPLEVBQUtDLFVBRTFELEVBQUtLLFVBQVVJLFVBQVVTLElBQUkscUJBQzdCLEVBQUtaLE9BQVEsR0FLakIsRUFBS0EsT0FBUSxLQTNENEUsMEJBOEQvRSxTQUFDYSxHQUNmLEVBQUtDLFlBQVlDLFlBQWNGLEtBL0Q4RCxzQkFrRXJGLFNBQUNKLEdBQ1QsRUFBS2xCLE1BQU1rQixNQUFNQSxFQUNqQixFQUFLTyxjQUNMLEVBQUtDLGdCQUFnQixFQUFLMUIsTUFBTWtCLE1BQU1DLFdBcEV0Q1EsS0FBSzNCLE1BQU1YLEVBQ1hzQyxLQUFLL0IsVUFBWU4sRUFDakJxQyxLQUFLWixpQkFBbUJ4QixFQUN4Qm9DLEtBQUs1QixrQkFBb0JOLEVBQ3pCa0MsS0FBS2pCLFNBQVdoQixFQUNoQmlDLEtBQUtoQixTQUFXaEIsRUFDaEJnQyxLQUFLeEIsTUFBUVgsRUFDYm1DLEtBQUtsQixPQUFRLEUsUUFUckIsTyxFQUFBLEcsRUFBQSxzQkFzQkksV0FDSWtCLEtBQUtDLGFBQWFyQixTQUNsQm9CLEtBQUtDLGFBQWUsT0F4QjVCLHNCQXlFSSxXQWNJLE9BYkFELEtBQUtFLGNBQWdCRixLQUFLRyxlQUMxQkgsS0FBS0MsYUFBYUQsS0FBS0UsY0FBY2xELGNBQWMsU0FDbkRnRCxLQUFLYixXQUFhYSxLQUFLRSxjQUFjbEQsY0FBYyxnQkFDbkRnRCxLQUFLSSxVQUFZSixLQUFLRSxjQUFjbEQsY0FBYyxlQUNsRGdELEtBQUt2QixZQUFjdUIsS0FBS0UsY0FBY2xELGNBQWMsaUJBQ3BEZ0QsS0FBS25CLFVBQVltQixLQUFLRSxjQUFjbEQsY0FBYyxlQUNsRGdELEtBQUtKLFlBQWNJLEtBQUtFLGNBQWNsRCxjQUFjLHFCQUNwRGdELEtBQUtGLGNBQ0xFLEtBQUtELGdCQUFnQkMsS0FBSzNCLE1BQU1rQixNQUFNQyxRQUN0Q1EsS0FBS2IsV0FBV2tCLGFBQWEsTUFBT0wsS0FBSzNCLE1BQU1pQixNQUMvQ1UsS0FBS2IsV0FBV2tCLGFBQWEsTUFBTyxvQkFBc0JMLEtBQUszQixNQUFNZ0IsTUFDckVXLEtBQUtJLFVBQVVQLFlBQWNHLEtBQUszQixNQUFNZ0IsS0FDeENXLEtBQUtNLGFBQ0VOLEtBQUtFLG1CLG9FQXZGcEIsSyxzS0NBTyxJQUFNSyxFQUFiLFdBQ0UsYUFBaUNDLEdBQVUsSUFBN0JDLEVBQTZCLEVBQTdCQSxNQUFPQyxFQUFzQixFQUF0QkEsVSw0RkFBc0IsU0FDekNWLEtBQUtXLE9BQVNGLEVBQ2RULEtBQUtZLFVBQVlGLEVBQ2pCVixLQUFLYSxXQUFhOUQsU0FBU0MsY0FBY3dELEcsUUFKN0MsTyxFQUFBLEcsRUFBQSxvQkFPRSxXQUNFUixLQUFLYSxXQUFXQyxVQUFZLEtBUmhDLHlCQVlFLFdBQWMsV0FDWmQsS0FBS2UsUUFDTGYsS0FBS1csT0FBT0ssU0FBUSxTQUFDdEQsR0FBRCxPQUFVLEVBQUtrRCxVQUFVbEQsUUFkakQsc0JBa0JFLFNBQVN1RCxHQUNQakIsS0FBS2EsV0FBV0ssUUFBUUQsS0FuQjVCLHFCQXFCRSxTQUFRQSxHQUNOakIsS0FBS2EsV0FBV00sT0FBT0YsUSxvRUF0QjNCLEssMFlDQU8sSUFBTUcsRUFBYixHQUNJLFdBQVlDLEVBQU1DLEdBQVksWSw0RkFBQSxzQ0FZVCxXQUNqQixFQUFLQyxxQkFDTCxFQUFLQyxZQUFZUixTQUFRLFNBQUNTLEdBQ3RCQSxFQUFPL0MsaUJBQWlCLFNBQVMsV0FDN0IsRUFBS2dELG9CQUFvQkQsR0FDekIsRUFBS0YsOEJBakJhLDJCQXNCWCxXQUNmLEVBQUtJLHdCQXZCcUIsMEJBMEJaLFNBQUNDLEVBQWNDLEdBQzdCLElBQU1DLEVBQWlCLEVBQUtDLE1BQU0vRSxjQUFYLFdBQTZCNEUsRUFBYUksR0FBMUMsV0FDdkJKLEVBQWEzQyxVQUFVUyxJQUFJLEVBQUt1QyxhQUNoQ0gsRUFBZTdDLFVBQVVTLElBQUksRUFBS3dDLGNBQ2xDSixFQUFlakMsWUFBY2dDLEtBOUJILDBCQWlDWixTQUFDRCxHQUNmLElBQU1FLEVBQWlCLEVBQUtDLE1BQU0vRSxjQUFYLFdBQTZCNEUsRUFBYUksR0FBMUMsV0FDdkJKLEVBQWEzQyxVQUFVTCxPQUFPLEVBQUtxRCxhQUNuQ0gsRUFBZTdDLFVBQVVMLE9BQU8sRUFBS3NELGNBQ3JDSixFQUFlakMsWUFBYyxNQXJDSCw4QkF3Q1IsU0FBQytCLEdBQ2RBLEVBQWFPLFNBQVNDLE1BR3RCLEVBQUtDLGdCQUFnQlQsR0FGdEIsRUFBS1UsZ0JBQWdCVixFQUFjQSxFQUFhVyxzQkExQzFCLDJCQStDWCxXQUNmLE9BQU8sRUFBS2YsWUFBWWdCLE1BQUssU0FBQ0MsR0FDMUIsT0FBUUEsRUFBYU4sU0FBU0MsWUFqRFIsNkJBcURULFdBQ2IsRUFBS00sb0JBQ0wsRUFBS0MsWUFBWTFELFVBQVVTLElBQUksRUFBS2tELHFCQUNwQyxFQUFLRCxZQUFZdEMsYUFBYSxXQUFZLGNBRzFDLEVBQUtzQyxZQUFZMUQsVUFBVUwsT0FBTyxFQUFLZ0UscUJBQ3ZDLEVBQUtELFlBQVlFLGdCQUFnQixnQkE1RFgsMEJBZ0VaLFdBQ2QsRUFBS3RCLHFCQUNMLEVBQUtDLFlBQVlSLFNBQVEsU0FBQzhCLEdBQ3RCLEVBQUtULGdCQUFnQlMsU0FsRXpCOUMsS0FBSytDLFlBQWMxQixFQUFLN0UsV0FDeEJ3RCxLQUFLZ0QsV0FBYTNCLEVBQUs1RSxVQUN2QnVELEtBQUtpRCxpQkFBbUI1QixFQUFLM0UsZ0JBQzdCc0QsS0FBSzRDLG9CQUFzQnZCLEVBQUsxRSxtQkFDaENxRCxLQUFLaUMsWUFBY1osRUFBS3pFLFdBQ3hCb0QsS0FBS2tDLGFBQWViLEVBQUt4RSxZQUN6Qm1ELEtBQUsrQixNQUFRVCxFQUNidEIsS0FBS3dCLFlBQWMwQixNQUFNQyxLQUFLbkQsS0FBSytCLE1BQU1xQixpQkFBaUJwRCxLQUFLZ0QsYUFDL0RoRCxLQUFLMkMsWUFBYzNDLEtBQUsrQixNQUFNL0UsY0FBY2dELEtBQUtpRCxxQixzS0NWbEQsSUFBTUksRUFBYixXQUNJLFdBQVk3QyxHQUFVLEksSUFBQSxRLDRGQUFBLFMsRUFhSixXQUNkekQsU0FBUzJCLGlCQUFpQixVQUFXLEVBQUs0RSxnQkFBa0IsU0FBQ0MsR0FDekMsV0FBWkEsRUFBSUMsS0FDSixFQUFLQyxZLEVBaEJLLDBCLHNCQUFBLEssdURBQUEsSyxLQUNsQnpELEtBQUswRCxPQUFTM0csU0FBU0MsY0FBY3dELEcsUUFGN0MsTyxFQUFBLEcsRUFBQSxtQkFJSSxXQUNJUixLQUFLMEQsT0FBT3pFLFVBQVVTLElBQUksZ0JBQzFCTSxLQUFLMkQsb0JBTmIsbUJBU0ksV0FDSTNELEtBQUswRCxPQUFPekUsVUFBVUwsT0FBTyxnQkFDN0I3QixTQUFTNkcsb0JBQW9CLFVBQVc1RCxLQUFLc0QsbUJBWHJELCtCQXNCSSxXQUFvQixXQUNoQnRELEtBQUswRCxPQUFPaEYsaUJBQWlCLFFBQVNzQixLQUFLNkQsZUFBaUIsU0FBQ04sSUFDckRBLEVBQUlPLFNBQVdQLEVBQUlRLGVBQWlCUixFQUFJTyxPQUFPN0UsVUFBVStFLFNBQVMsa0JBQ2xFLEVBQUtQLGUsb0VBekJyQixLLHdqQ0NFTyxJQUFNUSxFQUFiLGEscVJBQUEsVSxNQUFBLEcsRUFBQSxFLCtZQUNJLFdBQVl6RCxHQUFVLFEsTUFBQSxPLDRGQUFBLFMsRUFNZixTQUFDbkIsRUFBTUMsR0FDVixFQUFLNEUsVUFBVTdELGFBQWEsTUFBT2YsR0FDbkMsRUFBSzRFLFVBQVU3RCxhQUFhLE1BQU8sZ0NBQWtDaEIsR0FDckUsRUFBSzhFLGlCQUFpQnRFLFlBQWNSLEVBQ3BDLDhDLEVBVmtCLFUsRUFBQSxFQUNsQixjQUFNbUIsSyx3RkFDTixFQUFLMEQsVUFBWSxFQUFLUixPQUFPMUcsY0FBYyxpQkFDM0MsRUFBS21ILGlCQUFpQixFQUFLVCxPQUFPMUcsY0FBYyx5QkFIOUIsRUFEMUIsTyxFQUFBLEUscURBQUEsQ0FBb0NxRyxHLDJ0Q0NBN0IsSUFBTWUsRUFBYixhLHFSQUFBLFUsUUFBQSxHLEVBQUEsRSwrWUFDSSxXQUFZNUQsRUFBVTZELEdBQWdCLGEsNEZBQUEsVUFDbEMsY0FBTTdELElBQ0R1QixNQUFRLEVBQUsyQixPQUFPMUcsY0FBYyxrQkFDdkMsRUFBS3dFLFlBQWMsRUFBS2tDLE9BQU9OLGlCQUFpQixpQkFDaEQsRUFBS2tCLGdCQUFrQkQsRUFKVyxFQUQxQyxPLEVBQUEsRyxFQUFBLDhCQVFJLFdBQ0ksSUFBTUUsRUFBWSxHQUtsQixPQUpBdkUsS0FBS3dCLFlBQVlSLFNBQVEsU0FBQzhCLEdBQ3RCeUIsRUFBVXpCLEVBQU16RCxNQUFReUQsRUFBTTBCLFNBRWxDQyxRQUFRQyxJQUFJLGFBQWFILEdBQ2xCQSxJQWRmLCtCQWlCSSxXQUFvQixXQUNoQnZFLEtBQUsrQixNQUFNckQsaUJBQWlCLFVBQVUsU0FBQzZFLEdBQ25DQSxFQUFJb0IsaUJBQ0osRUFBS0wsZ0JBQWdCLEVBQUtNLHNCQUU5Qix3REF0QlIsbUJBeUJJLFdBQ0ksMENBQ0E1RSxLQUFLK0IsTUFBTThDLGEsb0VBM0JuQixHQUFtQ3hCLEcsc0tDRjVCLElBQU15QixFQUFiLFdBQ0ksY0FBNkIsSUFBZnpGLEVBQWUsRUFBZkEsS0FBTTBGLEVBQVMsRUFBVEEsTyw0RkFBUyxTQUN6Qi9FLEtBQUtnRixNQUFRakksU0FBU0MsY0FBY3FDLEdBQ3BDVyxLQUFLaUYsT0FBU2xJLFNBQVNDLGNBQWMrSCxHLFFBSDdDLE8sRUFBQSxHLEVBQUEsMEJBS0ksV0FLSSxNQUpnQixDQUNaMUYsS0FBTVcsS0FBS2dGLE1BQU1uRixZQUNqQmtGLE1BQU8vRSxLQUFLaUYsT0FBT3BGLGVBUi9CLHlCQWFJLFNBQVlxRixHQUNSbEYsS0FBS2dGLE1BQU1uRixZQUFjcUYsRUFBVTdGLEtBQ25DVyxLQUFLaUYsT0FBT3BGLFlBQWNxRixFQUFVSCxXLG9FQWY1QyxLLHNLQ0FPLElBQU1JLEVBQWIsV0FDSSxXQUFZQyxJLDRGQUFPLFNBQ2ZwRixLQUFLcUYsS0FBTywrQ0FDWnJGLEtBQUtzRixPQUFTRixFQUNkcEYsS0FBS3VGLFNBQVcsQ0FDWixlQUFnQixtQkFDaEIsY0FBaUIsd0MsUUFON0IsTyxFQUFBLEcsRUFBQSxzQkFVSSxTQUFRQyxHQUNKLE9BQU9DLE1BQU16RixLQUFLcUYsS0FBS0csRUFBUSxDQUFFRSxRQUFTMUYsS0FBS3VGLFdBQzFDSSxNQUFLLFNBQUNDLEdBQ0gsT0FBSUEsRUFBSUMsR0FDR0QsRUFBSUUsT0FFUkMsUUFBUUMsT0FBUix3QkFBZ0NKLEVBQUlLLGNBaEIzRCxxQkFxQkksU0FBUVQsR0FDSixPQUFPQyxNQUFNekYsS0FBS3FGLEtBQUtHLEVBQVEsQ0FDM0JFLFFBQVMxRixLQUFLdUYsU0FDZFcsT0FBUSxXQUVYUCxNQUFLLFNBQUNDLEdBQ0gsT0FBSUEsRUFBSUMsR0FDR0QsRUFBSUUsT0FFUkMsUUFBUUMsT0FBUix3QkFBZ0NKLEVBQUlLLGNBOUJ2RCxxQkFrQ0ksU0FBUVQsR0FDSixPQUFPQyxNQUFNekYsS0FBS3FGLEtBQUtHLEVBQVEsQ0FDM0JFLFFBQVMxRixLQUFLdUYsU0FDZFcsT0FBUSxRQUVYUCxNQUFLLFNBQUNDLEdBQ0gsT0FBSUEsRUFBSUMsR0FDR0QsRUFBSUUsT0FFUkMsUUFBUUMsT0FBUix3QkFBZ0NKLEVBQUlLLGNBM0N2RCxxQkErQ0ksU0FBUVQsRUFBT1csR0FDWCxPQUFPVixNQUFNekYsS0FBS3FGLEtBQUtHLEVBQVEsQ0FDM0JFLFFBQVMxRixLQUFLdUYsU0FDZFcsT0FBUSxPQUNSRSxLQUFNQyxLQUFLQyxVQUFVSCxLQUV4QlIsTUFBSyxTQUFDQyxHQUNILE9BQUlBLEVBQUlDLEdBQ0dELEVBQUlFLE9BRVJDLFFBQVFDLE9BQVIsd0JBQWdDSixFQUFJSyxjQXpEdkQscUJBNkRJLFNBQVFULEVBQU9lLEdBQ1gsT0FBT2QsTUFBTXpGLEtBQUtxRixLQUFLRyxFQUFPZSxFQUFRLENBQ2xDYixRQUFTMUYsS0FBS3VGLFNBQ2RXLE9BQVEsV0FFWFAsTUFBSyxTQUFDQyxHQUNILE9BQUlBLEVBQUlDLEdBQ0dELEVBQUlFLE9BRVJDLFFBQVFDLE9BQVIsd0JBQWdDSixFQUFJSyxjQXRFdkQsd0JBMEVJLFNBQVdULEVBQU9nQixHQUNkLE9BQU9mLE1BQU16RixLQUFLcUYsS0FBS0csRUFBUSxDQUMzQkUsUUFBUzFGLEtBQUt1RixTQUNkVyxPQUFRLFFBQ1JFLEtBQU1DLEtBQUtDLFVBQVVFLEtBRXhCYixNQUFLLFNBQUNDLEdBQ0gsT0FBSUEsRUFBSUMsR0FDR0QsRUFBSUUsT0FFUkMsUUFBUUMsT0FBUix3QkFBZ0NKLEVBQUlLLGlCLG9FQXBGdkQsSyxvN0NDRU8sSUFBTVEsRUFBYixhLHFSQUFBLFUsUUFBQSxHLEVBQUEsRSwrWUFBQSx1S0FFc0IsU0FBQ0MsR0FDZixFQUFLQyxXQUFhRCxLQUgxQixTLEVBQUEsRyxFQUFBLGdDQUtJLFdBQW1CLFdBQ2YxRyxLQUFLMEQsT0FBTzFHLGNBQWMsY0FBYzBCLGlCQUFpQixTQUFRLFNBQUM2RSxHQUM5REEsRUFBSW9CLGlCQUNKLEVBQUtnQyxnQkFFVCwyRCxvRUFWUixHQUFrQ3RELEdDZTVCdUQsRUFBWTNKLEVBQVk0SixTQUFTeEgsS0FDakN5SCxFQUFpQjdKLEVBQVk0SixTQUFTOUIsTUFJdENnQyxFQUFvQmpLLEVBQUtFLGNBQWMseUJBQ3ZDZ0ssRUFBZ0JsSyxFQUFLRSxjQUFjLHdCQUNuQ2lLLEVBQXFCbkssRUFBS0UsY0FBYyxvQkFLeENZLEVBQWtCLFNBQUNzSixFQUFVQyxHQUNqQ0MsR0FBU0MsS0FBS0gsRUFBVUMsSUFHcEJHLEdBQVksU0FBQ0MsR0FDakIvSixFQUFZNkMsYUFBYSxNQUFPa0gsSUFNNUJILEdBQVcsSUFBSW5ELEVBQWUsb0JBQ3BDbUQsR0FBU0ksb0JBRVQsSUFBTUMsR0FBZSxJQUFJaEIsRUFBYSxtQkFDdENnQixHQUFhRCxvQkFFYixJQUFNRSxHQUFNLElBQUl2QyxFVjlDRix3Q1UrQ2R1QyxHQUFJQyxRQUFRLFlBQ1RoQyxNQUFLLFNBQUNpQyxHQUNMQyxPQUFPaEssS0FBTytKLEVBQVVySixJQUN4QitJLEdBQVVNLEVBQVVFLFFBQ3BCQyxHQUFTQyxZQUFZSixHQUNyQkYsR0FBSUMsUUFBUSxTQUNUaEMsTUFBSyxTQUFDc0MsR0FDTEosT0FBT0ssVUFBWSxJQUFJM0gsRUFBUSxDQUM3QkUsTUFBT3dILEVBQ1B2SCxTQUFVLFNBQUNoRCxHQUNULElBQU15SyxFQUFhQyxHQUFXMUssRUFBTUcsTUFDcENxSyxVQUFVRyxRQUFRRixLQUVuQixXQUNIRCxVQUFVSSxpQkFFWEMsT0FBTSxTQUFDQyxHQUNOL0QsUUFBUUMsSUFBSThELFNBR2pCRCxPQUFNLFNBQUNDLEdBQ04vRCxRQUFRQyxJQUFJOEQsTUFHaEIsSUFBTUosR0FBYSxTQUFDSyxFQUFVNUssR0FDNUIsSUFBTTZLLEVBQU8sSUFBSWpMLEVBQ2ZnTCxFQUFVLGlCQUFrQjdLLEVBQzVCLENBQ0VFLGlCQUFrQixTQUFDNkssR0FDakJsQixHQUFhSixPQUNiSSxHQUFhbUIsaUJBQWdCLFdBQzNCbEIsR0FBSW1CLFFBQVEsU0FBVUYsRUFBVXBLLEtBQzdCb0gsTUFBSyxXQUNKK0MsRUFBS0csVUFDTHBCLEdBQWFoRSxXQUVkOEUsT0FBTSxTQUFDQyxHQUNOL0QsUUFBUUMsSUFBSThELFVBSXBCekssUUFBUyxTQUFDd0ksR0FDUm1CLEdBQUkzSixRQUFKLGdCQUFxQndJLEVBQXJCLFdBQ0daLE1BQUssU0FBQ2pJLEdBQ0xnTCxFQUFLSSxZQUFZcEwsRUFBSzZCLFVBRXZCZ0osT0FBTSxTQUFDQyxHQUNOL0QsUUFBUUMsSUFBSThELE9BR2xCeEssUUFBUyxTQUFDdUksR0FDUm1CLEdBQUkxSixRQUFKLGdCQUFxQnVJLEVBQXJCLFdBQ0daLE1BQUssU0FBQ2pJLEdBQ0xnTCxFQUFLSSxZQUFZcEwsRUFBSzZCLFVBRXZCZ0osT0FBTSxTQUFDQyxHQUNOL0QsUUFBUUMsSUFBSThELFFBSXBCM0ssR0FFRixPQURzQjZLLEVBQUtLLFlBSXZCQyxHQUFnQixJQUFJNUUsRUFDeEIsZ0JBQ0EsU0FBQzZFLEdBQ0N2QixHQUFJd0IsUUFBUSxRQUFTRCxHQUNsQnRELE1BQUssU0FBQytDLEdBQ0wsSUFBTVAsRUFBYUMsR0FBV00sRUFBTUEsRUFBS3BLLE1BQU1DLEtBQy9DMkosVUFBVWlCLFNBQVNoQixHQUNuQmEsR0FBY3ZGLFdBRWY4RSxPQUFNLFNBQUNDLEdBQ04vRCxRQUFRQyxJQUFJOEQsU0FJcEJRLEdBQWN4QixvQkFFZCxJQUFNTyxHQUFXLElBQUlqRCxFQW5IRyxDQUN0QnpGLEtBQU0saUJBQ04wRixNQUFPLDBCQW1ISHFFLEdBQWUsSUFBSWhGLEVBQ3ZCLGlCQUNBLFNBQUNjLEdBQ0N3QyxHQUFJMkIsV0FBVyxXQUFZbkUsR0FDeEJTLE1BQUssU0FBQ2EsR0FDTHVCLEdBQVNDLFlBQVl4QixHQUNyQjRDLEdBQWEzRixXQUVkOEUsT0FBTSxTQUFDQyxHQUNOL0QsUUFBUUMsSUFBSThELFNBS3BCWSxHQUFhNUIsb0JBRWIsSUFBTThCLEdBQWMsSUFBSWxGLEVBQ3RCLGlCQUNBLFNBQUNtRixHQUNDN0IsR0FBSTJCLFdBQVcsa0JBQW1CRSxHQUMvQjVELE1BQUssU0FBQzZELEdBQ0xsQyxHQUFVa0MsRUFBSTFCLFFBQ2R3QixHQUFZN0YsV0FFYjhFLE9BQU0sU0FBQ0MsR0FDTi9ELFFBQVFDLElBQUk4RCxTQUlwQmMsR0FBWTlCLG9CQUdaLElBQU1pQyxHQUFzQixJQUFJckksRUFBYzdFLEVBQWdCVSxHQUM5RHdNLEdBQW9CQyxtQkFFcEIsSUFBTUMsR0FBbUIsSUFBSXZJLEVBQWM3RSxFQUFnQmEsR0FDM0R1TSxHQUFpQkQsbUJBRWpCLElBQU1FLEdBQXFCLElBQUl4SSxFQUFjN0UsRUFBZ0JlLEdBQzdEc00sR0FBbUJGLG1CQUtuQjFDLEVBQWN0SSxpQkFBaUIsU0FBUyxXQUN0Q3NLLEdBQWMzQixPQUNkc0MsR0FBaUJFLHFCQUduQjVDLEVBQW1CdkksaUJBQWlCLFNBQVMsV0FDM0M0SyxHQUFZakMsT0FDWnVDLEdBQW1CQyxxQkFHckI5QyxFQUFrQnJJLGlCQUFpQixTQUFTLFdBQzFDMEssR0FBYS9CLE9BQ2IsSUFBTXlDLEVBQWEvQixHQUFTZ0MsY0FDNUJuRCxFQUFVcEMsTUFBUXNGLEVBQVd6SyxLQUM3QnlILEVBQWV0QyxNQUFRc0YsRUFBVy9FLE1BQ2xDMEUsR0FBb0JJLHFCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy92YXJpYWJsZXMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHRva2VuID0gJzljY2YyOWJkLTNkNjctNGNjOC04Yzk5LTgyYzE4ZDAxOWE0NCc7XG5cbmNvbnN0IHVzZXJQcm9maWxlID0gW1xuICB7XG4gICAgbmFtZTogJy5wcm9maWxlX19uYW1lJyxcbiAgICBkZXNjcmlwdDogJy5wcm9maWxlX19kZXNjcmlwdGlvbidcbiAgfVxuXTtcblxuY29uc3QgdmFsaWRhdGlvbkxpc3QgPSB7XG4gIGFjdGl2ZUZvcm06ICcucG9wdXBfX2lucHV0cycsXG4gIGZvcm1JbnB1dDogJy5wb3B1cF9faW5wdXQnLFxuICBwb3B1cFNhdmVCdXR0b246ICcucG9wdXBfX3NhdmUnLFxuICBwb3B1cERpc2FibGVCdXR0b246ICdwb3B1cF9fc2F2ZV9kaXNhYmxlJyxcbiAgaW5wdXRFcnJvcjogJ3BvcHVwX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgYWN0aXZlRXJyb3I6ICdwb3B1cF9faW5wdXRfZXJyb3JfYWN0aXZlJ1xufTtcblxuY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5Jyk7XG5jb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LmZvcm1zLnByb2ZpbGU7XG5jb25zdCBjYXJkRm9ybSA9IGRvY3VtZW50LmZvcm1zLmFkZEltYWdlO1xuY29uc3QgYXZhdGFyRm9ybSA9ZG9jdW1lbnQuZm9ybXMuYWRkQXZhdGFyO1xuY29uc3QgYXZhdGFySW1hZ2UgPSBtYWluLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItaW1hZ2UnKTtcblxuZXhwb3J0IHsgdG9rZW4sIG1haW4sIHByb2ZpbGVGb3JtLCBjYXJkRm9ybSwgdmFsaWRhdGlvbkxpc3QsIGF2YXRhckltYWdlICxhdmF0YXJGb3JtfTsiLCJleHBvcnQgY2xhc3MgQ2FyZCB7XG4gICAgY29uc3RydWN0b3IoaXRlbSwgc2VsZWN0b3JUZW1wbGF0ZSwgaGFuZGxlQ2FyZENsaWNrLCB7aGFuZGxlQ2FyZERlbGV0ZSwgZGVsTGlrZSwgYWRkTGlrZX0sIG15SWQpIHtcbiAgICAgICAgdGhpcy5fY2FyZD1pdGVtO1xuICAgICAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yVGVtcGxhdGU7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSA9IGhhbmRsZUNhcmREZWxldGU7XG4gICAgICAgIHRoaXMuX2RlbExpa2UgPSBkZWxMaWtlO1xuICAgICAgICB0aGlzLl9hZGRMaWtlID0gYWRkTGlrZTtcbiAgICAgICAgdGhpcy5fbXlJZCA9IG15SWQ7XG4gICAgICAgIHRoaXMuX2xpa2UgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBfZ2V0VGVtcGxhdGUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcilcbiAgICAgICAgICAgIC5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgcmV0dXJuIGNhcmRUZW1wbGF0ZTtcbiAgICB9XG5cbiAgICBfZGVsZXRlSW1hZ2UgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmREZWxldGUodGhpcy5fY2FyZCk7XG4gICAgfVxuICAgIGRlbENhcmQoKXtcbiAgICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcblxuICAgIH1cblxuICAgIF9hZGRFdmVudHMgPSAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLl9jYXJkLm93bmVyLl9pZCA9PSB0aGlzLl9teUlkKSB7XG4gICAgICAgICAgICB0aGlzLl9jYXJkUmVtb3ZlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fZGVsZXRlSW1hZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fY2FyZFJlbW92ZS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRoaXMuX2NhcmRSZW1vdmUgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fY2FyZExpa2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5fbGlrZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2RlbExpa2UodGhpcy5fY2FyZC5faWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkTGlrZSh0aGlzLl9jYXJkLl9pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9jYXJkTGlrZS5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlX2FjdGl2ZScpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2NhcmQubmFtZSwgdGhpcy5fY2FyZC5saW5rKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9jaGVja0xpa2VzID0gKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5fY2FyZC5saWtlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBpc0xpa2UgPSB0aGlzLl9jYXJkLmxpa2VzLmZpbmQoaXRlbSA9PiBpdGVtLl9pZCA9PSB0aGlzLl9teUlkKTtcbiAgICAgICAgICAgIGlmIChpc0xpa2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYXJkTGlrZS5jbGFzc0xpc3QuYWRkKCdjYXJkX19saWtlX2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2xpa2UgPSB0cnVlO1xuICAgICAgICAgICAgfSAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX2xpa2UgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fbGlrZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9hZGRMaWtlQ291bnRlciA9IChjb3VudGVyKSA9PiB7XG4gICAgICAgIHRoaXMuX2xpa2VOdW1iZXIudGV4dENvbnRlbnQgPSBjb3VudGVyO1xuICAgIH07XG5cbiAgICB1cGRhdGVMaWtlcz0obGlrZXMpID0+e1xuICAgICAgICB0aGlzLl9jYXJkLmxpa2VzPWxpa2VzO1xuICAgICAgICB0aGlzLl9jaGVja0xpa2VzKCk7XG4gICAgICAgIHRoaXMuX2FkZExpa2VDb3VudGVyKHRoaXMuX2NhcmQubGlrZXMubGVuZ3RoKVxuICAgIH1cblxuICAgIG1ha2VDYXJkKCkge1xuICAgICAgICB0aGlzLl9jYXJkVGVtcGxhdGUgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLl9jYXJkRWxlbWVudD10aGlzLl9jYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmNhcmQnKTtcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpO1xuICAgICAgICB0aGlzLl9jYXJkTmFtZSA9IHRoaXMuX2NhcmRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbmFtZScpO1xuICAgICAgICB0aGlzLl9jYXJkUmVtb3ZlID0gdGhpcy5fY2FyZFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19yZW1vdmUnKTtcbiAgICAgICAgdGhpcy5fY2FyZExpa2UgPSB0aGlzLl9jYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UnKTtcbiAgICAgICAgdGhpcy5fbGlrZU51bWJlciA9IHRoaXMuX2NhcmRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1jb3VudCcpO1xuICAgICAgICB0aGlzLl9jaGVja0xpa2VzKCk7XG4gICAgICAgIHRoaXMuX2FkZExpa2VDb3VudGVyKHRoaXMuX2NhcmQubGlrZXMubGVuZ3RoKTtcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgdGhpcy5fY2FyZC5saW5rKTtcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgJ9Ck0L7RgtC+INC40Lcg0LPQsNC70LXRgNC10Lg6ICcgKyB0aGlzLl9jYXJkLm5hbWUpO1xuICAgICAgICB0aGlzLl9jYXJkTmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmQubmFtZTtcbiAgICAgICAgdGhpcy5fYWRkRXZlbnRzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYXJkVGVtcGxhdGU7XG4gICAgfVxufSIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgc2VsZWN0b3IpIHtcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIH1cblxuICBjbGVhcigpIHtcbiAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XG4gIH1cblxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuY2xlYXIoKTtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSlcbiAgfVxuXG5cbiAgcHJlcGVuZHMoaXRlbUh0bWwpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtSHRtbClcbiAgfVxuICBhcHBlbmRzKGl0ZW1IdG1sKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChpdGVtSHRtbClcbiAgfVxufVxuXG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3IobGlzdCwgZm9ybUFjdGl2ZSkge1xuICAgICAgICB0aGlzLl9hY3RpdmVGb3JtID0gbGlzdC5hY3RpdmVGb3JtO1xuICAgICAgICB0aGlzLl9mb3JtSW5wdXQgPSBsaXN0LmZvcm1JbnB1dDtcbiAgICAgICAgdGhpcy5fcG9wdXBTYXZlQnV0dG9uID0gbGlzdC5wb3B1cFNhdmVCdXR0b247XG4gICAgICAgIHRoaXMuX3BvcHVwRGlzYWJsZUJ1dHRvbiA9IGxpc3QucG9wdXBEaXNhYmxlQnV0dG9uO1xuICAgICAgICB0aGlzLl9pbnB1dEVycm9yID0gbGlzdC5pbnB1dEVycm9yO1xuICAgICAgICB0aGlzLl9hY3RpdmVFcnJvciA9IGxpc3QuYWN0aXZlRXJyb3I7XG4gICAgICAgIHRoaXMuX2Zvcm0gPSBmb3JtQWN0aXZlO1xuICAgICAgICB0aGlzLl9pbnB1dEFycmF5ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fZm9ybUlucHV0KSk7XG4gICAgICAgIHRoaXMuX3NhdmVCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fcG9wdXBTYXZlQnV0dG9uKTtcbiAgICB9XG5cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgIHRoaXMuX2lucHV0QXJyYXkuZm9yRWFjaCgoaW5wdXRzKSA9PiB7XG4gICAgICAgICAgICBpbnB1dHMuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0cyk7XG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIH07XG5cbiAgICBfc2hvd0lucHV0RXJyb3IgPSAodmFsaWRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3JJbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke3ZhbGlkRWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICAgICAgdmFsaWRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvcik7XG4gICAgICAgIGVycm9ySW5FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fYWN0aXZlRXJyb3IpO1xuICAgICAgICBlcnJvckluRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICB9XG5cbiAgICBfaGlkZUlucHV0RXJyb3IgPSAodmFsaWRFbGVtZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9ySW5FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHt2YWxpZEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgICAgIHZhbGlkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3IpO1xuICAgICAgICBlcnJvckluRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2FjdGl2ZUVycm9yKTtcbiAgICAgICAgZXJyb3JJbkVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgICB9XG5cbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKHZhbGlkRWxlbWVudCkgPT4ge1xuICAgICAgICBpZiAoIXZhbGlkRWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IodmFsaWRFbGVtZW50LCB2YWxpZEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgdGhpcy5faGlkZUlucHV0RXJyb3IodmFsaWRFbGVtZW50KTtcbiAgICB9XG5cbiAgICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRBcnJheS5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgICAgICAgdGhpcy5fc2F2ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX3BvcHVwRGlzYWJsZUJ1dHRvbik7XG4gICAgICAgICAgICB0aGlzLl9zYXZlQnV0dG9uLnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3NhdmVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9wb3B1cERpc2FibGVCdXR0b24pO1xuICAgICAgICAgICAgdGhpcy5fc2F2ZUJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXNldFZhbGlkYXRpb24gPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgIHRoaXMuX2lucHV0QXJyYXkuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcbiAgICAgICAgfSk7XG4gICAgfVxufSIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICB9XG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfYWN0aXZlJyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKCk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX2FjdGl2ZScpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fZXNjQ2xvc2VMaXN0ZW4pO1xuICAgIH1cblxuICAgIF9oYW5kbGVFc2NDbG9zZSA9ICgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2VzY0Nsb3NlTGlzdGVuID0gKGV2dCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbG9zZUxpc3RlbmVyID0gKGV2dCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0IHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UnKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcbiAgICAgICAgc3VwZXIoc2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9iaWdJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcbiAgICAgICAgdGhpcy5fYmlnSW1hZ2VDYXB0aW9uPXRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UtY2FwdGlvbicpO1xuICAgIH1cblxuICAgIG9wZW4gPSAobmFtZSwgbGluaykgPT4ge1xuICAgICAgICB0aGlzLl9iaWdJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGxpbmspO1xuICAgICAgICB0aGlzLl9iaWdJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsICfQo9Cy0LXQu9C40YfQtdC90L3QvtC1INGE0L7RgtC+INC40Lcg0LPQsNC70LXRgNC10Lg6ICcgKyBuYW1lKTtcbiAgICAgICAgdGhpcy5fYmlnSW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cbn1cblxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3RvciwgZ2V0RGF0YUZyb21BcGkpIHtcbiAgICAgICAgc3VwZXIoc2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dHMnKTtcbiAgICAgICAgdGhpcy5faW5wdXRBcnJheSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcbiAgICAgICAgdGhpcy5fZ2V0RGF0YUZyb21BcGkgPSBnZXREYXRhRnJvbUFwaTtcbiAgICB9XG5cbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlcyA9IHt9O1xuICAgICAgICB0aGlzLl9pbnB1dEFycmF5LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgICAgICBuZXdWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdORVdWYWx1ZXM9JyxuZXdWYWx1ZXMpXG4gICAgICAgIHJldHVybiBuZXdWYWx1ZXM7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLl9nZXREYXRhRnJvbUFwaSh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICB9XG59IiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGFib3V0IH0pIHtcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZSk7XG4gICAgICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dCk7XG4gICAgfVxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICBjb25zdCBnZXRJbmZvID0ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcbiAgICAgICAgICAgIGFib3V0OiB0aGlzLl9hYm91dC50ZXh0Q29udGVudFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZ2V0SW5mbztcbiAgICB9XG5cbiAgICBzZXRVc2VySW5mbyhuZXdJbnB1dHMpIHtcbiAgICAgICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5ld0lucHV0cy5uYW1lO1xuICAgICAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IG5ld0lucHV0cy5hYm91dDtcbiAgICB9XG59IiwiZXhwb3J0IGNsYXNzIEFwaSB7XG4gICAgY29uc3RydWN0b3IodG9rZW4pIHtcbiAgICAgICAgdGhpcy5fdXJsID0gJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDMvJztcbiAgICAgICAgdGhpcy5fdG9rZW4gPSB0b2tlbjtcbiAgICAgICAgdGhpcy5faGVhZGVycyA9IHtcbiAgICAgICAgICAgICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnYXV0aG9yaXphdGlvbic6ICc5Y2NmMjliZC0zZDY3LTRjYzgtOGM5OS04MmMxOGQwMTlhNDQnXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXREYXRhKGZvclVybCkge1xuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsK2ZvclVybCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBCdWcgZGV0ZWN0ZWQhICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgZGVsTGlrZShmb3JVcmwpe1xuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsK2ZvclVybCwge1xuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURSdcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBCdWcgZGV0ZWN0ZWQhICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgfSk7XG4gICAgfSBcblxuICAgIGFkZExpa2UoZm9yVXJsKXtcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCtmb3JVcmwsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgICBtZXRob2Q6ICdQVVQnXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgQnVnIGRldGVjdGVkISAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgIH0pO1xuICAgIH0gXG5cbiAgICBzZXRDYXJkKGZvclVybCxzZXR0aW5ncyl7XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwrZm9yVXJsLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShzZXR0aW5ncyksXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgQnVnIGRldGVjdGVkISAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGRlbENhcmQoZm9yVXJsLGNhcmRJZCl7XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwrZm9yVXJsK2NhcmRJZCwge1xuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURSdcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBCdWcgZGV0ZWN0ZWQhICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2V0UHJvZmlsZShmb3JVcmwsZGF0YSl7XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwrZm9yVXJsLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgQnVnIGRldGVjdGVkISAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XG5cbiAgICBzZXRTdWJtaXRBY3Rpb24gPSAoYWN0aW9uKSA9PiB7XG4gICAgICAgIHRoaXMuX3ByZXNzWWVzcyA9IGFjdGlvbjtcbiAgICB9XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcbiAgICAgICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19vaycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywoZXZ0KT0+e1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLl9wcmVzc1llc3MoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxufSIsImltcG9ydCB7IHRva2VuLCBtYWluLCBwcm9maWxlRm9ybSwgY2FyZEZvcm0sIHZhbGlkYXRpb25MaXN0LCBhdmF0YXJJbWFnZSwgYXZhdGFyRm9ybSB9IGZyb20gXCIuL2NvbXBvbmVudHMvdmFyaWFibGVzXCI7XG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4vY29tcG9uZW50cy9DYXJkXCI7XG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCBcIi4vc3R5bGVzL2luZGV4LmNzc1wiO1xuaW1wb3J0IHsgUG9wdXBDb25maXJtIH0gZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cENvbmZpcm1cIjtcblxuXG5cbmNvbnN0IHByb2ZpbGVEZXNjcmliZSA9IHtcbiAgbmFtZTogJy5wcm9maWxlX19uYW1lJyxcbiAgYWJvdXQ6ICcucHJvZmlsZV9fZGVzY3JpcHRpb24nXG59O1xuY29uc3QgaW5wdXROYW1lID0gcHJvZmlsZUZvcm0uZWxlbWVudHMubmFtZTtcbmNvbnN0IGlucHV0bkRlc2NyaXB0ID0gcHJvZmlsZUZvcm0uZWxlbWVudHMuYWJvdXQ7XG5cblxuLy8tLS0tLWJ1dHRvbnMtLS0tLS0tXG5jb25zdCBwcm9maWxlT3BlbkJ1dHRvbiA9IG1haW4ucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XG5jb25zdCBjYXJkQWRkQnV0dG9uID0gbWFpbi5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xuY29uc3QgYXZhdGFyQ2hhbmdlQnV0dG9uID0gbWFpbi5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyJyk7XG5cblxuXG4vLz09PT09PT1mdW5jdGlvbnM9PT09PT09PT1cbmNvbnN0IGhhbmRsZUNhcmRDbGljayA9IChjYXJkTmFtZSwgY2FyZExpbmspID0+IHtcbiAgYmlnSW1hZ2Uub3BlbihjYXJkTmFtZSwgY2FyZExpbmspO1xufVxuXG5jb25zdCBzZXRBdmF0YXIgPSAoYXZhdGFyTGluaykgPT4ge1xuICBhdmF0YXJJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGF2YXRhckxpbmspO1xufVxuXG4vLz09PT09PT1jbGFzc2VzIGFuZCBjYWxsYmFja3M9PT09PT09PT1cblxuLy8vLy8vLy8vLS1nZXR0aW5nIHVzZXIgaW5mbyAmIGNhcmRzIGZyb20gc2VydmVyLS0vLy8vLy8vL1xuY29uc3QgYmlnSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF9iaWctaW1hZ2UnKTtcbmJpZ0ltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGNvbmZpcm1Qb3B1cCA9IG5ldyBQb3B1cENvbmZpcm0oJy5wb3B1cF9xdWVzdGlvbicpO1xuY29uZmlybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkodG9rZW4pO1xuYXBpLmdldERhdGEoJ3VzZXJzL21lJylcbiAgLnRoZW4oKHVzZXJzSW5mbykgPT4ge1xuICAgIHdpbmRvdy5teUlkID0gdXNlcnNJbmZvLl9pZDtcbiAgICBzZXRBdmF0YXIodXNlcnNJbmZvLmF2YXRhcik7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlcnNJbmZvKTtcbiAgICBhcGkuZ2V0RGF0YSgnY2FyZHMnKVxuICAgICAgLnRoZW4oKGRiQ2FyZHMpID0+IHtcbiAgICAgICAgd2luZG93LmFkZEdhbGFyeSA9IG5ldyBTZWN0aW9uKHtcbiAgICAgICAgICBpdGVtczogZGJDYXJkcyxcbiAgICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJldHVybkNhcmQgPSBhZGROZXdDYXJkKGl0ZW0sIG15SWQpO1xuICAgICAgICAgICAgYWRkR2FsYXJ5LmFwcGVuZHMocmV0dXJuQ2FyZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBcIi5waG90b3NcIik7XG4gICAgICAgIGFkZEdhbGFyeS5yZW5kZXJJdGVtcygpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xuICB9KTtcblxuY29uc3QgYWRkTmV3Q2FyZCA9IChkZXNjcmliZSwgbXlJZCkgPT4ge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgZGVzY3JpYmUsICcudGVtcGxhdGUtY2FyZCcsIGhhbmRsZUNhcmRDbGljayxcbiAgICB7XG4gICAgICBoYW5kbGVDYXJkRGVsZXRlOiAoY2FyZFRvRGVsKSA9PiB7XG4gICAgICAgIGNvbmZpcm1Qb3B1cC5vcGVuKCk7XG4gICAgICAgIGNvbmZpcm1Qb3B1cC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xuICAgICAgICAgIGFwaS5kZWxDYXJkKCdjYXJkcy8nLCBjYXJkVG9EZWwuX2lkKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICBjYXJkLmRlbENhcmQoKTtcbiAgICAgICAgICAgICAgY29uZmlybVBvcHVwLmNsb3NlKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBkZWxMaWtlOiAoY2FyZElkKSA9PiB7XG4gICAgICAgIGFwaS5kZWxMaWtlKGBjYXJkcy8ke2NhcmRJZH0vbGlrZXNgKVxuICAgICAgICAgIC50aGVuKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBjYXJkLnVwZGF0ZUxpa2VzKGl0ZW0ubGlrZXMpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgYWRkTGlrZTogKGNhcmRJZCkgPT4ge1xuICAgICAgICBhcGkuYWRkTGlrZShgY2FyZHMvJHtjYXJkSWR9L2xpa2VzYClcbiAgICAgICAgICAudGhlbigoaXRlbSkgPT4ge1xuICAgICAgICAgICAgY2FyZC51cGRhdGVMaWtlcyhpdGVtLmxpa2VzKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgbXlJZCk7XG4gIGNvbnN0IG5ld1JldHVybkNhcmQgPSBjYXJkLm1ha2VDYXJkKCk7XG4gIHJldHVybiBuZXdSZXR1cm5DYXJkO1xufVxuXG5jb25zdCBwb3B1cENhcmRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gICcucG9wdXBfYWRkZXInLFxuICAobmFtZUFuZExpbmspID0+IHtcbiAgICBhcGkuc2V0Q2FyZCgnY2FyZHMnLCBuYW1lQW5kTGluaylcbiAgICAgIC50aGVuKChjYXJkKSA9PiB7XG4gICAgICAgIGNvbnN0IHJldHVybkNhcmQgPSBhZGROZXdDYXJkKGNhcmQsIGNhcmQub3duZXIuX2lkKTtcbiAgICAgICAgYWRkR2FsYXJ5LnByZXBlbmRzKHJldHVybkNhcmQpO1xuICAgICAgICBwb3B1cENhcmRGb3JtLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9XG4pO1xucG9wdXBDYXJkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhwcm9maWxlRGVzY3JpYmUpO1xuXG5jb25zdCBwb3B1cFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgJy5wb3B1cF9lZGl0b3InLFxuICAobmV3SW5wdXRzKSA9PiB7XG4gICAgYXBpLnNldFByb2ZpbGUoJ3VzZXJzL21lJywgbmV3SW5wdXRzKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XG4gICAgICAgIHBvcHVwUHJvZmlsZS5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4pO1xucG9wdXBQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gICcucG9wdXBfYXZhdGFyJyxcbiAgKGdldEF2YXRhcikgPT4ge1xuICAgIGFwaS5zZXRQcm9maWxlKCd1c2Vycy9tZS9hdmF0YXInLCBnZXRBdmF0YXIpXG4gICAgICAudGhlbigoYXZhKSA9PiB7XG4gICAgICAgIHNldEF2YXRhcihhdmEuYXZhdGFyKTtcbiAgICAgICAgcG9wdXBBdmF0YXIuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH1cbik7XG5wb3B1cEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLy0tLS0tLS0tZW5hYmxlIHZhbGlkYXRpb24tLS0tLS0tLS0tXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRlID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkxpc3QsIHByb2ZpbGVGb3JtKTtcbnByb2ZpbGVGb3JtVmFsaWRhdGUuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBjYXJkRm9ybVZhbGlkYXRlID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkxpc3QsIGNhcmRGb3JtKTtcbmNhcmRGb3JtVmFsaWRhdGUuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdGUgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uTGlzdCwgYXZhdGFyRm9ybSk7XG5hdmF0YXJGb3JtVmFsaWRhdGUuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5cbi8vPT09PT09PT09PWJ1dHRvbnMgbGlzdGVuZXJzPT09PT09PT09PT1cblxuY2FyZEFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgcG9wdXBDYXJkRm9ybS5vcGVuKCk7XG4gIGNhcmRGb3JtVmFsaWRhdGUucmVzZXRWYWxpZGF0aW9uKCk7XG59KVxuXG5hdmF0YXJDaGFuZ2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHBvcHVwQXZhdGFyLm9wZW4oKTtcbiAgYXZhdGFyRm9ybVZhbGlkYXRlLnJlc2V0VmFsaWRhdGlvbigpO1xufSlcblxucHJvZmlsZU9wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHBvcHVwUHJvZmlsZS5vcGVuKCk7XG4gIGNvbnN0IG9sZFByb2ZpbGUgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBpbnB1dE5hbWUudmFsdWUgPSBvbGRQcm9maWxlLm5hbWU7XG4gIGlucHV0bkRlc2NyaXB0LnZhbHVlID0gb2xkUHJvZmlsZS5hYm91dDtcbiAgcHJvZmlsZUZvcm1WYWxpZGF0ZS5yZXNldFZhbGlkYXRpb24oKTtcbn0pXG5cbiJdLCJuYW1lcyI6WyJ2YWxpZGF0aW9uTGlzdCIsImFjdGl2ZUZvcm0iLCJmb3JtSW5wdXQiLCJwb3B1cFNhdmVCdXR0b24iLCJwb3B1cERpc2FibGVCdXR0b24iLCJpbnB1dEVycm9yIiwiYWN0aXZlRXJyb3IiLCJtYWluIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvZmlsZUZvcm0iLCJmb3JtcyIsInByb2ZpbGUiLCJjYXJkRm9ybSIsImFkZEltYWdlIiwiYXZhdGFyRm9ybSIsImFkZEF2YXRhciIsImF2YXRhckltYWdlIiwiQ2FyZCIsIml0ZW0iLCJzZWxlY3RvclRlbXBsYXRlIiwiaGFuZGxlQ2FyZENsaWNrIiwibXlJZCIsImhhbmRsZUNhcmREZWxldGUiLCJkZWxMaWtlIiwiYWRkTGlrZSIsIl9zZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfaGFuZGxlQ2FyZERlbGV0ZSIsIl9jYXJkIiwib3duZXIiLCJfaWQiLCJfbXlJZCIsIl9jYXJkUmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9kZWxldGVJbWFnZSIsInJlbW92ZSIsIl9jYXJkTGlrZSIsIl9saWtlIiwiX2RlbExpa2UiLCJfYWRkTGlrZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9jYXJkSW1hZ2UiLCJfaGFuZGxlQ2FyZENsaWNrIiwibmFtZSIsImxpbmsiLCJsaWtlcyIsImxlbmd0aCIsImZpbmQiLCJhZGQiLCJjb3VudGVyIiwiX2xpa2VOdW1iZXIiLCJ0ZXh0Q29udGVudCIsIl9jaGVja0xpa2VzIiwiX2FkZExpa2VDb3VudGVyIiwidGhpcyIsIl9jYXJkRWxlbWVudCIsIl9jYXJkVGVtcGxhdGUiLCJfZ2V0VGVtcGxhdGUiLCJfY2FyZE5hbWUiLCJzZXRBdHRyaWJ1dGUiLCJfYWRkRXZlbnRzIiwiU2VjdGlvbiIsInNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpbm5lckhUTUwiLCJjbGVhciIsImZvckVhY2giLCJpdGVtSHRtbCIsInByZXBlbmQiLCJhcHBlbmQiLCJGb3JtVmFsaWRhdG9yIiwibGlzdCIsImZvcm1BY3RpdmUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaW5wdXRBcnJheSIsImlucHV0cyIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJ2YWxpZEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckluRWxlbWVudCIsIl9mb3JtIiwiaWQiLCJfaW5wdXRFcnJvciIsIl9hY3RpdmVFcnJvciIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNvbWUiLCJpbnB1dEVsZW1lbnQiLCJfaGFzSW52YWxpZElucHV0IiwiX3NhdmVCdXR0b24iLCJfcG9wdXBEaXNhYmxlQnV0dG9uIiwicmVtb3ZlQXR0cmlidXRlIiwiaW5wdXQiLCJfYWN0aXZlRm9ybSIsIl9mb3JtSW5wdXQiLCJfcG9wdXBTYXZlQnV0dG9uIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIlBvcHVwIiwiX2VzY0Nsb3NlTGlzdGVuIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJfcG9wdXAiLCJfaGFuZGxlRXNjQ2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2Nsb3NlTGlzdGVuZXIiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhJbWFnZSIsIl9iaWdJbWFnZSIsIl9iaWdJbWFnZUNhcHRpb24iLCJQb3B1cFdpdGhGb3JtIiwiZ2V0RGF0YUZyb21BcGkiLCJfZ2V0RGF0YUZyb21BcGkiLCJuZXdWYWx1ZXMiLCJ2YWx1ZSIsImNvbnNvbGUiLCJsb2ciLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJhYm91dCIsIl9uYW1lIiwiX2Fib3V0IiwibmV3SW5wdXRzIiwiQXBpIiwidG9rZW4iLCJfdXJsIiwiX3Rva2VuIiwiX2hlYWRlcnMiLCJmb3JVcmwiLCJmZXRjaCIsImhlYWRlcnMiLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsIm1ldGhvZCIsInNldHRpbmdzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJkYXRhIiwiUG9wdXBDb25maXJtIiwiYWN0aW9uIiwiX3ByZXNzWWVzcyIsImlucHV0TmFtZSIsImVsZW1lbnRzIiwiaW5wdXRuRGVzY3JpcHQiLCJwcm9maWxlT3BlbkJ1dHRvbiIsImNhcmRBZGRCdXR0b24iLCJhdmF0YXJDaGFuZ2VCdXR0b24iLCJjYXJkTmFtZSIsImNhcmRMaW5rIiwiYmlnSW1hZ2UiLCJvcGVuIiwic2V0QXZhdGFyIiwiYXZhdGFyTGluayIsInNldEV2ZW50TGlzdGVuZXJzIiwiY29uZmlybVBvcHVwIiwiYXBpIiwiZ2V0RGF0YSIsInVzZXJzSW5mbyIsIndpbmRvdyIsImF2YXRhciIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJkYkNhcmRzIiwiYWRkR2FsYXJ5IiwicmV0dXJuQ2FyZCIsImFkZE5ld0NhcmQiLCJhcHBlbmRzIiwicmVuZGVySXRlbXMiLCJjYXRjaCIsImVyciIsImRlc2NyaWJlIiwiY2FyZCIsImNhcmRUb0RlbCIsInNldFN1Ym1pdEFjdGlvbiIsImRlbENhcmQiLCJ1cGRhdGVMaWtlcyIsIm1ha2VDYXJkIiwicG9wdXBDYXJkRm9ybSIsIm5hbWVBbmRMaW5rIiwic2V0Q2FyZCIsInByZXBlbmRzIiwicG9wdXBQcm9maWxlIiwic2V0UHJvZmlsZSIsInBvcHVwQXZhdGFyIiwiZ2V0QXZhdGFyIiwiYXZhIiwicHJvZmlsZUZvcm1WYWxpZGF0ZSIsImVuYWJsZVZhbGlkYXRpb24iLCJjYXJkRm9ybVZhbGlkYXRlIiwiYXZhdGFyRm9ybVZhbGlkYXRlIiwicmVzZXRWYWxpZGF0aW9uIiwib2xkUHJvZmlsZSIsImdldFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==