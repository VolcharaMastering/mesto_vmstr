!function(){"use strict";var e={activeForm:".popup__inputs",formInput:".popup__input",popupSaveButton:".popup__save",popupDisableButton:"popup__save_disable",inputError:"popup__input_type_error",activeError:"popup__input_error_active"},t=document.querySelector(".gallery"),n=document.forms.profile,r=document.forms.addImage,o=document.forms.addAvatar,i=t.querySelector(".profile__avatar-image"),a=n.elements.name,c=n.elements.about,u=t.querySelector(".profile__edit-button"),s=t.querySelector(".profile__add-button"),l=t.querySelector(".profile__avatar"),f={url:"https://mesto.nomoreparties.co/v1/cohort-43/",headers:{"Content-type":"application/json",authorization:"9ccf29bd-3d67-4cc8-8c99-82c18d019a44"}};function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(){function e(t,n,r,o,i){var a=this,c=o.handleCardDelete,u=o.delLike,s=o.addLike;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"_getTemplate",(function(){return document.querySelector(a._selector).content.cloneNode(!0)})),d(this,"_deleteImage",(function(){a._handleCardDelete(a._card)})),d(this,"_addEvents",(function(){a._card.owner._id==a._myId?a._cardRemove.addEventListener("click",a._deleteImage):(a._cardRemove.remove(),a._cardRemove=null),a._cardLike.addEventListener("click",(function(){a._like?a._delLike(a._card._id):a._addLike(a._card._id)})),a._cardImage.addEventListener("click",(function(){a._handleCardClick(a._card.name,a._card.link)}))})),d(this,"_checkLikes",(function(){a._card.likes.length>0&&a._card.likes.find((function(e){return e._id==a._myId}))?(a._cardLike.classList.add("card__like_active"),a._like=!0):a._like=!1})),d(this,"_addLikeCounter",(function(e){a._likeNumber.textContent=e})),d(this,"updateLikes",(function(e){a._card.likes=e,a._checkLikes(),a._addLikeCounter(a._card.likes.length)})),this._card=t,this._selector=n,this._handleCardClick=r,this._handleCardDelete=c,this._delLike=u,this._addLike=s,this._myId=i,this._like=!1}var t,n;return t=e,(n=[{key:"delCard",value:function(){this._cardElement.remove(),this._cardElement=null}},{key:"toggleLikeIcon",value:function(){this._cardLike.classList.toggle("card__like_active")}},{key:"makeCard",value:function(){return this._cardTemplate=this._getTemplate(),this._cardElement=this._cardTemplate.querySelector(".card"),this._cardImage=this._cardTemplate.querySelector(".card__image"),this._cardName=this._cardTemplate.querySelector(".card__name"),this._cardRemove=this._cardTemplate.querySelector(".card__remove"),this._cardLike=this._cardTemplate.querySelector(".card__like"),this._likeNumber=this._cardTemplate.querySelector(".card__like-count"),this._checkLikes(),this._addLikeCounter(this._card.likes.length),this._cardImage.setAttribute("src",this._card.link),this._cardImage.setAttribute("alt","Фото из галереи: "+this._card.name),this._cardName.textContent=this._card.name,this._addEvents(),this._cardTemplate}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var e=this;this.clear(),this._items.forEach((function(t){return e._renderer(t)}))}},{key:"prepends",value:function(e){this._container.prepend(e)}},{key:"appends",value:function(e){this._container.append(e)}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=b((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"_setEventListeners",(function(){r._toggleButtonState(),r._inputArray.forEach((function(e){e.addEventListener("input",(function(){r._checkInputValidity(e),r._toggleButtonState()}))}))})),m(this,"enableValidation",(function(){r._setEventListeners()})),m(this,"_showInputError",(function(e,t){var n=r._form.querySelector(".".concat(e.id,"-error"));e.classList.add(r._inputError),n.classList.add(r._activeError),n.textContent=t})),m(this,"_hideInputError",(function(e){var t=r._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._inputError),t.classList.remove(r._activeError),t.textContent=""})),m(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),m(this,"_hasInvalidInput",(function(){return r._inputArray.some((function(e){return!e.validity.valid}))})),m(this,"_toggleButtonState",(function(){r._hasInvalidInput()?(r._saveButton.classList.add(r._popupDisableButton),r._saveButton.setAttribute("disabled","disabled")):(r._saveButton.classList.remove(r._popupDisableButton),r._saveButton.removeAttribute("disabled"))})),m(this,"resetValidation",(function(){r._toggleButtonState(),r._inputArray.forEach((function(e){r._hideInputError(e)}))})),this._activeForm=t.activeForm,this._formInput=t.formInput,this._popupSaveButton=t.popupSaveButton,this._popupDisableButton=t.popupDisableButton,this._inputError=t.inputError,this._activeError=t.activeError,this._form=n,this._inputArray=Array.from(this._form.querySelectorAll(this._formInput)),this._saveButton=this._form.querySelector(this._popupSaveButton)}));function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.close()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_active"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_active"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",this._closeListener=function(t){(t.target===t.currentTarget||t.target.classList.contains("popup__close"))&&e.close()})}}])&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function L(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=P(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},j.apply(this,arguments)}function P(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(i,e);var t,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(n);if(r){var o=C(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return L(this,e)});function i(e){var t,n,r,a,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),c=function(e,r){n._bigImage.setAttribute("src",r),n._bigImage.setAttribute("alt","Увеличенное фото из галереи: "+e),n._bigImageCaption.textContent=e,j((t=S(n),C(i.prototype)),"open",t).call(t)},(a="open")in(r=S(n=o.call(this,e)))?Object.defineProperty(r,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):r.open=c,n._bigImage=n._popup.querySelector(".popup__image"),n._bigImageCaption=n._popup.querySelector(".popup__image-caption"),n}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(w);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(){return B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=q(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},B.apply(this,arguments)}function q(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}function x(e,t){return x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},x(e,t)}function D(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(r);if(o){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return D(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._form=n._popup.querySelector(".popup__inputs"),n._inputArray=n._popup.querySelectorAll(".popup__input"),n._getDataFromApi=t,n._saveButton=n._popup.querySelector(".popup__save"),n._initialText=n._saveButton.textContent,n}return t=a,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputArray.forEach((function(t){e[t.name]=t.value})),e}},{key:"renderInitialText",value:function(){this._saveButton.textContent=this._initialText}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._saveButton.textContent="Сохранение...",e._getDataFromApi(e._getInputValues())})),B(A(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){B(A(a.prototype),"close",this).call(this),this._form.reset()}}])&&T(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(w);function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(t){var n=t.name,r=t.about;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._about.textContent=e.about}}])&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=f}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Bug detected! ".concat(e.status))}},{key:"getData",value:function(e){return fetch(this._config.url+e,{headers:this._config.headers}).then(this._checkResponse)}},{key:"delLike",value:function(e){return fetch(this._config.url+e,{headers:this._config.headers,method:"DELETE"}).then(this._checkResponse)}},{key:"addLike",value:function(e){return fetch(this._config.url+e,{headers:this._config.headers,method:"PUT"}).then(this._checkResponse)}},{key:"setCard",value:function(e,t){return fetch(this._config.url+e,{headers:this._config.headers,method:"POST",body:JSON.stringify(t)}).then(this._checkResponse)}},{key:"delCard",value:function(e,t){return fetch(this._config.url+e+t,{headers:this._config.headers,method:"DELETE"}).then(this._checkResponse)}},{key:"setProfile",value:function(e,t){return fetch(this._config.url+e,{headers:this._config.headers,method:"PATCH",body:JSON.stringify(t)}).then(this._checkResponse)}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(){return Y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=z(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},Y.apply(this,arguments)}function z(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=X(e)););return e}function K(e,t){return K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},K(e,t)}function Q(e,t){if(t&&("object"===H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return W(e)}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=X(r);if(o){var n=X(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Q(this,e)});function a(){var e;J(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Z(W(e=i.call.apply(i,[this].concat(n))),"setSubmitAction",(function(t){e._pressYess=t})),e}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__ok").addEventListener("click",(function(t){t.preventDefault(),e._pressYess()})),Y(X(a.prototype),"setEventListeners",this).call(this)}}])&&M(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(w),ee=new I(".popup_big-image");ee.setEventListeners();var te=new $(".popup_question");te.setEventListeners();var ne=new U({name:".profile__name",about:".profile__description"}),re=new G("9ccf29bd-3d67-4cc8-8c99-82c18d019a44");re.getData("users/me").then((function(e){window.myId=e._id,se(e.avatar),ne.setUserInfo(e),re.getData("cards").then((function(e){window.addGalary=new y({items:e,renderer:function(e){var t=oe(e,myId);addGalary.appends(t)}},".photos"),addGalary.renderItems()})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}));var oe=function(e,t){var n=new h(e,".template-card",ue,{handleCardDelete:function(e){te.open(),te.setSubmitAction((function(){re.delCard("cards/",e._id).then((function(){n.delCard(),te.close()})).catch((function(e){console.log(e)}))}))},delLike:function(e){re.delLike("cards/".concat(e,"/likes")).then((function(e){n.updateLikes(e.likes),n.toggleLikeIcon()})).catch((function(e){console.log(e)}))},addLike:function(e){re.addLike("cards/".concat(e,"/likes")).then((function(e){n.toggleLikeIcon(),n.updateLikes(e.likes)})).catch((function(e){console.log(e)}))}},t);return n.makeCard()},ie=new V(".popup_adder",(function(e){re.setCard("cards",e).then((function(e){var t=oe(e,e.owner._id);addGalary.prepends(t),ie.close()})).catch((function(e){console.log(e)})).finally((function(){ie.renderInitialText()}))}));ie.setEventListeners();var ae=new V(".popup_editor",(function(e){re.setProfile("users/me",e).then((function(e){ne.setUserInfo(e),ae.close()})).catch((function(e){console.log(e)})).finally((function(){ae.renderInitialText()}))}));ae.setEventListeners();var ce=new V(".popup_avatar",(function(e){re.setProfile("users/me/avatar",e).then((function(e){se(e.avatar),ce.close()})).catch((function(e){console.log(e)})).finally((function(){ce.renderInitialText()}))}));ce.setEventListeners();var ue=function(e,t){ee.open(e,t)},se=function(e){i.setAttribute("src",e)},le=new g(e,n);le.enableValidation();var fe=new g(e,r);fe.enableValidation();var pe=new g(e,o);pe.enableValidation(),s.addEventListener("click",(function(){ie.open(),fe.resetValidation()})),l.addEventListener("click",(function(){ce.open(),pe.resetValidation()})),u.addEventListener("click",(function(){ae.open();var e=ne.getUserInfo();a.value=e.name,c.value=e.about,le.resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBDb25maXJtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHRva2VuID0gJzljY2YyOWJkLTNkNjctNGNjOC04Yzk5LTgyYzE4ZDAxOWE0NCc7XHJcblxyXG5jb25zdCB1c2VyUHJvZmlsZSA9IFtcclxuICB7XHJcbiAgICBuYW1lOiAnLnByb2ZpbGVfX25hbWUnLFxyXG4gICAgZGVzY3JpcHQ6ICcucHJvZmlsZV9fZGVzY3JpcHRpb24nXHJcbiAgfVxyXG5dO1xyXG5cclxuY29uc3QgdmFsaWRhdGlvbkxpc3QgPSB7XHJcbiAgYWN0aXZlRm9ybTogJy5wb3B1cF9faW5wdXRzJyxcclxuICBmb3JtSW5wdXQ6ICcucG9wdXBfX2lucHV0JyxcclxuICBwb3B1cFNhdmVCdXR0b246ICcucG9wdXBfX3NhdmUnLFxyXG4gIHBvcHVwRGlzYWJsZUJ1dHRvbjogJ3BvcHVwX19zYXZlX2Rpc2FibGUnLFxyXG4gIGlucHV0RXJyb3I6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgYWN0aXZlRXJyb3I6ICdwb3B1cF9faW5wdXRfZXJyb3JfYWN0aXZlJ1xyXG59O1xyXG5cclxuY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5Jyk7XHJcbmNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQuZm9ybXMucHJvZmlsZTtcclxuY29uc3QgY2FyZEZvcm0gPSBkb2N1bWVudC5mb3Jtcy5hZGRJbWFnZTtcclxuY29uc3QgYXZhdGFyRm9ybSA9IGRvY3VtZW50LmZvcm1zLmFkZEF2YXRhcjtcclxuY29uc3QgYXZhdGFySW1hZ2UgPSBtYWluLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItaW1hZ2UnKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVEZXNjcmliZSA9IHtcclxuICBuYW1lOiAnLnByb2ZpbGVfX25hbWUnLFxyXG4gIGFib3V0OiAnLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJ1xyXG59O1xyXG5jb25zdCBpbnB1dE5hbWUgPSBwcm9maWxlRm9ybS5lbGVtZW50cy5uYW1lO1xyXG5jb25zdCBpbnB1dG5EZXNjcmlwdCA9IHByb2ZpbGVGb3JtLmVsZW1lbnRzLmFib3V0O1xyXG5cclxuXHJcbi8vLS0tLS1idXR0b25zLS0tLS0tLVxyXG5jb25zdCBwcm9maWxlT3BlbkJ1dHRvbiA9IG1haW4ucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XHJcbmNvbnN0IGNhcmRBZGRCdXR0b24gPSBtYWluLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XHJcbmNvbnN0IGF2YXRhckNoYW5nZUJ1dHRvbiA9IG1haW4ucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhcicpO1xyXG5cclxuLy8vLS0tLS0tRm9yIEFQSSByZXF1ZXN0LS0tLS0tXHJcbmNvbnN0IGNvbmZpZz17XHJcbiAgJ3VybCc6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQzLycsXHJcbiAgJ2hlYWRlcnMnOiB7XHJcbiAgICAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgJ2F1dGhvcml6YXRpb24nOiAnOWNjZjI5YmQtM2Q2Ny00Y2M4LThjOTktODJjMThkMDE5YTQ0J1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHtcclxuICB0b2tlbiwgbWFpbiwgcHJvZmlsZUZvcm0sIGNhcmRGb3JtLFxyXG4gIHZhbGlkYXRpb25MaXN0LCBhdmF0YXJJbWFnZSwgYXZhdGFyRm9ybSxcclxuICBwcm9maWxlRGVzY3JpYmUsIGlucHV0TmFtZSwgaW5wdXRuRGVzY3JpcHQsXHJcbiAgcHJvZmlsZU9wZW5CdXR0b24sIGNhcmRBZGRCdXR0b24sIGF2YXRhckNoYW5nZUJ1dHRvbixcclxuICBjb25maWdcclxufTsiLCJleHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgICBjb25zdHJ1Y3RvcihpdGVtLCBzZWxlY3RvclRlbXBsYXRlLCBoYW5kbGVDYXJkQ2xpY2ssIHsgaGFuZGxlQ2FyZERlbGV0ZSwgZGVsTGlrZSwgYWRkTGlrZSB9LCBteUlkKSB7XHJcbiAgICAgICAgdGhpcy5fY2FyZCA9IGl0ZW07XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvclRlbXBsYXRlO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlID0gaGFuZGxlQ2FyZERlbGV0ZTtcclxuICAgICAgICB0aGlzLl9kZWxMaWtlID0gZGVsTGlrZTtcclxuICAgICAgICB0aGlzLl9hZGRMaWtlID0gYWRkTGlrZTtcclxuICAgICAgICB0aGlzLl9teUlkID0gbXlJZDtcclxuICAgICAgICB0aGlzLl9saWtlID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFRlbXBsYXRlID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50XHJcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yKVxyXG4gICAgICAgICAgICAuY29udGVudC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgcmV0dXJuIGNhcmRUZW1wbGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICBfZGVsZXRlSW1hZ2UgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSh0aGlzLl9jYXJkKTtcclxuICAgIH1cclxuICAgIGRlbENhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBfYWRkRXZlbnRzID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLl9jYXJkLm93bmVyLl9pZCA9PSB0aGlzLl9teUlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhcmRSZW1vdmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9kZWxldGVJbWFnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9jYXJkUmVtb3ZlLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9jYXJkUmVtb3ZlID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2NhcmRMaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbGlrZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVsTGlrZSh0aGlzLl9jYXJkLl9pZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hZGRMaWtlKHRoaXMuX2NhcmQuX2lkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2NhcmQubmFtZSwgdGhpcy5fY2FyZC5saW5rKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGVMaWtlSWNvbigpIHtcclxuICAgICAgICB0aGlzLl9jYXJkTGlrZS5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlX2FjdGl2ZScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vLy8tLS0tLUZ1bmN0aW9uIGZvciBjaGVja2luZyBsaWtlcyAgICAtLS0tLS0vLy8vLy8vXHJcbiAgICBfY2hlY2tMaWtlcyA9ICgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5fY2FyZC5saWtlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzTGlrZSA9IHRoaXMuX2NhcmQubGlrZXMuZmluZChpdGVtID0+IGl0ZW0uX2lkID09IHRoaXMuX215SWQpO1xyXG4gICAgICAgICAgICBpZiAoaXNMaWtlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jYXJkTGlrZS5jbGFzc0xpc3QuYWRkKCdjYXJkX19saWtlX2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGlrZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9saWtlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9saWtlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX2FkZExpa2VDb3VudGVyID0gKGNvdW50ZXIpID0+IHtcclxuICAgICAgICB0aGlzLl9saWtlTnVtYmVyLnRleHRDb250ZW50ID0gY291bnRlcjtcclxuICAgIH07XHJcblxyXG4gICAgdXBkYXRlTGlrZXMgPSAobGlrZXMpID0+IHtcclxuICAgICAgICB0aGlzLl9jYXJkLmxpa2VzID0gbGlrZXM7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tMaWtlcygpO1xyXG4gICAgICAgIHRoaXMuX2FkZExpa2VDb3VudGVyKHRoaXMuX2NhcmQubGlrZXMubGVuZ3RoKVxyXG4gICAgfVxyXG5cclxuICAgIG1ha2VDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2NhcmRUZW1wbGF0ZSA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICAgICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9jYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmNhcmQnKTtcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJyk7XHJcbiAgICAgICAgdGhpcy5fY2FyZE5hbWUgPSB0aGlzLl9jYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmNhcmRfX25hbWUnKTtcclxuICAgICAgICB0aGlzLl9jYXJkUmVtb3ZlID0gdGhpcy5fY2FyZFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19yZW1vdmUnKTtcclxuICAgICAgICB0aGlzLl9jYXJkTGlrZSA9IHRoaXMuX2NhcmRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZScpO1xyXG4gICAgICAgIHRoaXMuX2xpa2VOdW1iZXIgPSB0aGlzLl9jYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtY291bnQnKTtcclxuICAgICAgICB0aGlzLl9jaGVja0xpa2VzKCk7XHJcbiAgICAgICAgdGhpcy5fYWRkTGlrZUNvdW50ZXIodGhpcy5fY2FyZC5saWtlcy5sZW5ndGgpO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIHRoaXMuX2NhcmQubGluayk7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgJ9Ck0L7RgtC+INC40Lcg0LPQsNC70LXRgNC10Lg6ICcgKyB0aGlzLl9jYXJkLm5hbWUpO1xyXG4gICAgICAgIHRoaXMuX2NhcmROYW1lLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZC5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2FkZEV2ZW50cygpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXJkVGVtcGxhdGU7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgc2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBjbGVhcigpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSAnJztcclxuICB9XHJcblxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuY2xlYXIoKTtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKVxyXG4gIH1cclxuXHJcblxyXG4gIHByZXBlbmRzKGl0ZW1IdG1sKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtSHRtbClcclxuICB9XHJcbiAgYXBwZW5kcyhpdGVtSHRtbCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChpdGVtSHRtbClcclxuICB9XHJcbn1cclxuXHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGxpc3QsIGZvcm1BY3RpdmUpIHtcclxuICAgICAgICB0aGlzLl9hY3RpdmVGb3JtID0gbGlzdC5hY3RpdmVGb3JtO1xyXG4gICAgICAgIHRoaXMuX2Zvcm1JbnB1dCA9IGxpc3QuZm9ybUlucHV0O1xyXG4gICAgICAgIHRoaXMuX3BvcHVwU2F2ZUJ1dHRvbiA9IGxpc3QucG9wdXBTYXZlQnV0dG9uO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRGlzYWJsZUJ1dHRvbiA9IGxpc3QucG9wdXBEaXNhYmxlQnV0dG9uO1xyXG4gICAgICAgIHRoaXMuX2lucHV0RXJyb3IgPSBsaXN0LmlucHV0RXJyb3I7XHJcbiAgICAgICAgdGhpcy5fYWN0aXZlRXJyb3IgPSBsaXN0LmFjdGl2ZUVycm9yO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0gPSBmb3JtQWN0aXZlO1xyXG4gICAgICAgIHRoaXMuX2lucHV0QXJyYXkgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9mb3JtSW5wdXQpKTtcclxuICAgICAgICB0aGlzLl9zYXZlQnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3BvcHVwU2F2ZUJ1dHRvbik7XHJcbiAgICB9XHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRBcnJheS5mb3JFYWNoKChpbnB1dHMpID0+IHtcclxuICAgICAgICAgICAgaW5wdXRzLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0cyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9O1xyXG5cclxuICAgIF9zaG93SW5wdXRFcnJvciA9ICh2YWxpZEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVycm9ySW5FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHt2YWxpZEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgdmFsaWRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvcik7XHJcbiAgICAgICAgZXJyb3JJbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9hY3RpdmVFcnJvcik7XHJcbiAgICAgICAgZXJyb3JJbkVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICB9XHJcblxyXG4gICAgX2hpZGVJbnB1dEVycm9yID0gKHZhbGlkRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVycm9ySW5FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHt2YWxpZEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICAgICAgdmFsaWRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvcik7XHJcbiAgICAgICAgZXJyb3JJbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9hY3RpdmVFcnJvcik7XHJcbiAgICAgICAgZXJyb3JJbkVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKHZhbGlkRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlmICghdmFsaWRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKHZhbGlkRWxlbWVudCwgdmFsaWRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB0aGlzLl9oaWRlSW5wdXRFcnJvcih2YWxpZEVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0QXJyYXkuc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2F2ZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX3BvcHVwRGlzYWJsZUJ1dHRvbik7XHJcbiAgICAgICAgICAgIHRoaXMuX3NhdmVCdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fc2F2ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3BvcHVwRGlzYWJsZUJ1dHRvbik7XHJcbiAgICAgICAgICAgIHRoaXMuX3NhdmVCdXR0b24ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXNldFZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICB0aGlzLl9pbnB1dEFycmF5LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9hY3RpdmUnKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX2FjdGl2ZScpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fY2xvc2VMaXN0ZW5lciA9IChldnQpID0+IHtcclxuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0IHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UnKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcclxuICAgICAgICBzdXBlcihzZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fYmlnSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbiAgICAgICAgdGhpcy5fYmlnSW1hZ2VDYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZS1jYXB0aW9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbiA9IChuYW1lLCBsaW5rKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fYmlnSW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCBsaW5rKTtcclxuICAgICAgICB0aGlzLl9iaWdJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsICfQo9Cy0LXQu9C40YfQtdC90L3QvtC1INGE0L7RgtC+INC40Lcg0LPQsNC70LXRgNC10Lg6ICcgKyBuYW1lKTtcclxuICAgICAgICB0aGlzLl9iaWdJbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3RvciwgZ2V0RGF0YUZyb21BcGkpIHtcclxuICAgICAgICBzdXBlcihzZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRzJyk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRBcnJheSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcclxuICAgICAgICB0aGlzLl9nZXREYXRhRnJvbUFwaSA9IGdldERhdGFGcm9tQXBpO1xyXG4gICAgICAgIHRoaXMuX3NhdmVCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmUnKTtcclxuICAgICAgICB0aGlzLl9pbml0aWFsVGV4dCA9IHRoaXMuX3NhdmVCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgICAgIGNvbnN0IG5ld1ZhbHVlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2lucHV0QXJyYXkuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgbmV3VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG5ld1ZhbHVlcztcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJJbml0aWFsVGV4dCgpIHtcclxuICAgICAgICB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5faW5pdGlhbFRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9zYXZlQnV0dG9uLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJztcclxuICAgICAgICAgICAgdGhpcy5fZ2V0RGF0YUZyb21BcGkodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgICAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lKTtcclxuICAgICAgICB0aGlzLl9hYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXQpO1xyXG4gICAgfVxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgY29uc3QgZ2V0SW5mbyA9IHtcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0LnRleHRDb250ZW50XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gZ2V0SW5mbztcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyhuZXdJbnB1dHMpIHtcclxuICAgICAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmV3SW5wdXRzLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBuZXdJbnB1dHMuYWJvdXQ7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBjb25maWcgfSBmcm9tIFwiLi4vdXRpbGxzL2NvbnN0YW50cy5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0b2tlbikge1xyXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEJ1ZyBkZXRlY3RlZCEgJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERhdGEoZm9yVXJsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX2NvbmZpZy51cmwrZm9yVXJsLCB7IFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9jb25maWcuaGVhZGVycyBcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGRlbExpa2UoZm9yVXJsKXtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fY29uZmlnLnVybCtmb3JVcmwsIHtcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5fY29uZmlnLmhlYWRlcnMsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURSdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UgKTtcclxuICAgIH0gXHJcblxyXG4gICAgYWRkTGlrZShmb3JVcmwpe1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9jb25maWcudXJsK2ZvclVybCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9jb25maWcuaGVhZGVycyAsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UgKTtcclxuICAgIH0gXHJcblxyXG4gICAgc2V0Q2FyZChmb3JVcmwsc2V0dGluZ3Mpe1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9jb25maWcudXJsK2ZvclVybCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9jb25maWcuaGVhZGVycyAsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShzZXR0aW5ncyksXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlICk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsQ2FyZChmb3JVcmwsY2FyZElkKXtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fY29uZmlnLnVybCtmb3JVcmwrY2FyZElkLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2NvbmZpZy5oZWFkZXJzLFxyXG4gICAgICAgICAgICBtZXRob2Q6ICdERUxFVEUnXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlICk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UHJvZmlsZShmb3JVcmwsZGF0YSl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX2NvbmZpZy51cmwrZm9yVXJsLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2NvbmZpZy5oZWFkZXJzLFxyXG4gICAgICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSApO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcclxuXHJcbiAgICBzZXRTdWJtaXRBY3Rpb24gPSAoYWN0aW9uKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fcHJlc3NZZXNzID0gYWN0aW9uO1xyXG4gICAgfVxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19vaycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5fcHJlc3NZZXNzKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7XHJcbiAgdG9rZW4sIG1haW4sIHByb2ZpbGVGb3JtLCBjYXJkRm9ybSxcclxuICB2YWxpZGF0aW9uTGlzdCwgYXZhdGFySW1hZ2UsIGF2YXRhckZvcm0sXHJcbiAgcHJvZmlsZURlc2NyaWJlLCBpbnB1dE5hbWUsIGlucHV0bkRlc2NyaXB0LFxyXG4gIHByb2ZpbGVPcGVuQnV0dG9uLCBjYXJkQWRkQnV0dG9uLCBhdmF0YXJDaGFuZ2VCdXR0b25cclxufSBmcm9tIFwiLi4vdXRpbGxzL2NvbnN0YW50c1wiO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZFwiO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IFBvcHVwQ29uZmlybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwQ29uZmlybVwiO1xyXG5cclxuXHJcbi8vPT09PT09PWNsYXNzZXMgYW5kIGNhbGxiYWNrcz09PT09PT09PVxyXG5cclxuY29uc3QgYmlnSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF9iaWctaW1hZ2UnKTtcclxuYmlnSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGNvbmZpcm1Qb3B1cCA9IG5ldyBQb3B1cENvbmZpcm0oJy5wb3B1cF9xdWVzdGlvbicpO1xyXG5jb25maXJtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVEZXNjcmliZSk7XHJcblxyXG4vLy8vLy8vLy8tLWdldHRpbmcgdXNlciBpbmZvICYgY2FyZHMgZnJvbSBzZXJ2ZXItLS8vLy8vLy8vXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkodG9rZW4pO1xyXG5hcGkuZ2V0RGF0YSgndXNlcnMvbWUnKVxyXG4gIC50aGVuKCh1c2Vyc0luZm8pID0+IHtcclxuICAgIHdpbmRvdy5teUlkID0gdXNlcnNJbmZvLl9pZDtcclxuICAgIHNldEF2YXRhcih1c2Vyc0luZm8uYXZhdGFyKTtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJzSW5mbyk7XHJcbiAgICBhcGkuZ2V0RGF0YSgnY2FyZHMnKVxyXG4gICAgICAudGhlbigoZGJDYXJkcykgPT4ge1xyXG4gICAgICAgIHdpbmRvdy5hZGRHYWxhcnkgPSBuZXcgU2VjdGlvbih7XHJcbiAgICAgICAgICBpdGVtczogZGJDYXJkcyxcclxuICAgICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXR1cm5DYXJkID0gYWRkTmV3Q2FyZChpdGVtLCBteUlkKTtcclxuICAgICAgICAgICAgYWRkR2FsYXJ5LmFwcGVuZHMocmV0dXJuQ2FyZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgXCIucGhvdG9zXCIpO1xyXG4gICAgICAgIGFkZEdhbGFyeS5yZW5kZXJJdGVtcygpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgfSk7XHJcblxyXG5cclxuLy8vLy8vLy8vLS0tLS0gTWFraW5nIGV2ZXJ5IGNhcmQgLS0tLS0tLS8vLy8vLy8vXHJcbmNvbnN0IGFkZE5ld0NhcmQgPSAoZGVzY3JpYmUsIG15SWQpID0+IHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICBkZXNjcmliZSwgJy50ZW1wbGF0ZS1jYXJkJywgaGFuZGxlQ2FyZENsaWNrLFxyXG4gICAge1xyXG4gICAgICBoYW5kbGVDYXJkRGVsZXRlOiAoY2FyZFRvRGVsKSA9PiB7XHJcbiAgICAgICAgY29uZmlybVBvcHVwLm9wZW4oKTtcclxuICAgICAgICBjb25maXJtUG9wdXAuc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcclxuICAgICAgICAgIGFwaS5kZWxDYXJkKCdjYXJkcy8nLCBjYXJkVG9EZWwuX2lkKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2FyZC5kZWxDYXJkKCk7XHJcbiAgICAgICAgICAgICAgY29uZmlybVBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGRlbExpa2U6IChjYXJkSWQpID0+IHtcclxuICAgICAgICBhcGkuZGVsTGlrZShgY2FyZHMvJHtjYXJkSWR9L2xpa2VzYClcclxuICAgICAgICAgIC50aGVuKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmQudXBkYXRlTGlrZXMoaXRlbS5saWtlcyk7XHJcbiAgICAgICAgICAgIGNhcmQudG9nZ2xlTGlrZUljb24oKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGFkZExpa2U6IChjYXJkSWQpID0+IHtcclxuICAgICAgICBhcGkuYWRkTGlrZShgY2FyZHMvJHtjYXJkSWR9L2xpa2VzYClcclxuICAgICAgICAgIC50aGVuKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIGNhcmQudG9nZ2xlTGlrZUljb24oKTtcclxuICAgICAgICAgICAgY2FyZC51cGRhdGVMaWtlcyhpdGVtLmxpa2VzKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBteUlkKTtcclxuICBjb25zdCBuZXdSZXR1cm5DYXJkID0gY2FyZC5tYWtlQ2FyZCgpO1xyXG4gIHJldHVybiBuZXdSZXR1cm5DYXJkO1xyXG59XHJcblxyXG5cclxuLy8vLy8vLy8vLS0tLS0gUG9wdXAgZm9ybXMgY3JlYXRpbmcgLS0tLS0tLS8vLy8vLy8vXHJcbmNvbnN0IHBvcHVwQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICAnLnBvcHVwX2FkZGVyJyxcclxuICAobmFtZUFuZExpbmspID0+IHtcclxuICAgIGFwaS5zZXRDYXJkKCdjYXJkcycsIG5hbWVBbmRMaW5rKVxyXG4gICAgICAudGhlbigoY2FyZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJldHVybkNhcmQgPSBhZGROZXdDYXJkKGNhcmQsIGNhcmQub3duZXIuX2lkKTtcclxuICAgICAgICBhZGRHYWxhcnkucHJlcGVuZHMocmV0dXJuQ2FyZCk7XHJcbiAgICAgICAgcG9wdXBDYXJkRm9ybS5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBwb3B1cENhcmRGb3JtLnJlbmRlckluaXRpYWxUZXh0KCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuKTtcclxucG9wdXBDYXJkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcG9wdXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgJy5wb3B1cF9lZGl0b3InLFxyXG4gIChuZXdJbnB1dHMpID0+IHtcclxuICAgIGFwaS5zZXRQcm9maWxlKCd1c2Vycy9tZScsIG5ld0lucHV0cylcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTtcclxuICAgICAgICBwb3B1cFByb2ZpbGUuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBQcm9maWxlLnJlbmRlckluaXRpYWxUZXh0KCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuKTtcclxucG9wdXBQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwb3B1cEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gICcucG9wdXBfYXZhdGFyJyxcclxuICAoZ2V0QXZhdGFyKSA9PiB7XHJcbiAgICBhcGkuc2V0UHJvZmlsZSgndXNlcnMvbWUvYXZhdGFyJywgZ2V0QXZhdGFyKVxyXG4gICAgICAudGhlbigoYXZhKSA9PiB7XHJcbiAgICAgICAgc2V0QXZhdGFyKGF2YS5hdmF0YXIpO1xyXG4gICAgICAgIHBvcHVwQXZhdGFyLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSlcclxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgIHBvcHVwQXZhdGFyLnJlbmRlckluaXRpYWxUZXh0KCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuKTtcclxucG9wdXBBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcblxyXG4vLz09PT09PT1mdW5jdGlvbnM9PT09PT09PT1cclxuY29uc3QgaGFuZGxlQ2FyZENsaWNrID0gKGNhcmROYW1lLCBjYXJkTGluaykgPT4ge1xyXG4gIGJpZ0ltYWdlLm9wZW4oY2FyZE5hbWUsIGNhcmRMaW5rKTtcclxufVxyXG5cclxuY29uc3Qgc2V0QXZhdGFyID0gKGF2YXRhckxpbmspID0+IHtcclxuICBhdmF0YXJJbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGF2YXRhckxpbmspO1xyXG59XHJcblxyXG4vLy0tLS0tLS0tZW5hYmxlIHZhbGlkYXRpb24tLS0tLS0tLS0tXHJcbmNvbnN0IHByb2ZpbGVGb3JtVmFsaWRhdGUgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uTGlzdCwgcHJvZmlsZUZvcm0pO1xyXG5wcm9maWxlRm9ybVZhbGlkYXRlLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGNhcmRGb3JtVmFsaWRhdGUgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uTGlzdCwgY2FyZEZvcm0pO1xyXG5jYXJkRm9ybVZhbGlkYXRlLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25MaXN0LCBhdmF0YXJGb3JtKTtcclxuYXZhdGFyRm9ybVZhbGlkYXRlLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcblxyXG4vLz09PT09PT09PT1idXR0b25zIGxpc3RlbmVycz09PT09PT09PT09XHJcblxyXG5jYXJkQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHBvcHVwQ2FyZEZvcm0ub3BlbigpO1xyXG4gIGNhcmRGb3JtVmFsaWRhdGUucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pXHJcblxyXG5hdmF0YXJDaGFuZ2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgcG9wdXBBdmF0YXIub3BlbigpO1xyXG4gIGF2YXRhckZvcm1WYWxpZGF0ZS5yZXNldFZhbGlkYXRpb24oKTtcclxufSlcclxuXHJcbnByb2ZpbGVPcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHBvcHVwUHJvZmlsZS5vcGVuKCk7XHJcbiAgY29uc3Qgb2xkUHJvZmlsZSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgaW5wdXROYW1lLnZhbHVlID0gb2xkUHJvZmlsZS5uYW1lO1xyXG4gIGlucHV0bkRlc2NyaXB0LnZhbHVlID0gb2xkUHJvZmlsZS5hYm91dDtcclxuICBwcm9maWxlRm9ybVZhbGlkYXRlLnJlc2V0VmFsaWRhdGlvbigpO1xyXG59KVxyXG5cclxuIl0sIm5hbWVzIjpbInZhbGlkYXRpb25MaXN0IiwiYWN0aXZlRm9ybSIsImZvcm1JbnB1dCIsInBvcHVwU2F2ZUJ1dHRvbiIsInBvcHVwRGlzYWJsZUJ1dHRvbiIsImlucHV0RXJyb3IiLCJhY3RpdmVFcnJvciIsIm1haW4iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9maWxlRm9ybSIsImZvcm1zIiwicHJvZmlsZSIsImNhcmRGb3JtIiwiYWRkSW1hZ2UiLCJhdmF0YXJGb3JtIiwiYWRkQXZhdGFyIiwiYXZhdGFySW1hZ2UiLCJpbnB1dE5hbWUiLCJlbGVtZW50cyIsIm5hbWUiLCJpbnB1dG5EZXNjcmlwdCIsImFib3V0IiwicHJvZmlsZU9wZW5CdXR0b24iLCJjYXJkQWRkQnV0dG9uIiwiYXZhdGFyQ2hhbmdlQnV0dG9uIiwiY29uZmlnIiwiQ2FyZCIsIml0ZW0iLCJzZWxlY3RvclRlbXBsYXRlIiwiaGFuZGxlQ2FyZENsaWNrIiwibXlJZCIsImhhbmRsZUNhcmREZWxldGUiLCJkZWxMaWtlIiwiYWRkTGlrZSIsIl9zZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfaGFuZGxlQ2FyZERlbGV0ZSIsIl9jYXJkIiwib3duZXIiLCJfaWQiLCJfbXlJZCIsIl9jYXJkUmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9kZWxldGVJbWFnZSIsInJlbW92ZSIsIl9jYXJkTGlrZSIsIl9saWtlIiwiX2RlbExpa2UiLCJfYWRkTGlrZSIsIl9jYXJkSW1hZ2UiLCJfaGFuZGxlQ2FyZENsaWNrIiwibGluayIsImxpa2VzIiwibGVuZ3RoIiwiZmluZCIsImNsYXNzTGlzdCIsImFkZCIsImNvdW50ZXIiLCJfbGlrZU51bWJlciIsInRleHRDb250ZW50IiwiX2NoZWNrTGlrZXMiLCJfYWRkTGlrZUNvdW50ZXIiLCJ0aGlzIiwiX2NhcmRFbGVtZW50IiwidG9nZ2xlIiwiX2NhcmRUZW1wbGF0ZSIsIl9nZXRUZW1wbGF0ZSIsIl9jYXJkTmFtZSIsInNldEF0dHJpYnV0ZSIsIl9hZGRFdmVudHMiLCJTZWN0aW9uIiwic2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImlubmVySFRNTCIsImNsZWFyIiwiZm9yRWFjaCIsIml0ZW1IdG1sIiwicHJlcGVuZCIsImFwcGVuZCIsIkZvcm1WYWxpZGF0b3IiLCJsaXN0IiwiZm9ybUFjdGl2ZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9pbnB1dEFycmF5IiwiaW5wdXRzIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zZXRFdmVudExpc3RlbmVycyIsInZhbGlkRWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9ySW5FbGVtZW50IiwiX2Zvcm0iLCJpZCIsIl9pbnB1dEVycm9yIiwiX2FjdGl2ZUVycm9yIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwic29tZSIsImlucHV0RWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfc2F2ZUJ1dHRvbiIsIl9wb3B1cERpc2FibGVCdXR0b24iLCJyZW1vdmVBdHRyaWJ1dGUiLCJpbnB1dCIsIl9hY3RpdmVGb3JtIiwiX2Zvcm1JbnB1dCIsIl9wb3B1cFNhdmVCdXR0b24iLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiUG9wdXAiLCJldnQiLCJrZXkiLCJjbG9zZSIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2Nsb3NlTGlzdGVuZXIiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhJbWFnZSIsIl9iaWdJbWFnZSIsIl9iaWdJbWFnZUNhcHRpb24iLCJQb3B1cFdpdGhGb3JtIiwiZ2V0RGF0YUZyb21BcGkiLCJfZ2V0RGF0YUZyb21BcGkiLCJfaW5pdGlhbFRleHQiLCJuZXdWYWx1ZXMiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJVc2VySW5mbyIsIl9uYW1lIiwiX2Fib3V0IiwibmV3SW5wdXRzIiwiQXBpIiwidG9rZW4iLCJfY29uZmlnIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZvclVybCIsImZldGNoIiwidXJsIiwiaGVhZGVycyIsInRoZW4iLCJfY2hlY2tSZXNwb25zZSIsIm1ldGhvZCIsInNldHRpbmdzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJkYXRhIiwiUG9wdXBDb25maXJtIiwiYWN0aW9uIiwiX3ByZXNzWWVzcyIsImJpZ0ltYWdlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjb25maXJtUG9wdXAiLCJ1c2VySW5mbyIsImFwaSIsImdldERhdGEiLCJ1c2Vyc0luZm8iLCJ3aW5kb3ciLCJzZXRBdmF0YXIiLCJhdmF0YXIiLCJzZXRVc2VySW5mbyIsImRiQ2FyZHMiLCJhZGRHYWxhcnkiLCJyZXR1cm5DYXJkIiwiYWRkTmV3Q2FyZCIsImFwcGVuZHMiLCJyZW5kZXJJdGVtcyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImRlc2NyaWJlIiwiY2FyZCIsImNhcmRUb0RlbCIsIm9wZW4iLCJzZXRTdWJtaXRBY3Rpb24iLCJkZWxDYXJkIiwidXBkYXRlTGlrZXMiLCJ0b2dnbGVMaWtlSWNvbiIsIm1ha2VDYXJkIiwicG9wdXBDYXJkRm9ybSIsIm5hbWVBbmRMaW5rIiwic2V0Q2FyZCIsInByZXBlbmRzIiwiZmluYWxseSIsInJlbmRlckluaXRpYWxUZXh0IiwicG9wdXBQcm9maWxlIiwic2V0UHJvZmlsZSIsInBvcHVwQXZhdGFyIiwiZ2V0QXZhdGFyIiwiYXZhIiwiY2FyZE5hbWUiLCJjYXJkTGluayIsImF2YXRhckxpbmsiLCJwcm9maWxlRm9ybVZhbGlkYXRlIiwiZW5hYmxlVmFsaWRhdGlvbiIsImNhcmRGb3JtVmFsaWRhdGUiLCJhdmF0YXJGb3JtVmFsaWRhdGUiLCJyZXNldFZhbGlkYXRpb24iLCJvbGRQcm9maWxlIiwiZ2V0VXNlckluZm8iXSwic291cmNlUm9vdCI6IiJ9