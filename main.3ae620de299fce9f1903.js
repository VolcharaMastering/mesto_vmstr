!function(){"use strict";var e={activeForm:".popup__inputs",formInput:".popup__input",popupSaveButton:".popup__save",popupDisableButton:"popup__save_disable",inputError:"popup__input_type_error",activeError:"popup__input_error_active"},t=document.querySelector(".gallery"),n=document.forms.profile,r=document.forms.addImage,o=t.querySelector(".profile__avatar-image");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(){function e(t,n,r,o,i){var c=this,u=o.handleCardDelete,s=o.delLike,l=o.addLike;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_getTemplate",(function(){return document.querySelector(c._selector).content.cloneNode(!0)})),a(this,"_deleteImage",(function(e){c._handleCardDelete(c._cardId,e)})),a(this,"delCard",(function(e){c._cardTemplate=null,e.target.closest(".card").remove()})),a(this,"_addEvents",(function(){c._ownerId==myId?c._cardRemove.addEventListener("click",c._deleteImage):c._cardRemove.classList.remove("card__remove"),c._cardLike.addEventListener("click",(function(){c._like?c._delLike(c._cardId):c._addLike(c._cardId),c._cardLike.classList.toggle("card__like_active")})),c._cardImage.addEventListener("click",(function(){c._handleCardClick(c._newCardName,c._imageLink)}))})),a(this,"_checkLikes",(function(){c._getLikes.length>0&&c._getLikes.find((function(e){return e._id==c._myId}))?(c._cardLike.classList.add("card__like_active"),c._like=!0):c._like=!1})),a(this,"_addLikeCounter",(function(e){c._likeNumber.textContent=e})),a(this,"updateLikes",(function(e){c._getLikes=e,c._checkLikes(),c._addLikeCounter(c._getLikes.length)})),this._newCardName=t.name,this._imageLink=t.link,this._getLikes=t.likes,this._cardId=t._id,this._ownerId=t.owner._id,this._selector=n,this._handleCardClick=r,this._handleCardDelete=u,this._delLike=s,this._addLike=l,this._myId=i,this._like=!1}var t,n;return t=e,(n=[{key:"makeCard",value:function(){return this._cardTemplate=this._getTemplate(),this._cardImage=this._cardTemplate.querySelector(".card__image"),this._cardName=this._cardTemplate.querySelector(".card__name"),this._cardRemove=this._cardTemplate.querySelector(".card__remove"),this._cardLike=this._cardTemplate.querySelector(".card__like"),this._likeNumber=this._cardTemplate.querySelector(".card__like-count"),this._checkLikes(),this._addLikeCounter(this._getLikes.length),this._cardImage.setAttribute("src",this._imageLink),this._cardImage.setAttribute("alt","Фото из галереи: "+this._newCardName),this._cardName.textContent=this._newCardName,this._addEvents(),this._cardTemplate}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var e=this;this.clear(),this._items.forEach((function(t){return e._renderer(t)}))}},{key:"prepends",value:function(e){this._container.prepend(e)}},{key:"appends",value:function(e){this._container.append(e)}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=f((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"_setEventListeners",(function(){r._toggleButtonState(),r._inputArray.forEach((function(e){e.addEventListener("input",(function(){r._checkInputValidity(e),r._toggleButtonState()}))}))})),p(this,"enableValidation",(function(){r._setEventListeners()})),p(this,"_showInputError",(function(e,t){var n=r._form.querySelector(".".concat(e.id,"-error"));e.classList.add(r._inputError),n.classList.add(r._activeError),n.textContent=t})),p(this,"_hideInputError",(function(e){var t=r._form.querySelector(".".concat(e.id,"-error"));e.classList.remove(r._inputError),t.classList.remove(r._activeError),t.textContent=""})),p(this,"_checkInputValidity",(function(e){e.validity.valid?r._hideInputError(e):r._showInputError(e,e.validationMessage)})),p(this,"_hasInvalidInput",(function(){return r._inputArray.some((function(e){return!e.validity.valid}))})),p(this,"_toggleButtonState",(function(){r._hasInvalidInput()?(r._saveButton.classList.add(r._popupDisableButton),r._saveButton.setAttribute("disabled","disabled")):(r._saveButton.classList.remove(r._popupDisableButton),r._saveButton.removeAttribute("disabled"))})),p(this,"resetValidation",(function(){r._toggleButtonState(),r._inputArray.forEach((function(e){r._hideInputError(e)}))})),this._activeForm=t.activeForm,this._formInput=t.formInput,this._popupSaveButton=t.popupSaveButton,this._popupDisableButton=t.popupDisableButton,this._inputError=t.inputError,this._activeError=t.activeError,this._form=n,this._inputArray=Array.from(this._form.querySelectorAll(this._formInput)),this._saveButton=this._form.querySelector(this._popupSaveButton)}));function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(){document.addEventListener("keydown",o._escCloseListen=function(e){"Escape"===e.key&&o.close()})},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._popup=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_active"),this._handleEscClose()}},{key:"close",value:function(){this._popup.classList.remove("popup_active"),document.removeEventListener("keydown",this._escCloseListen)}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",this._closeListener=function(t){(t.target===t.currentTarget||t.target.classList.contains("popup__close"))&&e.close()})}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function b(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=k(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function k(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(i,e);var t,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(n);if(r){var o=w(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return b(this,e)});function i(e){var t,n,r,a,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),c=function(e,r){n._bigImage.setAttribute("src",r),n._bigImage.setAttribute("alt","Увеличенное фото из галереи: "+e),n._bigImageCaption.textContent=e,g((t=m(n),w(i.prototype)),"open",t).call(t)},(a="open")in(r=m(n=o.call(this,e)))?Object.defineProperty(r,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):r.open=c,n._bigImage=n._popup.querySelector(".popup__image"),n._bigImageCaption=n._popup.querySelector(".popup__image-caption"),n}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(h);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=S(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},j.apply(this,arguments)}function S(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}function P(e,t){return P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},P(e,t)}function C(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=I(r);if(o){var n=I(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return C(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._form=n._popup.querySelector(".popup__inputs"),n._inputArray=n._popup.querySelectorAll(".popup__input"),n._getDataFromApi=t,n}return t=a,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputArray.forEach((function(t){e[t.name]=t.value})),console.log("NEWValues=",e),e}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._getDataFromApi(e._getInputValues())})),j(I(a.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){j(I(a.prototype),"close",this).call(this),this._form.reset()}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(h);function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t){var n=t.userName,r=t.description;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._description=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{userName:this._name.textContent,descript:this._description.textContent}}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._description.textContent=e.description}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var A=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url="https://mesto.nomoreparties.co/v1/cohort-43/",this._token=t,this._headers={"Content-type":"application/json",authorization:"9ccf29bd-3d67-4cc8-8c99-82c18d019a44"}}var t,n;return t=e,(n=[{key:"getData",value:function(e){return fetch(this._url+e,{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Bug detected!")}))}},{key:"delLike",value:function(e){return fetch(this._url+e,{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?(console.log("resULT"+e),e.json()):Promise.reject("Bug detected!")}))}},{key:"addLike",value:function(e){return fetch(this._url+e,{headers:this._headers,method:"PUT"}).then((function(e){return e.ok?(console.log("resULT",e),e.json()):Promise.reject("Bug detected!")}))}},{key:"setCard",value:function(e,t){return fetch(this._url+e,{headers:this._headers,method:"POST",body:JSON.stringify(t)}).then((function(e){return e.ok?e.json():Promise.reject("Bug detected!")}))}},{key:"delCard",value:function(e,t){return fetch(this._url+e+t,{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Bug detected!")}))}},{key:"setAvatar",value:function(e,t){return fetch(this._url+e,{headers:this._headers,method:"PATCH",body:JSON.stringify(t)}).then((function(e){return e.ok?e.json():Promise.reject("Bug detected!")}))}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(){return x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=V(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},x.apply(this,arguments)}function V(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=M(e)););return e}function U(e,t){return U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},U(e,t)}function F(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=M(r);if(o){var n=M(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return F(this,e)});function a(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o=function(e){t._pressYess=e(),console.log("ACTION")},(r="setSubmitAction")in(n=G(t=i.call(this,e)))?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t._pressYes=function(){},t._yesButton=t._popup.querySelector(".popup__ok"),t}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;x(M(a.prototype),"setEventListeners",this).call(this),this._yesButton.addEventListener("click",(function(t){console.log("buttonPressed"),t.preventDefault(),e.setSubmitAction()}))}}])&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(h),J=n.elements.name,Y=n.elements.description,z=t.querySelector(".profile__edit-button"),W=t.querySelector(".profile__add-button"),K=t.querySelector(".profile__avatar");console.log(K);var Q=function(e,t){Z.open(e,t)},X=function(e){console.log(e),o.setAttribute("src",e)},Z=new L(".popup_big-image");Z.setEventListeners();var $=new H(".popup_question");$.setEventListeners();var ee=new A("9ccf29bd-3d67-4cc8-8c99-82c18d019a44");ee.getData("users/me").then((function(e){window.myId=e._id,X(e.avatar),ee.getData("cards").then((function(e){window.addGalary=new s({items:e,renderer:function(e){var t=te(e,myId);addGalary.appends(t)}},".photos"),addGalary.renderItems()}))})).catch((function(e){console.log(e)}));var te=function(e,t){var n=new c(e,".template-card",Q,{handleCardDelete:function(e,t){$.open(),$.setSubmitAction((function(){console.log("SUBMIT"),ee.delCard("cards/",e).then((function(){n.delCard(t),$.close()})).catch((function(e){console.log(e)}))}))},delLike:function(e){ee.delLike("cards/".concat(e,"/likes")).then((function(e){n.updateLikes(e.likes)})).catch((function(e){console.log(e)}))},addLike:function(e){ee.addLike("cards/".concat(e,"/likes")).then((function(e){n.updateLikes(e.likes)})).catch((function(e){console.log(e)}))}},t);return n.makeCard()},ne=new T(".popup_adder",(function(e){ee.setCard("cards",e).then((function(e){var t=te(e,e.owner._id);addGalary.prepends(t),ne.close()})).catch((function(e){console.log(e)}))}));ne.setEventListeners();var re=new R({userName:".profile__name",description:".profile__description"}),oe=new T(".popup_editor",(function(e){re.setUserInfo(e),oe.close()}));oe.setEventListeners();var ie=new T(".popup_avatar",(function(e){ee.setAvatar("users/me/avatar",e).then((function(e){X(e.avatar),ie.close()})).catch((function(e){console.log(e)}))}));ie.setEventListeners();var ae=new d(e,n);ae.enableValidation();var ce=new d(e,r);ce.enableValidation();var ue=new d(e,r);ue.enableValidation(),W.addEventListener("click",(function(){ne.open(),ce.resetValidation()})),K.addEventListener("click",(function(){ie.open(),ue.resetValidation()})),z.addEventListener("click",(function(){oe.open();var e=re.getUserInfo();J.value=e.userName,Y.value=e.descript,ae.resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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L21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwQ29uZmlybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB0b2tlbiA9ICc5Y2NmMjliZC0zZDY3LTRjYzgtOGM5OS04MmMxOGQwMTlhNDQnO1xyXG5cclxuY29uc3QgdXNlclByb2ZpbGUgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogJy5wcm9maWxlX19uYW1lJyxcclxuICAgIGRlc2NyaXB0OiAnLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJ1xyXG4gIH1cclxuXTtcclxuXHJcbmNvbnN0IHZhbGlkYXRpb25MaXN0ID0ge1xyXG4gIGFjdGl2ZUZvcm06ICcucG9wdXBfX2lucHV0cycsXHJcbiAgZm9ybUlucHV0OiAnLnBvcHVwX19pbnB1dCcsXHJcbiAgcG9wdXBTYXZlQnV0dG9uOiAnLnBvcHVwX19zYXZlJyxcclxuICBwb3B1cERpc2FibGVCdXR0b246ICdwb3B1cF9fc2F2ZV9kaXNhYmxlJyxcclxuICBpbnB1dEVycm9yOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxyXG4gIGFjdGl2ZUVycm9yOiAncG9wdXBfX2lucHV0X2Vycm9yX2FjdGl2ZSdcclxufTtcclxuXHJcbmNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeScpO1xyXG5jb25zdCBwcm9maWxlRm9ybSA9IGRvY3VtZW50LmZvcm1zLnByb2ZpbGU7XHJcbmNvbnN0IGNhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXMuYWRkSW1hZ2U7XHJcbmNvbnN0IGF2YXRhckltYWdlID0gbWFpbi5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWltYWdlJyk7XHJcblxyXG5leHBvcnQgeyB0b2tlbiwgbWFpbiwgcHJvZmlsZUZvcm0sIGNhcmRGb3JtLCB2YWxpZGF0aW9uTGlzdCwgYXZhdGFySW1hZ2UgfTsiLCJleHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgICBjb25zdHJ1Y3RvcihpdGVtLCBzZWxlY3RvclRlbXBsYXRlLCBoYW5kbGVDYXJkQ2xpY2ssIHtoYW5kbGVDYXJkRGVsZXRlLCBkZWxMaWtlLCBhZGRMaWtlfSwgbXlJZCkge1xyXG4gICAgICAgIHRoaXMuX25ld0NhcmROYW1lID0gaXRlbS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlTGluayA9IGl0ZW0ubGluaztcclxuICAgICAgICB0aGlzLl9nZXRMaWtlcyA9IGl0ZW0ubGlrZXM7XHJcbiAgICAgICAgdGhpcy5fY2FyZElkID0gaXRlbS5faWQ7XHJcbiAgICAgICAgdGhpcy5fb3duZXJJZCA9IGl0ZW0ub3duZXIuX2lkO1xyXG4gICAgICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3JUZW1wbGF0ZTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSA9IGhhbmRsZUNhcmREZWxldGU7XHJcbiAgICAgICAgdGhpcy5fZGVsTGlrZSA9IGRlbExpa2U7XHJcbiAgICAgICAgdGhpcy5fYWRkTGlrZSA9IGFkZExpa2U7XHJcbiAgICAgICAgdGhpcy5fbXlJZCA9IG15SWQ7XHJcbiAgICAgICAgdGhpcy5fbGlrZSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRUZW1wbGF0ZSA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudFxyXG4gICAgICAgICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcilcclxuICAgICAgICAgICAgLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgIHJldHVybiBjYXJkVGVtcGxhdGU7XHJcbiAgICB9XHJcblxyXG4gICAgX2RlbGV0ZUltYWdlID0gKGV2dCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmREZWxldGUodGhpcy5fY2FyZElkLGV2dCk7XHJcbiAgICB9XHJcbiAgICBkZWxDYXJkPShldnQpPT57XHJcbiAgICBcclxuICAgICAgICB0aGlzLl9jYXJkVGVtcGxhdGUgPSBudWxsO1xyXG4gICAgICAgIGV2dC50YXJnZXQuY2xvc2VzdCgnLmNhcmQnKS5yZW1vdmUoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgX2FkZEV2ZW50cyA9ICgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5fb3duZXJJZCA9PSBteUlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2NhcmRSZW1vdmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9kZWxldGVJbWFnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9jYXJkUmVtb3ZlLmNsYXNzTGlzdC5yZW1vdmUoJ2NhcmRfX3JlbW92ZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fY2FyZExpa2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9saWtlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWxMaWtlKHRoaXMuX2NhcmRJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hZGRMaWtlKHRoaXMuX2NhcmRJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fY2FyZExpa2UuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9fbGlrZV9hY3RpdmUnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uZXdDYXJkTmFtZSwgdGhpcy5faW1hZ2VMaW5rKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIF9jaGVja0xpa2VzID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLl9nZXRMaWtlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzTGlrZSA9IHRoaXMuX2dldExpa2VzLmZpbmQoaXRlbSA9PiBpdGVtLl9pZCA9PSB0aGlzLl9teUlkKTtcclxuICAgICAgICAgICAgaWYgKGlzTGlrZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2FyZExpa2UuY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZV9hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpa2UgPSB0cnVlO1xyXG4gICAgICAgICAgICB9ICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9saWtlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpa2UgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfYWRkTGlrZUNvdW50ZXIgPSAoY291bnRlcikgPT4ge1xyXG4gICAgICAgIHRoaXMuX2xpa2VOdW1iZXIudGV4dENvbnRlbnQgPSBjb3VudGVyO1xyXG4gICAgfTtcclxuXHJcbiAgICB1cGRhdGVMaWtlcz0obGlrZXMpID0+e1xyXG4gICAgICAgIHRoaXMuX2dldExpa2VzPWxpa2VzO1xyXG4gICAgICAgIHRoaXMuX2NoZWNrTGlrZXMoKTtcclxuICAgICAgICB0aGlzLl9hZGRMaWtlQ291bnRlcih0aGlzLl9nZXRMaWtlcy5sZW5ndGgpXHJcbiAgICB9XHJcblxyXG4gICAgbWFrZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fY2FyZFRlbXBsYXRlID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJyk7XHJcbiAgICAgICAgdGhpcy5fY2FyZE5hbWUgPSB0aGlzLl9jYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmNhcmRfX25hbWUnKTtcclxuICAgICAgICB0aGlzLl9jYXJkUmVtb3ZlID0gdGhpcy5fY2FyZFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19yZW1vdmUnKTtcclxuICAgICAgICB0aGlzLl9jYXJkTGlrZSA9IHRoaXMuX2NhcmRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZScpO1xyXG4gICAgICAgIHRoaXMuX2xpa2VOdW1iZXIgPSB0aGlzLl9jYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtY291bnQnKTtcclxuICAgICAgICB0aGlzLl9jaGVja0xpa2VzKCk7XHJcbiAgICAgICAgdGhpcy5fYWRkTGlrZUNvdW50ZXIodGhpcy5fZ2V0TGlrZXMubGVuZ3RoKTtcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCB0aGlzLl9pbWFnZUxpbmspO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsICfQpNC+0YLQviDQuNC3INCz0LDQu9C10YDQtdC4OiAnICsgdGhpcy5fbmV3Q2FyZE5hbWUpO1xyXG4gICAgICAgIHRoaXMuX2NhcmROYW1lLnRleHRDb250ZW50ID0gdGhpcy5fbmV3Q2FyZE5hbWU7XHJcbiAgICAgICAgdGhpcy5fYWRkRXZlbnRzKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhcmRUZW1wbGF0ZTtcclxuICAgIH1cclxufSIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBzZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGNsZWFyKCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG4gIH1cclxuXHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5jbGVhcigpO1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpXHJcbiAgfVxyXG5cclxuXHJcbiAgcHJlcGVuZHMoaXRlbUh0bWwpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW1IdG1sKVxyXG4gIH1cclxuICBhcHBlbmRzKGl0ZW1IdG1sKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGl0ZW1IdG1sKVxyXG4gIH1cclxufVxyXG5cclxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IobGlzdCwgZm9ybUFjdGl2ZSkge1xyXG4gICAgICAgIHRoaXMuX2FjdGl2ZUZvcm0gPSBsaXN0LmFjdGl2ZUZvcm07XHJcbiAgICAgICAgdGhpcy5fZm9ybUlucHV0ID0gbGlzdC5mb3JtSW5wdXQ7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBTYXZlQnV0dG9uID0gbGlzdC5wb3B1cFNhdmVCdXR0b247XHJcbiAgICAgICAgdGhpcy5fcG9wdXBEaXNhYmxlQnV0dG9uID0gbGlzdC5wb3B1cERpc2FibGVCdXR0b247XHJcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvciA9IGxpc3QuaW5wdXRFcnJvcjtcclxuICAgICAgICB0aGlzLl9hY3RpdmVFcnJvciA9IGxpc3QuYWN0aXZlRXJyb3I7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IGZvcm1BY3RpdmU7XHJcbiAgICAgICAgdGhpcy5faW5wdXRBcnJheSA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2Zvcm1JbnB1dCkpO1xyXG4gICAgICAgIHRoaXMuX3NhdmVCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fcG9wdXBTYXZlQnV0dG9uKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICB0aGlzLl9pbnB1dEFycmF5LmZvckVhY2goKGlucHV0cykgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dHMuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH07XHJcblxyXG4gICAgX3Nob3dJbnB1dEVycm9yID0gKHZhbGlkRWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JJbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke3ZhbGlkRWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgICAgICB2YWxpZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yKTtcclxuICAgICAgICBlcnJvckluRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2FjdGl2ZUVycm9yKTtcclxuICAgICAgICBlcnJvckluRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgIH1cclxuXHJcbiAgICBfaGlkZUlucHV0RXJyb3IgPSAodmFsaWRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JJbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke3ZhbGlkRWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgICAgICB2YWxpZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yKTtcclxuICAgICAgICBlcnJvckluRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2FjdGl2ZUVycm9yKTtcclxuICAgICAgICBlcnJvckluRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkgPSAodmFsaWRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKCF2YWxpZEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IodmFsaWRFbGVtZW50LCB2YWxpZEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHRoaXMuX2hpZGVJbnB1dEVycm9yKHZhbGlkRWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhc0ludmFsaWRJbnB1dCA9ICgpID0+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRBcnJheS5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9zYXZlQnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fcG9wdXBEaXNhYmxlQnV0dG9uKTtcclxuICAgICAgICAgICAgdGhpcy5fc2F2ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9zYXZlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fcG9wdXBEaXNhYmxlQnV0dG9uKTtcclxuICAgICAgICAgICAgdGhpcy5fc2F2ZUJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0VmFsaWRhdGlvbiA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0QXJyYXkuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICAgIH1cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfYWN0aXZlJyk7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9hY3RpdmUnKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fZXNjQ2xvc2VMaXN0ZW4pO1xyXG4gICAgfVxyXG5cclxuICAgIF9oYW5kbGVFc2NDbG9zZSA9ICgpID0+IHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fZXNjQ2xvc2VMaXN0ZW4gPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbG9zZUxpc3RlbmVyID0gKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gZXZ0LmN1cnJlbnRUYXJnZXQgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZScpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xyXG4gICAgICAgIHN1cGVyKHNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9iaWdJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuICAgICAgICB0aGlzLl9iaWdJbWFnZUNhcHRpb249dGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZS1jYXB0aW9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbiA9IChuYW1lLCBsaW5rKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fYmlnSW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCBsaW5rKTtcclxuICAgICAgICB0aGlzLl9iaWdJbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsICfQo9Cy0LXQu9C40YfQtdC90L3QvtC1INGE0L7RgtC+INC40Lcg0LPQsNC70LXRgNC10Lg6ICcgKyBuYW1lKTtcclxuICAgICAgICB0aGlzLl9iaWdJbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3RvciwgZ2V0RGF0YUZyb21BcGkpIHtcclxuICAgICAgICBzdXBlcihzZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRzJyk7XHJcbiAgICAgICAgdGhpcy5faW5wdXRBcnJheSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcclxuICAgICAgICB0aGlzLl9nZXREYXRhRnJvbUFwaSA9IGdldERhdGFGcm9tQXBpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICBjb25zdCBuZXdWYWx1ZXMgPSB7fTtcclxuICAgICAgICB0aGlzLl9pbnB1dEFycmF5LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIG5ld1ZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdORVdWYWx1ZXM9JyxuZXdWYWx1ZXMpXHJcbiAgICAgICAgcmV0dXJuIG5ld1ZhbHVlcztcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2dldERhdGFGcm9tQXBpKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoeyB1c2VyTmFtZSwgZGVzY3JpcHRpb24gfSkge1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lKTtcclxuICAgICAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb24pO1xyXG4gICAgfVxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgY29uc3QgZ2V0SW5mbyA9IHtcclxuICAgICAgICAgICAgdXNlck5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0OiB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGdldEluZm87XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VXNlckluZm8obmV3SW5wdXRzKSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5ld0lucHV0cy5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gbmV3SW5wdXRzLmRlc2NyaXB0aW9uO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0b2tlbikge1xyXG4gICAgICAgIHRoaXMuX3VybCA9ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQzLyc7XHJcbiAgICAgICAgdGhpcy5fdG9rZW4gPSB0b2tlbjtcclxuICAgICAgICAvLyB0aGlzLl9mb3JVcmw9Zm9yVXJsO1xyXG4gICAgICAgIHRoaXMuX2hlYWRlcnMgPSB7XHJcbiAgICAgICAgICAgICdDb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICdhdXRob3JpemF0aW9uJzogJzljY2YyOWJkLTNkNjctNGNjOC04Yzk5LTgyYzE4ZDAxOWE0NCdcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGF0YShmb3JVcmwpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsK2ZvclVybCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pXHJcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgnQnVnIGRldGVjdGVkIScpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZGVsTGlrZShmb3JVcmwpe1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwrZm9yVXJsLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ0RFTEVURSdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc1VMVCcgK3Jlcyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ0J1ZyBkZXRlY3RlZCEnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gXHJcblxyXG4gICAgYWRkTGlrZShmb3JVcmwpe1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwrZm9yVXJsLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc1VMVCcscmVzKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgnQnVnIGRldGVjdGVkIScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBcclxuXHJcbiAgICBzZXRDYXJkKGZvclVybCxzZXR0aW5ncyl7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX3VybCtmb3JVcmwsIHtcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHNldHRpbmdzKSxcclxuICAgICAgICB9KVxyXG4gICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCdCdWcgZGV0ZWN0ZWQhJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsQ2FyZChmb3JVcmwsY2FyZElkKXtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fdXJsK2ZvclVybCtjYXJkSWQsIHtcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ0J1ZyBkZXRlY3RlZCEnKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRBdmF0YXIoZm9yVXJsLGxpbmtPYmope1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl91cmwrZm9yVXJsLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkobGlua09iaiksXHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgnQnVnIGRldGVjdGVkIScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIoc2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3ByZXNzWWVzID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMuX3llc0J1dHRvbj10aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX29rJyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U3VibWl0QWN0aW9uID0gKGFjdGlvbikgPT4ge1xyXG4gICAgICAgIHRoaXMuX3ByZXNzWWVzcyA9IGFjdGlvbigpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQUNUSU9OXCIpO1xyXG4gICAgfVxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuX3llc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKGV2dCk9PntcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJidXR0b25QcmVzc2VkXCIpO1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdWJtaXRBY3Rpb24oKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgdG9rZW4sIG1haW4sIHByb2ZpbGVGb3JtLCBjYXJkRm9ybSwgdmFsaWRhdGlvbkxpc3QsIGF2YXRhckltYWdlIH0gZnJvbSBcIi4vY29tcG9uZW50cy92YXJpYWJsZXNcIjtcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuL2NvbXBvbmVudHMvQ2FyZFwiO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7IEFwaSB9IGZyb20gXCIuL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBcIi4vc3R5bGVzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBQb3B1cENvbmZpcm0gfSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwQ29uZmlybVwiO1xyXG5cclxuXHJcblxyXG5jb25zdCBwcm9maWxlRGVzY3JpYmUgPSB7XHJcbiAgdXNlck5hbWU6ICcucHJvZmlsZV9fbmFtZScsXHJcbiAgZGVzY3JpcHRpb246ICcucHJvZmlsZV9fZGVzY3JpcHRpb24nXHJcbn07XHJcbmNvbnN0IGlucHV0TmFtZSA9IHByb2ZpbGVGb3JtLmVsZW1lbnRzLm5hbWU7XHJcbmNvbnN0IGlucHV0bkRlc2NyaXB0ID0gcHJvZmlsZUZvcm0uZWxlbWVudHMuZGVzY3JpcHRpb247XHJcblxyXG5cclxuLy8tLS0tLWJ1dHRvbnMtLS0tLS0tXHJcbmNvbnN0IHByb2ZpbGVPcGVuQnV0dG9uID0gbWFpbi5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcclxuY29uc3QgY2FyZEFkZEJ1dHRvbiA9IG1haW4ucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcclxuY29uc3QgYXZhdGFyQ2hhbmdlQnV0dG9uPW1haW4ucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhcicpO1xyXG5cclxuY29uc29sZS5sb2coYXZhdGFyQ2hhbmdlQnV0dG9uKTtcclxuXHJcblxyXG4vLz09PT09PT1mdW5jdGlvbnM9PT09PT09PT1cclxuY29uc3QgaGFuZGxlQ2FyZENsaWNrID0gKGNhcmROYW1lLCBjYXJkTGluaykgPT4ge1xyXG4gIGJpZ0ltYWdlLm9wZW4oY2FyZE5hbWUsIGNhcmRMaW5rKTtcclxufVxyXG5cclxuY29uc3Qgc2V0QXZhdGFyPShhdmF0YXJMaW5rKT0+e1xyXG4gIGNvbnNvbGUubG9nKGF2YXRhckxpbmspXHJcbiAgYXZhdGFySW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLGF2YXRhckxpbmspO1xyXG4gIC8vIHJldHVybiBhdmF0YXJJbWFnZTtcclxufVxyXG5cclxuLy89PT09PT09Y2xhc3NlcyBhbmQgY2FsbGJhY2tzPT09PT09PT09XHJcblxyXG4vLy8vLy8vLy8tLWdldHRpbmcgdXNlciBpbmZvICYgY2FyZHMgZnJvbSBzZXJ2ZXItLS8vLy8vLy8vXHJcbmNvbnN0IGJpZ0ltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfYmlnLWltYWdlJyk7XHJcbmJpZ0ltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBjb25maXJtUG9wdXAgPSBuZXcgUG9wdXBDb25maXJtKCcucG9wdXBfcXVlc3Rpb24nKTtcclxuY29uZmlybVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHRva2VuKTtcclxuYXBpLmdldERhdGEoJ3VzZXJzL21lJylcclxuICAudGhlbigodXNlcnNJbmZvKSA9PiB7XHJcbiAgICB3aW5kb3cubXlJZCA9IHVzZXJzSW5mby5faWQ7XHJcbiAgICBzZXRBdmF0YXIodXNlcnNJbmZvLmF2YXRhcik7XHJcbiAgICBhcGkuZ2V0RGF0YSgnY2FyZHMnKVxyXG4gICAgICAudGhlbigoZGJDYXJkcykgPT4ge1xyXG4gICAgICAgIHdpbmRvdy5hZGRHYWxhcnkgPSBuZXcgU2VjdGlvbih7XHJcbiAgICAgICAgICBpdGVtczogZGJDYXJkcyxcclxuICAgICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXR1cm5DYXJkID0gYWRkTmV3Q2FyZChpdGVtLCBteUlkKTtcclxuICAgICAgICAgICAgYWRkR2FsYXJ5LmFwcGVuZHMocmV0dXJuQ2FyZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgXCIucGhvdG9zXCIpO1xyXG4gICAgICAgIGFkZEdhbGFyeS5yZW5kZXJJdGVtcygpO1xyXG4gICAgICB9KVxyXG4gIH0pXHJcblxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gIH0pO1xyXG5cclxuY29uc3QgYWRkTmV3Q2FyZCA9IChkZXNjcmliZSwgbXlJZCkgPT4ge1xyXG4gIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChcclxuICAgIGRlc2NyaWJlLCAnLnRlbXBsYXRlLWNhcmQnLCBoYW5kbGVDYXJkQ2xpY2ssXHJcbiAgICB7aGFuZGxlQ2FyZERlbGV0ZTogKGNhcmRJZCxldnQpID0+IHtcclxuICAgICAgY29uZmlybVBvcHVwLm9wZW4oKTtcclxuICAgICAgY29uZmlybVBvcHVwLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1NVQk1JVCcpO1xyXG4gICAgICAgIGFwaS5kZWxDYXJkKCdjYXJkcy8nLGNhcmRJZClcclxuICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgbmV3Q2FyZC5kZWxDYXJkKGV2dCk7XHJcbiAgICAgICAgICAgIGNvbmZpcm1Qb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgZGVsTGlrZTogKGNhcmRJZCkgPT4ge1xyXG4gICAgICBhcGkuZGVsTGlrZShgY2FyZHMvJHtjYXJkSWR9L2xpa2VzYClcclxuICAgICAgLnRoZW4oKGl0ZW0pID0+IHtcclxuICAgICAgICBuZXdDYXJkLnVwZGF0ZUxpa2VzKGl0ZW0ubGlrZXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LCBcclxuICAgIGFkZExpa2U6IChjYXJkSWQpID0+IHtcclxuICAgICAgYXBpLmFkZExpa2UoYGNhcmRzLyR7Y2FyZElkfS9saWtlc2ApXHJcbiAgICAgICAgLnRoZW4oKGl0ZW0pID0+IHtcclxuICAgICAgICAgIG5ld0NhcmQudXBkYXRlTGlrZXMoaXRlbS5saWtlcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICB9KTtcclxuICAgIH19LCBcclxuICAgIG15SWQpO1xyXG4gIGNvbnN0IG5ld1JldHVybkNhcmQgPSBuZXdDYXJkLm1ha2VDYXJkKCk7XHJcbiAgcmV0dXJuIG5ld1JldHVybkNhcmQ7XHJcbn1cclxuXHJcbmNvbnN0IHBvcHVwQ2FyZEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICAnLnBvcHVwX2FkZGVyJyxcclxuICAobmFtZUFuZExpbmspID0+IHtcclxuICAgIGFwaS5zZXRDYXJkKCdjYXJkcycsIG5hbWVBbmRMaW5rKVxyXG4gICAgICAudGhlbigoY2FyZCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJldHVybkNhcmQgPSBhZGROZXdDYXJkKGNhcmQsIGNhcmQub3duZXIuX2lkKTtcclxuICAgICAgICBhZGRHYWxhcnkucHJlcGVuZHMocmV0dXJuQ2FyZCk7XHJcbiAgICAgICAgcG9wdXBDYXJkRm9ybS5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuKTtcclxucG9wdXBDYXJkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8ocHJvZmlsZURlc2NyaWJlKTtcclxuXHJcbmNvbnN0IHBvcHVwUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gICcucG9wdXBfZWRpdG9yJyxcclxuICAobmV3SW5wdXRzKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhuZXdJbnB1dHMpO1xyXG4gICAgcG9wdXBQcm9maWxlLmNsb3NlKCk7XHJcbiAgfVxyXG4pO1xyXG5wb3B1cFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHBvcHVwQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgJy5wb3B1cF9hdmF0YXInLFxyXG4gIChnZXRBdmF0YXIpID0+IHtcclxuICAgIGFwaS5zZXRBdmF0YXIoJ3VzZXJzL21lL2F2YXRhcicsIGdldEF2YXRhcilcclxuICAgICAgLnRoZW4oKGF2YSkgPT4ge1xyXG4gICAgICAgIHNldEF2YXRhcihhdmEuYXZhdGFyKTtcclxuICAgICAgICBwb3B1cEF2YXRhci5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuKTtcclxucG9wdXBBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vLS0tLS0tLS1lbmFibGUgdmFsaWRhdGlvbi0tLS0tLS0tLS1cclxuY29uc3QgcHJvZmlsZUZvcm1WYWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25MaXN0LCBwcm9maWxlRm9ybSk7XHJcbnByb2ZpbGVGb3JtVmFsaWRhdGUuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgY2FyZEZvcm1WYWxpZGF0ZSA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25MaXN0LCBjYXJkRm9ybSk7XHJcbmNhcmRGb3JtVmFsaWRhdGUuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRlID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkxpc3QsIGNhcmRGb3JtKTtcclxuYXZhdGFyRm9ybVZhbGlkYXRlLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcblxyXG4vLz09PT09PT09PT1idXR0b25zIGxpc3RlbmVycz09PT09PT09PT09XHJcblxyXG5jYXJkQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHBvcHVwQ2FyZEZvcm0ub3BlbigpO1xyXG4gIGNhcmRGb3JtVmFsaWRhdGUucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pXHJcblxyXG5hdmF0YXJDaGFuZ2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT57XHJcbiAgcG9wdXBBdmF0YXIub3BlbigpO1xyXG4gIGF2YXRhckZvcm1WYWxpZGF0ZS5yZXNldFZhbGlkYXRpb24oKTtcclxufSlcclxuXHJcbnByb2ZpbGVPcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHBvcHVwUHJvZmlsZS5vcGVuKCk7XHJcbiAgY29uc3Qgb2xkUHJvZmlsZSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgaW5wdXROYW1lLnZhbHVlID0gb2xkUHJvZmlsZS51c2VyTmFtZTtcclxuICBpbnB1dG5EZXNjcmlwdC52YWx1ZSA9IG9sZFByb2ZpbGUuZGVzY3JpcHQ7XHJcbiAgcHJvZmlsZUZvcm1WYWxpZGF0ZS5yZXNldFZhbGlkYXRpb24oKTtcclxufSlcclxuXHJcbiJdLCJuYW1lcyI6WyJ2YWxpZGF0aW9uTGlzdCIsImFjdGl2ZUZvcm0iLCJmb3JtSW5wdXQiLCJwb3B1cFNhdmVCdXR0b24iLCJwb3B1cERpc2FibGVCdXR0b24iLCJpbnB1dEVycm9yIiwiYWN0aXZlRXJyb3IiLCJtYWluIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvZmlsZUZvcm0iLCJmb3JtcyIsInByb2ZpbGUiLCJjYXJkRm9ybSIsImFkZEltYWdlIiwiYXZhdGFySW1hZ2UiLCJDYXJkIiwiaXRlbSIsInNlbGVjdG9yVGVtcGxhdGUiLCJoYW5kbGVDYXJkQ2xpY2siLCJteUlkIiwiaGFuZGxlQ2FyZERlbGV0ZSIsImRlbExpa2UiLCJhZGRMaWtlIiwiX3NlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsImV2dCIsIl9oYW5kbGVDYXJkRGVsZXRlIiwiX2NhcmRJZCIsIl9jYXJkVGVtcGxhdGUiLCJ0YXJnZXQiLCJjbG9zZXN0IiwicmVtb3ZlIiwiX293bmVySWQiLCJfY2FyZFJlbW92ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfZGVsZXRlSW1hZ2UiLCJjbGFzc0xpc3QiLCJfY2FyZExpa2UiLCJfbGlrZSIsIl9kZWxMaWtlIiwiX2FkZExpa2UiLCJ0b2dnbGUiLCJfY2FyZEltYWdlIiwiX2hhbmRsZUNhcmRDbGljayIsIl9uZXdDYXJkTmFtZSIsIl9pbWFnZUxpbmsiLCJfZ2V0TGlrZXMiLCJsZW5ndGgiLCJmaW5kIiwiX2lkIiwiX215SWQiLCJhZGQiLCJjb3VudGVyIiwiX2xpa2VOdW1iZXIiLCJ0ZXh0Q29udGVudCIsImxpa2VzIiwiX2NoZWNrTGlrZXMiLCJfYWRkTGlrZUNvdW50ZXIiLCJ0aGlzIiwibmFtZSIsImxpbmsiLCJvd25lciIsIl9nZXRUZW1wbGF0ZSIsIl9jYXJkTmFtZSIsInNldEF0dHJpYnV0ZSIsIl9hZGRFdmVudHMiLCJTZWN0aW9uIiwic2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImlubmVySFRNTCIsImNsZWFyIiwiZm9yRWFjaCIsIml0ZW1IdG1sIiwicHJlcGVuZCIsImFwcGVuZCIsIkZvcm1WYWxpZGF0b3IiLCJsaXN0IiwiZm9ybUFjdGl2ZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9pbnB1dEFycmF5IiwiaW5wdXRzIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl9zZXRFdmVudExpc3RlbmVycyIsInZhbGlkRWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9ySW5FbGVtZW50IiwiX2Zvcm0iLCJpZCIsIl9pbnB1dEVycm9yIiwiX2FjdGl2ZUVycm9yIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwic29tZSIsImlucHV0RWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfc2F2ZUJ1dHRvbiIsIl9wb3B1cERpc2FibGVCdXR0b24iLCJyZW1vdmVBdHRyaWJ1dGUiLCJpbnB1dCIsIl9hY3RpdmVGb3JtIiwiX2Zvcm1JbnB1dCIsIl9wb3B1cFNhdmVCdXR0b24iLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiUG9wdXAiLCJfZXNjQ2xvc2VMaXN0ZW4iLCJrZXkiLCJjbG9zZSIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfY2xvc2VMaXN0ZW5lciIsImN1cnJlbnRUYXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwiX2JpZ0ltYWdlIiwiX2JpZ0ltYWdlQ2FwdGlvbiIsIlBvcHVwV2l0aEZvcm0iLCJnZXREYXRhRnJvbUFwaSIsIl9nZXREYXRhRnJvbUFwaSIsIm5ld1ZhbHVlcyIsInZhbHVlIiwiY29uc29sZSIsImxvZyIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJVc2VySW5mbyIsInVzZXJOYW1lIiwiZGVzY3JpcHRpb24iLCJfbmFtZSIsIl9kZXNjcmlwdGlvbiIsImRlc2NyaXB0IiwibmV3SW5wdXRzIiwiQXBpIiwidG9rZW4iLCJfdXJsIiwiX3Rva2VuIiwiX2hlYWRlcnMiLCJmb3JVcmwiLCJmZXRjaCIsImhlYWRlcnMiLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsIm1ldGhvZCIsInNldHRpbmdzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJsaW5rT2JqIiwiUG9wdXBDb25maXJtIiwiYWN0aW9uIiwiX3ByZXNzWWVzcyIsIl9wcmVzc1llcyIsIl95ZXNCdXR0b24iLCJzZXRTdWJtaXRBY3Rpb24iLCJpbnB1dE5hbWUiLCJlbGVtZW50cyIsImlucHV0bkRlc2NyaXB0IiwicHJvZmlsZU9wZW5CdXR0b24iLCJjYXJkQWRkQnV0dG9uIiwiYXZhdGFyQ2hhbmdlQnV0dG9uIiwiY2FyZE5hbWUiLCJjYXJkTGluayIsImJpZ0ltYWdlIiwib3BlbiIsInNldEF2YXRhciIsImF2YXRhckxpbmsiLCJzZXRFdmVudExpc3RlbmVycyIsImNvbmZpcm1Qb3B1cCIsImFwaSIsImdldERhdGEiLCJ1c2Vyc0luZm8iLCJ3aW5kb3ciLCJhdmF0YXIiLCJkYkNhcmRzIiwiYWRkR2FsYXJ5IiwicmV0dXJuQ2FyZCIsImFkZE5ld0NhcmQiLCJhcHBlbmRzIiwicmVuZGVySXRlbXMiLCJjYXRjaCIsImVyciIsImRlc2NyaWJlIiwibmV3Q2FyZCIsImRlbENhcmQiLCJ1cGRhdGVMaWtlcyIsIm1ha2VDYXJkIiwicG9wdXBDYXJkRm9ybSIsIm5hbWVBbmRMaW5rIiwic2V0Q2FyZCIsImNhcmQiLCJwcmVwZW5kcyIsInVzZXJJbmZvIiwicG9wdXBQcm9maWxlIiwic2V0VXNlckluZm8iLCJwb3B1cEF2YXRhciIsImdldEF2YXRhciIsImF2YSIsInByb2ZpbGVGb3JtVmFsaWRhdGUiLCJlbmFibGVWYWxpZGF0aW9uIiwiY2FyZEZvcm1WYWxpZGF0ZSIsImF2YXRhckZvcm1WYWxpZGF0ZSIsInJlc2V0VmFsaWRhdGlvbiIsIm9sZFByb2ZpbGUiLCJnZXRVc2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=